{
  "version": 3,
  "file": "dat.GUI.RAW.js",
  "sources": [
    "dat/utils/css.js",
    "dat/gui/saveDialogue.html!text",
    "dat/gui/style.css!text",
    "dat/utils/common.js",
    "dat/controllers/Controller.js",
    "dat/dom/dom.js",
    "dat/controllers/OptionController.js",
    "dat/controllers/NumberController.js",
    "dat/controllers/NumberControllerBox.js",
    "dat/controllers/NumberControllerSlider.css!text",
    "dat/controllers/NumberControllerSlider.js",
    "dat/controllers/StringController.js",
    "dat/controllers/FunctionController.js",
    "dat/controllers/BooleanController.js",
    "dat/controllers/ImageController.css!text",
    "dat/controllers/ImageController.js",
    "dat/controllers/factory.js",
    "dat/color/toString.js",
    "dat/color/interpret.js",
    "dat/color/math.js",
    "dat/color/Color.js",
    "dat/controllers/ColorController.js",
    "dat/utils/requestAnimationFrame.js",
    "dat/dom/CenteredDiv.js",
    "dat/gui/GUI.js",
    "index.js"
  ],
  "names": [],
  "mappings": "AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpCA,ADqCA;ACpCA;AACA;AACA,ACHA;AACA;AACA;AACA,ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/IA,ADgJA;AC/IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC9TA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/SA,ADgTA;AC/SA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1IA,AD2IA;AC1IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrJA;AACA;AACA;AACA,ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvFA,ADwFA;ACvFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3EA,AD4EA;AC3EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjFA;AACA;AACA;AACA,ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1GA,AD2GA;AC1GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvCA,ADwCA;ACvCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtGA,ADuGA;ACtGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7XA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjCA,ADkCA;ACjCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACl1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA",
  "sourcesContent": [
    "/**\n * dat.GUI JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\ndefine('dat/utils/css',[],\nfunction() {\n  'use strict';\n\n  return {\n    load: function (url, doc) {\n      doc = doc || document;\n      var link = doc.createElement('link');\n      link.type = 'text/css';\n      link.rel = 'stylesheet';\n      link.href = url;\n      doc.getElementsByTagName('head')[0].appendChild(link);\n    },\n    inject: function(css, doc) {\n      doc = doc || document;\n      var injected = document.createElement('style');\n      injected.type = 'text/css';\n      injected.innerHTML = css;\n      doc.getElementsByTagName('head')[0].appendChild(injected);\n    }\n  };\n});\n\n\n",
    "\ndefine('text!dat/gui/saveDialogue.html',[],function () { return '<div id=\"dg-save\" class=\"dg dialogue\">\\n  Here\\'s the new load parameter for your <code>GUI</code>\\'s constructor:\\n\\n  <textarea id=\"dg-new-constructor\"></textarea>\\n\\n  <div id=\"dg-save-locally\">\\n    <input id=\"dg-local-storage\" type=\"checkbox\"/> \\n\\tAutomatically save values to <code>localStorage</code> on exit.\\n\\n    <div id=\"dg-local-explain\">\\n\\t  The values saved to <code>localStorage</code> will\\n      override those passed to <code>dat.GUI</code>\\'s constructor. This makes it\\n      easier to work incrementally, but <code>localStorage</code> is fragile,\\n      and your friends may not see the same values you do.\\n    </div>\\n  </div>\\n</div>\\n';});\n\n",
    "\ndefine('text!dat/gui/style.css',[],function () { return '.dg {\\n  /** Clear list styles */\\n  /* Auto-place container */\\n  /* Auto-placed GUI\\'s */\\n  /* Line items that don\\'t contain folders. */\\n  /** Folder names */\\n  /** Hides closed items */\\n  /** Controller row */\\n  /** Name-half (left) */\\n  /** Controller-half (right) */\\n  /** Controller placement */\\n  /** Shorter number boxes when slider is present. */\\n  /** Ensure the entire boolean and function row shows a hand */ }\\n  .dg ul {\\n    list-style: none;\\n    margin: 0;\\n    padding: 0;\\n    width: 100%;\\n    clear: both; }\\n  .dg.ac {\\n    position: fixed;\\n    top: 0;\\n    left: 0;\\n    right: 0;\\n    height: 0;\\n    z-index: 0; }\\n  .dg:not(.ac) .main {\\n    /** Exclude mains in ac so that we don\\'t hide close button */\\n    overflow: hidden; }\\n  .dg.main {\\n    -webkit-transition: opacity 0.1s linear;\\n    -o-transition: opacity 0.1s linear;\\n    -moz-transition: opacity 0.1s linear;\\n    transition: opacity 0.1s linear; }\\n    .dg.main.taller-than-window {\\n      overflow-y: auto; }\\n      .dg.main.taller-than-window .close-button {\\n        opacity: 1;\\n        /* TODO, these are style notes */\\n        margin-top: -1px;\\n        border-top: 1px solid #2c2c2c; }\\n    .dg.main ul.closed .close-button {\\n      opacity: 1 !important; }\\n    .dg.main:hover .close-button,\\n    .dg.main .close-button.drag {\\n      opacity: 1; }\\n    .dg.main .close-button {\\n      /*opacity: 0;*/\\n      -webkit-transition: opacity 0.1s linear;\\n      -o-transition: opacity 0.1s linear;\\n      -moz-transition: opacity 0.1s linear;\\n      transition: opacity 0.1s linear;\\n      border: 0;\\n      position: absolute;\\n      line-height: 19px;\\n      height: 20px;\\n      /* TODO, these are style notes */\\n      cursor: pointer;\\n      text-align: center;\\n      background-color: #000; }\\n      .dg.main .close-button:hover {\\n        background-color: #111; }\\n  .dg.a {\\n    float: right;\\n    margin-right: 15px;\\n    overflow-x: hidden; }\\n    .dg.a.has-save > ul {\\n      margin-top: 27px; }\\n      .dg.a.has-save > ul.closed {\\n        margin-top: 0; }\\n    .dg.a .save-row {\\n      position: fixed;\\n      top: 0;\\n      z-index: 1002; }\\n  .dg li {\\n    -webkit-transition: height 0.1s ease-out;\\n    -o-transition: height 0.1s ease-out;\\n    -moz-transition: height 0.1s ease-out;\\n    transition: height 0.1s ease-out; }\\n  .dg li:not(.folder) {\\n    cursor: auto;\\n    height: 27px;\\n    line-height: 27px;\\n    overflow: hidden;\\n    padding: 0 4px 0 5px; }\\n  .dg li.folder {\\n    padding: 0;\\n    border-left: 4px solid rgba(0, 0, 0, 0); }\\n  .dg li.title {\\n    cursor: pointer;\\n    margin-left: -4px; }\\n  .dg .closed li:not(.title),\\n  .dg .closed ul li,\\n  .dg .closed ul li > * {\\n    height: 0;\\n    overflow: hidden;\\n    border: 0; }\\n  .dg .cr {\\n    clear: both;\\n    padding-left: 3px;\\n    height: 27px; }\\n  .dg .property-name {\\n    cursor: default;\\n    float: left;\\n    clear: left;\\n    width: 40%;\\n    overflow: hidden;\\n    text-overflow: ellipsis; \\n    text-overflow: \"…\" \"…\";\\n    white-space: nowrap;\\n  }\\n  .dg .c {\\n    float: left;\\n    width: 60%; }\\n  .dg .c input[type=text] {\\n    border: 0;\\n    margin-top: 4px;\\n    padding: 3px;\\n    width: 100%;\\n    float: right; }\\n  .dg .has-slider input[type=text] {\\n    width: 30%;\\n    /*display: none;*/\\n    margin-left: 0; }\\n  .dg .slider {\\n    float: left;\\n    width: 66%;\\n    margin-left: -5px;\\n    margin-right: 0;\\n    height: 19px;\\n    margin-top: 4px; }\\n  .dg .slider-fg {\\n    height: 100%; }\\n  .dg .c input[type=checkbox] {\\n    margin-top: 9px; }\\n  .dg .c select {\\n    margin-top: 5px; }\\n  .dg .cr.function,\\n  .dg .cr.function .property-name,\\n  .dg .cr.function *,\\n  .dg .cr.boolean,\\n  .dg .cr.boolean * {\\n    cursor: pointer; }\\n  .dg .cr.function .button {\\n    margin: 3px 0px;\\n    padding: 2px 3px;\\n    /* border: 2px solid #666; */\\n    line-height: 18px;\\n    background: #333;\\n    border-radius: 2px;\\n  }\\n  .dg .selector {\\n    display: none;\\n    position: absolute;\\n    margin-left: -9px;\\n    margin-top: 23px;\\n    z-index: 10; }\\n  .dg .c:hover .selector,\\n  .dg .selector.drag {\\n    display: block; }\\n  .dg li.save-row {\\n    padding: 0; }\\n    .dg li.save-row .button {\\n      display: inline-block;\\n      padding: 0px 6px; }\\n  .dg.dialogue {\\n    background-color: #222;\\n    width: 460px;\\n    padding: 15px;\\n    font-size: 13px;\\n    line-height: 15px; }\\n\\n/* TODO Separate style and structure */\\n#dg-new-constructor {\\n  padding: 10px;\\n  color: #222;\\n  font-family: Monaco, monospace;\\n  font-size: 10px;\\n  border: 0;\\n  resize: none;\\n  box-shadow: inset 1px 1px 1px #888;\\n  word-wrap: break-word;\\n  margin: 12px 0;\\n  display: block;\\n  width: 440px;\\n  overflow-y: scroll;\\n  height: 100px;\\n  position: relative; }\\n\\n#dg-local-explain {\\n  display: none;\\n  font-size: 11px;\\n  line-height: 17px;\\n  border-radius: 3px;\\n  background-color: #333;\\n  padding: 8px;\\n  margin-top: 10px; }\\n  #dg-local-explain code {\\n    font-size: 10px; }\\n\\n#dat-gui-save-locally {\\n  display: none; }\\n\\n/** Main type */\\n.dg {\\n  color: #eee;\\n  font: 11px \\'Lucida Grande\\', sans-serif;\\n  text-shadow: 0 -1px 0 #111;\\n  /** Auto place */\\n  /* Controller row, <li> */\\n  /** Controllers */ }\\n  .dg.main {\\n    /** Scrollbar */ }\\n    .dg.main::-webkit-scrollbar {\\n      width: 5px;\\n      background: #1a1a1a; }\\n    .dg.main::-webkit-scrollbar-corner {\\n      height: 0;\\n      display: none; }\\n    .dg.main::-webkit-scrollbar-thumb {\\n      border-radius: 5px;\\n      background: #676767; }\\n  .dg li:not(.folder) {\\n    background: #1a1a1a;\\n    border-bottom: 1px solid #2c2c2c; }\\n  .dg li.save-row {\\n    line-height: 25px;\\n    background: #dad5cb;\\n    border: 0; }\\n    .dg li.save-row select {\\n      margin-left: 5px;\\n      width: 108px; }\\n    .dg li.save-row .button {\\n      margin-left: 5px;\\n      margin-top: 1px;\\n      border-radius: 2px;\\n      font-size: 9px;\\n      line-height: 7px;\\n      padding: 4px 4px 5px 4px;\\n      background: #c5bdad;\\n      color: #fff;\\n      text-shadow: 0 1px 0 #b0a58f;\\n      box-shadow: 0 -1px 0 #b0a58f;\\n      cursor: pointer; }\\n      .dg li.save-row .button.gears {\\n        background: #c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;\\n        height: 7px;\\n        width: 8px; }\\n      .dg li.save-row .button:hover {\\n        background-color: #bab19e;\\n        box-shadow: 0 -1px 0 #b0a58f; }\\n  .dg li.folder {\\n    border-bottom: 0; }\\n  .dg li.title {\\n    padding-left: 16px;\\n    background: black url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;\\n    cursor: pointer;\\n    border-bottom: 1px solid rgba(255, 255, 255, 0.2); }\\n  .dg .closed li.title {\\n    background-image: url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==); }\\n  .dg .cr.boolean {\\n    border-left: 3px solid #806787; }\\n  .dg .cr.color {\\n    border-left: 3px solid; }\\n  .dg .cr.function {\\n    border-left: 3px solid #e61d5f; }\\n  .dg .cr.number {\\n    border-left: 3px solid #2fa1d6; }\\n    .dg .cr.number input[type=text] {\\n      color: #2fa1d6; }\\n  .dg .cr.string {\\n    border-left: 3px solid #1ed36f; }\\n    .dg .cr.string input[type=text] {\\n      color: #1ed36f; }\\n  .dg .cr.function:hover, .dg .cr.boolean:hover {\\n    background: #111; }\\n  .dg .c input[type=text] {\\n    background: #303030;\\n    outline: none; }\\n    .dg .c input[type=text]:hover {\\n      background: #3c3c3c; }\\n    .dg .c input[type=text]:focus {\\n      background: #494949;\\n      color: #fff; }\\n  .dg .c .slider {\\n    background: #303030;\\n    cursor: ew-resize; }\\n  .dg .c .slider-fg {\\n    background: #2fa1d6; }\\n  .dg .c .slider:hover {\\n    background: #3c3c3c; }\\n    .dg .c .slider:hover .slider-fg {\\n      background: #44abda; }\\n';});\n\n",
    "/**\n * dat.GUI JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\ndefine('dat/utils/common',[\n], function() {\n  'use strict';\n\n  var ARR_EACH = Array.prototype.forEach;\n  var ARR_SLICE = Array.prototype.slice;\n\n  /**\n   * Band-aid methods for things that should be a lot easier in JavaScript.\n   * Implementation and structure inspired by underscore.js\n   * http://documentcloud.github.com/underscore/\n   */\n\n  return { \n    BREAK: {},\n  \n    extend: function(target) {\n      this.each(ARR_SLICE.call(arguments, 1), function(obj) {\n        for (var key in obj) {\n          if (!this.isUndefined(obj[key])) {\n            target[key] = obj[key];\n          }\n        }\n      }, this);\n      \n      return target;\n    },\n    \n    defaults: function(target) {\n      this.each(ARR_SLICE.call(arguments, 1), function(obj) {\n        for (var key in obj) {\n          if (this.isUndefined(target[key])) {\n            target[key] = obj[key];\n          }\n        }\n      }, this);\n      \n      return target;\n    },\n    \n    compose: function() {\n      var toCall = ARR_SLICE.call(arguments);\n      return function() {\n        var args = ARR_SLICE.call(arguments);\n        for (var i = toCall.length -1; i >= 0; i--) {\n          args = [toCall[i].apply(this, args)];\n        }\n        return args[0];\n      }\n    },\n    \n    each: function(obj, itr, scope) {\n      if (!obj) {\n        return;\n      }\n\n      if (ARR_EACH && obj.forEach && obj.forEach === ARR_EACH) { \n        obj.forEach(itr, scope);\n      } else if (obj.length === obj.length + 0) { // Is number but not NaN\n        for (var key = 0, l = obj.length; key < l; key++) {\n          if (key in obj && itr.call(scope, obj[key], key) === this.BREAK) {\n            return;\n          }\n        }\n      } else {\n        for (var objkey in obj) {\n          if (itr.call(scope, obj[objkey], objkey) === this.BREAK) {\n            return;\n          }\n        }\n      }\n    },\n    \n    defer: function(fnc) {\n      setTimeout(fnc, 0);\n    },\n    \n    toArray: function(obj) {\n      if (obj.toArray) {\n        return obj.toArray();\n      }\n      return ARR_SLICE.call(obj);\n    },\n\n    isUndefined: function(obj) {\n      return obj === undefined;\n    },\n    \n    isNull: function(obj) {\n      return obj === null;\n    },\n    \n    isNaN: function(obj) {\n      return obj !== obj;\n    },\n    \n    isArray: Array.isArray || function(obj) {\n      return obj.constructor === Array;\n    },\n    \n    isObject: function(obj) {\n      return obj === Object(obj);\n    },\n    \n    isNumber: function(obj) {\n      return obj === +obj;\n    },\n    \n    isFiniteNumber: function(obj) {\n      return (obj === +obj) && isFinite(obj);\n    },\n    \n    isString: function(obj) {\n      return typeof obj === 'string';\n    },\n    \n    isBoolean: function(obj) {\n      return obj === false || obj === true;\n    },\n    \n    isFunction: function(obj) {\n      return Object.prototype.toString.call(obj) === '[object Function]';\n    },\n\n    isImagePath: function(obj) {\n      return typeof obj === 'string' && obj.search(/\\.(gif|jpg|jpeg|png)$/) > -1;\n    }\n  };\n});\n\n\n",
    "// GUI.Controller = function() {\n\n// \tthis.parent = arguments[0];\n//     this.object = arguments[1];\n//     this.propertyName = arguments[2];\n//     this.changeListeners = [];\n\n// \tif (arguments.length > 0) this.initialValue = this.propertyName[this.object];\n\n//     this.domElement = document.createElement('div');\n//     this.domElement.setAttribute('class', 'guidat-controller ' + this.type);\n    \n//     this.propertyNameElement = document.createElement('span');\n//     this.propertyNameElement.setAttribute('class', 'guidat-propertyname');\n//     this.name(this.propertyName);\n//     this.domElement.appendChild(this.propertyNameElement);\n    \n\n    \n//     GUI.makeUnselectable(this.domElement);\n    \n// };\n\n\n\n// GUI.Controller.prototype.name = function(n) {\n// \tthis.propertyNameElement.innerHTML = n;\n// \treturn this;\n// };\n\n// GUI.Controller.prototype.reset = function() {\n// \tthis.setValue(this.initialValue);\n// \treturn this;\n// };\n\n// GUI.Controller.prototype.listen = function() {\n// \tthis.parent.listenTo(this);\n// \treturn this;\n// }\n\n// GUI.Controller.prototype.unlisten = function() {\n// \tthis.parent.unlistenTo(this); // <--- hasn't been tested yet\n// \treturn this;\n// }\n    \n// GUI.Controller.prototype.setValue = function(n) {\n\n// \tthis.object[this.propertyName] = n;\n// \tfor (var i in this.changeListeners) {\n// \t\tthis.changeListeners[i].call(this, n);\n// \t}\n// \t// Whenever you call setValue, the display will be updated automatically.\n// \t// This reduces some clutter in subclasses. We can also use this method for listen().\n// \tthis.updateDisplay();\n// \treturn this;\n// }\n    \n// GUI.Controller.prototype.addChangeListener = function(fnc) {\n// \tthis.changeListeners.push(fnc);\n// \treturn this;\n// }\n\n\n\n\n//\n// EOF\n//\n\n\n\n/**\n * dat.GUI JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\ndefine('dat/controllers/Controller',[\n   'dat/utils/common'\n], function(common) {\n  'use strict';\n\n  /**\n   * @class An \"abstract\" class that represents a given property of an object.\n   *\n   * @param {Object} object The object to be manipulated\n   * @param {string} property The name of the property to be manipulated\n   *\n   * @member dat.controllers\n   */\n  var Controller = function(object, property, type, options) {\n    this.initialValue = object[property];\n\n    /**\n     * Those who extend this class will put their DOM elements in here.\n     * @type {DOMElement}\n     */\n    this.domElement = document.createElement('div');\n\n    /**\n     * The object to manipulate\n     * @type {Object}\n     */\n    this.object = object;\n\n    /**\n     * The name of the property to manipulate\n     * @type {String}\n     */\n    this.property = property;\n\n    /**\n     * Keep track of the options\n     */\n    this.__options = options || {};\n\n    /**\n     * The function to be called on change.\n     * @type {Function}\n     * @ignore\n     */\n    this.__onChange = undefined;\n\n    /**\n     * The function to be called before applying a change.\n     * @type {Function}\n     * @ignore\n     */\n    this.__onBeforeChange = undefined;\n\n    /**\n     * The function to be called on finishing change.\n     * @type {Function}\n     * @ignore\n     */\n    this.__onFinishChange = undefined;\n  };\n\n  common.extend(\n      Controller.prototype,\n\n      /** @lends dat.controllers.Controller.prototype */\n      {\n        /**\n         * Specify a function which fires every time someone has changed the value with\n         * this Controller.\n         *\n         * @param {Function} fnc This function will be called whenever the value\n         * has been modified via this Controller.\n         * @returns {dat.controllers.Controller} this\n         */\n        onChange: function(fnc) {\n          this.__onChange = fnc;\n          return this;\n        },\n\n        /**\n         * Specify a function which fires every time when someone is about to change the value with\n         * this Controller.\n         *\n         * @param {Function} fnc This function will be called whenever the value\n         * is going to be modified via this Controller.\n         * @returns {dat.controllers.Controller} this\n         */\n        onBeforeChange: function(fnc) {\n          this.__onBeforeChange = fnc;\n          return this;\n        },\n\n        /**\n         * Specify a function which fires every time someone \"finishes\" changing\n         * the value with this Controller. Useful for values that change\n         * incrementally like numbers or strings.\n         *\n         * @param {Function} fnc This function will be called whenever\n         * someone \"finishes\" changing the value via this Controller.\n         * @returns {dat.controllers.Controller} this\n         */\n        onFinishChange: function(fnc) {\n          this.__onFinishChange = fnc;\n          return this;\n        },\n\n        /**\n         * Fire the registered onChange function if it exists. The first argument will be the current\n         * property value, while the second argument carries any optional user-specified extra event info.\n         *\n         * @param  {object} event_info Optional user-specified extra event info.\n         *\n         * @returns {dat.controllers.Controller} this\n         */\n        fireChange: function(event_info) {\n          if (this.__onChange) {\n            this.__onChange(this.getValue(), event_info);\n          }\n          return this;\n        },\n\n        /**\n         * Fire the registered onBeforeChange function if it exists. The first argument will be the current\n         * property value, while the second argument carries any optional user-specified extra event info.\n         *\n         * @param  {object} event_info Optional user-specified extra event info.\n         *\n         * @returns {boolean} A truthy return value signals us to *not* apply the change; a falsey return\n         * value permits the change to happen.\n         */\n        fireBeforeChange: function(event_info) {\n          if (this.__onBeforeChange) {\n            return this.__onBeforeChange(this.getValue(), event_info);\n          }\n          return false;  // default: you are cleared to apply the change. \n        },\n\n        /**\n         * Fire the registered onFinishChange function if it exists. The first argument will be the current\n         * property value, while the second argument carries any optional user-specified extra event info.\n         *\n         * @param  {object} event_info Optional user-specified extra event info.\n         *\n         * @returns {dat.controllers.Controller} this\n         */\n        fireFinishChange: function(event_info) {\n          if (this.__onFinishChange) {\n            this.__onFinishChange(this.getValue(), event_info);\n          }\n          return this;\n        },\n\n        /**\n         * Change the value of <code>object[property]</code>\n         *\n         * @param {Object} newValue The new value of <code>object[property]</code>\n         *\n         * @param {Boolean} silent If true, don't call the onChange handler\n         */\n        setValue: function(newValue, silent) {\n          var no_go = false;\n          var changed = (this.object[this.property] !== newValue);\n          if (!silent) {\n            // `newValue` will end up in the second argument of the event listener, thus\n            // userland code can look at both existing and new values for this property\n            // and decide what to do accordingly!\n            no_go = this.fireBeforeChange({\n              newValue: newValue, \n              isChange: changed,\n              silent: silent\n            });\n          }\n          if (!no_go) {\n            this.object[this.property] = newValue;\n          }\n          // Always fire the change event; inform the userland code whether the change was 'real'\n          // or aborted:\n          if (!silent) {\n            this.fireChange(changed);\n          }\n          // Whenever you call setValue, the display will be updated automatically.\n          // This reduces some clutter in subclasses.\n          this.updateDisplay();\n          return this;\n        },\n\n        /**\n         * Gets the value of <code>object[property]</code>\n         *\n         * @returns {Object} The current value of <code>object[property]</code>\n         */\n        getValue: function() {\n          return this.object[this.property];\n        },\n\n        getOption: function(name) {\n          return this.__options[name];\n        },\n\n        setOption: function(name, value) {\n          this.__options[name] = value;\n        },\n\n        getReadonly: function() {\n          return this.getOption('readonly');\n        },\n\n        setReadonly: function(value) {\n          this.setOption('readonly', value);\n          this.updateDisplay();\n        },\n\n        /**\n         * Refreshes the visual display of a Controller in order to keep sync\n         * with the object's current value.\n         * @returns {dat.controllers.Controller} this\n         */\n        updateDisplay: function() {\n          return this;\n        },\n\n        /**\n         * @returns {Boolean} true if the value has deviated from initialValue\n         */\n        isModified: function() {\n          return this.initialValue !== this.getValue();\n        }\n      }\n  );\n\n  return Controller;\n});\n\n\n",
    "/**\n * dat.GUI JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\ndefine('dat/dom/dom',[\n  'dat/utils/common'\n], function(common) {\n\n  'use strict';\n\n  var EVENT_MAP = {\n    'HTMLEvents': ['change'],\n    'MouseEvents': ['click','mousemove','mousedown','mouseup', 'mouseover'],\n    'KeyboardEvents': ['keydown']\n  };\n\n  var EVENT_MAP_INV = {};\n  common.each(EVENT_MAP, function(v, k) {\n    common.each(v, function(e) {\n      EVENT_MAP_INV[e] = k;\n    });\n  });\n\n  var CSS_VALUE_PIXELS = /(\\d+(\\.\\d+)?)px/;\n\n  function cssValueToPixels(val) {\n\n    if (val === '0' || common.isUndefined(val)) {\n      return 0;\n    }\n\n    var match = val.match(CSS_VALUE_PIXELS);\n\n    if (!common.isNull(match)) {\n      return parseFloat(match[1]);\n    }\n\n    // TODO ...ems? %?\n\n    return 0;\n\n  }\n\n  /**\n   * @namespace\n   * @member dat.dom\n   */\n  var dom = {\n\n    /**\n     * \n     * @param elem\n     * @param selectable\n     */\n    makeSelectable: function(elem, selectable) {\n\n      if (elem === undefined || elem.style === undefined) {\n        return;\n      }\n\n      elem.onselectstart = selectable ? function() {\n        return false;\n      } : function() {\n      };\n\n      elem.style.MozUserSelect = selectable ? 'auto' : 'none';\n      elem.style.KhtmlUserSelect = selectable ? 'auto' : 'none';\n      elem.unselectable = selectable ? 'on' : 'off';\n\n    },\n\n    /**\n     *\n     * @param elem\n     * @param horizontal\n     * @param vertical\n     */\n    makeFullscreen: function(elem, horizontal, vertical) {\n\n      if (common.isUndefined(horizontal)) {\n        horizontal = true;\n      }\n      if (common.isUndefined(vertical)) {\n        vertical = true;\n      }\n\n      elem.style.position = 'absolute';\n\n      if (horizontal) {\n        elem.style.left = 0;\n        elem.style.right = 0;\n      }\n      if (vertical) {\n        elem.style.top = 0;\n        elem.style.bottom = 0;\n      }\n\n    },\n\n    /**\n     *\n     * @param elem\n     * @param eventType\n     * @param params\n     */\n    fakeEvent: function(elem, eventType, params, aux) {\n      params = params || {};\n      var className = EVENT_MAP_INV[eventType];\n      if (!className) {\n        throw new Error('Event type ' + eventType + ' not supported.');\n      }\n      var evt = document.createEvent(className);\n      switch (className) {\n        case 'MouseEvents':\n          var clientX = params.x || params.clientX || 0;\n          var clientY = params.y || params.clientY || 0;\n          evt.initMouseEvent(eventType, params.bubbles || false,\n              params.cancelable || true, window, params.clickCount || 1,\n              0, //screen X\n              0, //screen Y\n              clientX, //client X\n              clientY, //client Y\n              false, false, false, false, 0, null);\n          break;\n        case 'KeyboardEvents':\n          var init = evt.initKeyboardEvent || evt.initKeyEvent; // webkit || moz\n          common.defaults(params, {\n            cancelable: true,\n            ctrlKey: false,\n            altKey: false,\n            shiftKey: false,\n            metaKey: false,\n            keyCode: undefined,\n            charCode: undefined\n          });\n          init(eventType, params.bubbles || false,\n              params.cancelable, window,\n              params.ctrlKey, params.altKey,\n              params.shiftKey, params.metaKey,\n              params.keyCode, params.charCode);\n          break;\n        default:\n          evt.initEvent(eventType, params.bubbles || false,\n              params.cancelable || true);\n          break;\n      }\n      common.defaults(evt, aux);\n      elem.dispatchEvent(evt);\n    },\n\n    /**\n     *\n     * @param elem\n     * @param event\n     * @param func\n     * @param bool\n     */\n    bind: function(elem, event, func, bool) {\n      bool = bool || false;\n      if (elem.addEventListener) {\n        elem.addEventListener(event, func, bool);\n      }\n      else if (elem.attachEvent) {\n        elem.attachEvent('on' + event, func);\n      }\n      return dom;\n    },\n\n    /**\n     *\n     * @param elem\n     * @param event\n     * @param func\n     * @param bool\n     */\n    unbind: function(elem, event, func, bool) {\n      bool = bool || false;\n      if (elem.removeEventListener) {\n        elem.removeEventListener(event, func, bool);\n      }\n      else if (elem.detachEvent) {\n        elem.detachEvent('on' + event, func);\n      }\n      return dom;\n    },\n\n    /**\n     *\n     * @param elem\n     * @param className\n     */\n    addClass: function(elem, className) {\n      if (elem.className === undefined) {\n        elem.className = className;\n      } else if (elem.className !== className) {\n        var classes = elem.className.split(/ +/);\n        if (classes.indexOf(className) === -1) {\n          classes.push(className);\n          elem.className = classes.join(' ').replace(/^\\s+/, '').replace(/\\s+$/, '');\n        }\n      }\n      return dom;\n    },\n\n    /**\n     *\n     * @param elem\n     * @param className\n     */\n    removeClass: function(elem, className) {\n      if (className) {\n        /* jshint -W035 */// jshint: ignore empty block\n        if (elem.className === undefined) {\n          // elem.className = undefined;\n        } else if (elem.className === className) {\n          elem.removeAttribute('class');\n        } else {\n          var classes = elem.className.split(/ +/);\n          var index = classes.indexOf(className);\n          if (index !== -1) {\n            classes.splice(index, 1);\n            elem.className = classes.join(' ');\n          }\n        }\n        /* jshint +W035 */\n      } else {\n        elem.className = undefined;\n      }\n      return dom;\n    },\n\n    hasClass: function(elem, className) {\n      return new RegExp('(?:^|\\\\s+)' + className + '(?:\\\\s+|$)').test(elem.className) || false;\n    },\n\n    /**\n     *\n     * @param elem\n     */\n    getWidth: function(elem) {\n\n      var style = getComputedStyle(elem);\n\n      return cssValueToPixels(style['border-left-width']) +\n          cssValueToPixels(style['border-right-width']) +\n          cssValueToPixels(style['padding-left']) +\n          cssValueToPixels(style['padding-right']) +\n          cssValueToPixels(style.width);\n    },\n\n    /**\n     *\n     * @param elem\n     */\n    getHeight: function(elem) {\n\n      var style = getComputedStyle(elem);\n\n      return cssValueToPixels(style['border-top-width']) +\n          cssValueToPixels(style['border-bottom-width']) +\n          cssValueToPixels(style['padding-top']) +\n          cssValueToPixels(style['padding-bottom']) +\n          cssValueToPixels(style.height);\n    },\n\n    /**\n     *\n     * @param elem\n     */\n    getOffset: function(elem) {\n      var offset = {left: 0, top:0};\n      if (elem.offsetParent) {\n        do {\n          offset.left += elem.offsetLeft;\n          offset.top += elem.offsetTop;\n        } while ((elem = elem.offsetParent));\n      }\n      return offset;\n    },\n\n    // http://stackoverflow.com/posts/2684561/revisions\n    /**\n     * \n     * @param elem\n     */\n    isActive: function(elem) {\n      return elem === document.activeElement && ( elem.type || elem.href );\n    }\n\n  };\n\n  return dom;\n\n});\n\n",
    "/**\n * dat.GUI JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\ndefine('dat/controllers/OptionController',[\n    'dat/controllers/Controller',\n    'dat/dom/dom',\n    'dat/utils/common'\n],\nfunction(Controller, dom, common) {\n  'use strict';\n\n  /**\n   * @class Provides a select input to alter the property of an object, using a\n   * list of accepted values.\n   *\n   * @extends dat.controllers.Controller\n   *\n   * @param {Object} object The object to be manipulated\n   * @param {string} property The name of the property to be manipulated\n   * @param {Object|string[]} options A map of labels to acceptable values, or\n   * a list of acceptable string values.\n   *\n   * @member dat.controllers\n   */\n  var OptionController = function(object, property, params, options) {\n    OptionController.superclass.call(this, object, property, 'option', options);\n\n    var _this = this;\n    this.CUSTOM_FLAG = '';\n\n    params = params || {};\n\n    /**\n     * The drop down menu\n     * @ignore\n     */\n    this.__select = document.createElement('select');\n\n    this.__arrow = document.createElement('label');\n    this.__arrow.className = 'caret-down';\n\n    if (common.isArray(params)) {\n      var map = {};\n      common.each(params, function(element) {\n        map[element] = element;\n      });\n      params = map;\n    }\n\n    common.each(params, function(value, key) {\n      var opt = document.createElement('option');\n      opt.innerHTML = key;\n      opt.setAttribute('value', value);\n      _this.__select.appendChild(opt);\n    });\n\n    if (params.custom) {\n      var opt = document.createElement('option');\n      opt.innerHTML = params.custom.display || 'Custom';\n      opt.setAttribute('value', _this.CUSTOM_FLAG);\n      _this.__select.appendChild(opt);\n\n      this.__custom_controller = params.custom.controller;\n    }\n\n    // Acknowledge original value\n    this.updateDisplay();\n\n    dom.bind(this.__select, 'change', function() {\n      var value = this.options[this.selectedIndex].value;\n      if (value === _this.CUSTOM_FLAG) {\n        value = _this.__custom_controller.getValue();\n      }\n      _this.setValue(value);\n    });\n\n    if (this.__custom_controller) {\n      this.__custom_controller.onChange(function() {\n        var value = this.getValue();\n        _this.setValue(value);\n      });\n    }\n\n    this.domElement.appendChild(this.__select);\n    this.domElement.appendChild(this.__arrow);\n    if (this.__custom_controller) {\n      this.domElement.appendChild(this.__custom_controller.el);\n    }\n  };\n\n  OptionController.superclass = Controller;\n\n  common.extend(\n      OptionController.prototype,\n      Controller.prototype,\n      {\n        setValue: function(v) {\n          var toReturn = OptionController.superclass.prototype.setValue.call(this, v);\n          return toReturn;\n        },\n\n        updateDisplay: function() {\n          var value = this.getValue();\n          var custom = true;\n          if (value !== this.CUSTOM_FLAG) {\n            common.each(this.__select.options, function(option) {\n              if (value == option.value) {\n                custom = false;\n              }\n            });\n          }\n\n          this.__select.value = custom ? this.CUSTOM_FLAG : value;\n          this.__select.disabled = this.getReadonly();\n\n          if (this.__custom_controller) {\n            this.__custom_controller.el.style.display = custom ? 'block' : 'none';\n            this.__custom_controller.setReadonly(this.getReadonly());\n          }\n\n          return OptionController.superclass.prototype.updateDisplay.call(this);\n        }\n      }\n  );\n\n  return OptionController;\n});\n\n\n",
    "/**\n * dat.GUI JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\ndefine('dat/controllers/NumberController',[\n    'dat/controllers/Controller',\n    'dat/utils/common'\n], function(Controller, common) {\n  'use strict';\n\n  /**\n   * When the user didn't specify a sane step size, infer a suitable stepsize from the initialValue.\n   */\n  function guestimateImpliedStep(initialValue, userSpecifiedStep, minimumSaneStepSize, maximumSaneStepSize) {\n    if (common.isFiniteNumber(userSpecifiedStep)) {\n      return userSpecifiedStep;\n    }\n\n    var v;\n    if (!initialValue) {\n      v = 1; // What are we, psychics?\n    } else {\n      // make the step a rounded 10th of the initial value.\n      // (the floor(log) minus 1 ensures that the result still is as accurate as possible for very small numbers;\n      // while the old code performed pow(floor(log)) / 10 which would already cause trouble at values near 1E-6)\n      v = Math.pow(10, Math.floor(Math.log(Math.abs(initialValue)) / Math.LN10) - 1);\n    }\n    return Math.max(minimumSaneStepSize, Math.min(maximumSaneStepSize, v));\n  }\n\n  /**\n   * @class Represents a given property of an object that is a number.\n   *\n   * @extends dat.controllers.Controller\n   *\n   * @param {Object} object The object to be manipulated\n   * @param {string} property The name of the property to be manipulated\n   * @param {Object} [params] Optional parameters\n   * @param {Number} [params.min] Minimum allowed value\n   * @param {Number} [params.max] Maximum allowed value\n   * @param {Number} [params.step] Increment by which to change value\n   *\n   * @member dat.controllers\n   */\n  var NumberController = function(object, property, params, options) {\n    NumberController.superclass.call(this, object, property, 'number', options);\n\n    if (typeof this.getValue() !== 'number') {\n      throw 'Provided value is not a number';\n    }\n\n    params = params || {};\n\n    this.__min = (common.isFiniteNumber(params.min) ? params.min : undefined);\n    this.__max = (common.isFiniteNumber(params.max) ? params.max : undefined);\n    this.__step = (common.isFiniteNumber(params.step) ? params.step : undefined);\n    this.__minimumSaneStepSize = params.minimumSaneStepSize || 1E-9;\n    this.__maximumSaneStepSize = params.maximumSaneStepSize || 1E12;\n    this.__mode = params.mode || 'linear';\n\n    this.__impliedStep = guestimateImpliedStep(this.initialValue, this.__step, this.__minimumSaneStepSize, this.__maximumSaneStepSize);\n\n    this.__precision = numDecimals(this.__impliedStep);\n  };\n\n  NumberController.superclass = Controller;\n\n  common.extend(\n      NumberController.prototype,\n      Controller.prototype,\n\n      /** @lends dat.controllers.NumberController.prototype */\n      {\n        setValue: function(v) {\n          if (this.__min !== undefined && v < this.__min) {\n            v = this.__min;\n          } else if (this.__max !== undefined && v > this.__max) {\n            v = this.__max;\n          }\n\n          if (this.__step !== undefined && v % this.__step !== 0) {\n            v = Math.round(v / this.__step) * this.__step;\n          }\n\n          if (this.__mode !== 'linear') {\n            var old_step = this.__impliedStep;\n            this.__impliedStep = guestimateImpliedStep(v, this.__step, this.__minimumSaneStepSize, this.__maximumSaneStepSize);\n            if (old_step !== this.__impliedStep) {\n              this.__precision = numDecimals(this.__impliedStep);\n              console.log('number controller: new step = ', this.__impliedStep, ', precision: ', this.__precision);\n            }\n          }\n\n          return NumberController.superclass.prototype.setValue.call(this, v);\n        },\n\n        /**\n         * Specify a minimum value for <code>object[property]</code>.\n         *\n         * @param {Number} minValue The minimum value for\n         * <code>object[property]</code>\n         * @returns {dat.controllers.NumberController} this\n         */\n        min: function(v) {\n          this.__min = (common.isFiniteNumber(v) ? v : undefined);\n          return this;\n        },\n\n        /**\n         * Specify a maximum value for <code>object[property]</code>.\n         *\n         * @param {Number} maxValue The maximum value for\n         * <code>object[property]</code>\n         * @returns {dat.controllers.NumberController} this\n         */\n        max: function(v) {\n          this.__max = (common.isFiniteNumber(v) ? v : undefined);\n          return this;\n        },\n\n        /**\n         * Specify a step value that dat.controllers.NumberController\n         * increments by.\n         *\n         * @param {Number} stepValue The step value for\n         * dat.controllers.NumberController\n         * @default if minimum and maximum specified increment is 1% of the\n         * difference otherwise stepValue is 1  (TODO: INCORRECT; stepsize is ~10% of the current value)\n         * @returns {dat.controllers.NumberController} this\n         */\n        step: function(v) {\n          this.__step = (common.isFiniteNumber(v) ? v : undefined);\n\n          this.__impliedStep = guestimateImpliedStep(this.getValue(), this.__step, this.__minimumSaneStepSize, this.__maximumSaneStepSize);\n\n          this.__precision = numDecimals(this.__impliedStep);\n          return this;\n        },\n\n        mode: function(m) {\n          this.__mode = m || 'linear';\n\n          return this;\n        },\n\n        getMetaInfo: function() {\n          return {\n            min: this.__min, \n            max: this.__max, \n            step: this.__step, \n            minimumSaneStepSize: this.__minimumSaneStepSize, \n            maximumSaneStepSize: this.__maximumSaneStepSize,\n            mode: this.__mode\n          };\n        }\n      }\n  );\n\n  function numDecimals(x) {\n    x = x.toString();\n    if (x.indexOf('.') > -1) {\n      return x.length - x.indexOf('.') - 1;\n    } else {\n      return 0;\n    }\n  }\n\n  return NumberController;\n});\n\n\n",
    "/**\n * dat.GUI JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\ndefine('dat/controllers/NumberControllerBox',[\n  'dat/controllers/NumberController',\n  'dat/dom/dom',\n  'dat/utils/common'\n], function(NumberController, dom, common) {\n  'use strict';\n\n  /**\n   * @class Represents a given property of an object that is a number and\n   * provides an input element with which to manipulate it.\n   *\n   * @extends dat.controllers.Controller\n   * @extends dat.controllers.NumberController\n   *\n   * @param {Object} object The object to be manipulated\n   * @param {string} property The name of the property to be manipulated\n   * @param {Object} [params] Optional parameters\n   * @param {Number} [params.min] Minimum allowed value\n   * @param {Number} [params.max] Maximum allowed value\n   * @param {Number} [params.step] Increment by which to change value\n   *\n   * @member dat.controllers\n   */\n  var NumberControllerBox = function(object, property, params) {\n    this.__truncationSuspended = false;\n\n    NumberControllerBox.superclass.call(this, object, property, params);\n\n    var _this = this;\n\n    /**\n     * {Number} Previous mouse y position\n     * @ignore\n     */\n    var prev_y;\n\n    this.__input = document.createElement('input');\n    this.__input.setAttribute('type', 'text');\n\n    // Makes it so manually specified values are not truncated.\n\n    dom.bind(this.__input, 'change', onChange);\n    dom.bind(this.__input, 'blur', onBlur);\n    dom.bind(this.__input, 'touchdown', onTouchDown);\n    dom.bind(this.__input, 'mousedown', onMouseDown);\n    dom.bind(this.__input, 'keydown', onKeyDown);\n\n    function onKeyDown(e) {\n      // When pressing ENTER key, you can be as precise as you want.\n      if (e.keyCode === 13) {\n        _this.__truncationSuspended = true;\n        /* jshint validthis: true */\n        this.blur();                              \n        /* jshint validthis: false */\n        _this.__truncationSuspended = false;\n      }\n    }\n\n    function onChange() {\n      var attempted = parseFloat(_this.__input.value);\n      if (!common.isNaN(attempted)) {\n        _this.setValue(attempted);\n      }\n    }\n\n    function onBlur() {\n      onChange();\n      _this.fireFinishChange();\n    }\n\n    function onTouchDown(e) {\n      dom.bind(window, 'touchmove', onTouchDrag);\n      dom.bind(window, 'touchend', onTouchUp);\n      e.preventDefault();\n      prev_y = e.touches[0].clientY;\n    }\n\n    function onTouchDrag(e) {\n      var diff = prev_y - e.touches[0].clientY;\n      _this.setValue(_this.getValue() + diff * _this.__impliedStep);\n\n      prev_y = e.touches[0].clientY;\n      e.preventDefault();\n    }\n\n    function onTouchUp(e) {\n      dom.unbind(window, 'touchmove', onTouchDrag);\n      dom.unbind(window, 'touchend', onTouchUp);\n      e.preventDefault();    \n    }\n\n    function onMouseDown(e) {\n      dom.bind(window, 'mousemove', onMouseDrag);\n      dom.bind(window, 'mouseup', onMouseUp);\n      prev_y = e.clientY;\n    }\n\n    function onMouseDrag(e) {\n      var diff = prev_y - e.clientY;\n      _this.setValue(_this.getValue() + diff * _this.__impliedStep);\n\n      prev_y = e.clientY;\n    }\n\n    function onMouseUp() {\n      dom.unbind(window, 'mousemove', onMouseDrag);\n      dom.unbind(window, 'mouseup', onMouseUp);\n    }\n\n    this.updateDisplay();\n\n    this.domElement.appendChild(this.__input);\n  };\n\n  NumberControllerBox.superclass = NumberController;\n\n  common.extend(\n      NumberControllerBox.prototype,\n      NumberController.prototype,\n      {\n        updateDisplay: function() {\n          this.__input.value = this.__truncationSuspended ? this.getValue() : roundToDecimal(this.getValue(), this.__precision);\n          return NumberControllerBox.superclass.prototype.updateDisplay.call(this);\n        }\n      }\n  );\n\n  function roundToDecimal(value, decimals) {\n    var tenTo = Math.pow(10, decimals);\n    return Math.round(value * tenTo) / tenTo;\n  }\n\n  return NumberControllerBox;\n});\n\n\n",
    "\ndefine('text!dat/controllers/NumberControllerSlider.css',[],function () { return '/**\\n * dat.GUI JavaScript Controller Library\\n * http://code.google.com/p/dat-gui\\n *\\n * Copyright 2011 Data Arts Team, Google Creative Lab\\n *\\n * Licensed under the Apache License, Version 2.0 (the \"License\");\\n * you may not use this file except in compliance with the License.\\n * You may obtain a copy of the License at\\n *\\n * http://www.apache.org/licenses/LICENSE-2.0\\n */\\n\\n.slider {\\n  box-shadow: inset 0 2px 4px rgba(0,0,0,0.15);\\n  height: 1em;\\n  border-radius: 1em;\\n  background-color: #eee;\\n  padding: 0 0.5em;\\n  overflow: hidden;\\n}\\n\\n.slider-fg {\\n  padding: 1px 0 2px 0;\\n  background-color: #aaa;\\n  height: 1em;\\n  margin-left: -0.5em;\\n  padding-right: 0.5em;\\n  border-radius: 1em 0 0 1em;\\n}\\n\\n.slider-fg:after {\\n  display: inline-block;\\n  border-radius: 1em;\\n  background-color: #fff;\\n  border:  1px solid #aaa;\\n  content: \\'\\';\\n  float: right;\\n  margin-right: -1em;\\n  margin-top: -1px;\\n  height: 0.9em;\\n  width: 0.9em;\\n}\\n';});\n\n",
    "/**\n * dat.GUI JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\ndefine('dat/controllers/NumberControllerSlider',[\n    'dat/controllers/NumberController',\n    'dat/dom/dom',\n    'dat/utils/css',\n    'dat/utils/common',\n    'text!dat/controllers/NumberControllerSlider.css'\n], \nfunction(NumberController, dom, css, common, styleSheet) {\n  'use strict';\n\n  /**\n   * @class Represents a given property of an object that is a number, contains\n   * a minimum and maximum, and provides a slider element with which to\n   * manipulate it. It should be noted that the slider element is made up of\n   * <code>&lt;div&gt;</code> tags, <strong>not</strong> the html5\n   * <code>&lt;slider&gt;</code> element.\n   *\n   * @extends dat.controllers.Controller\n   * @extends dat.controllers.NumberController\n   * \n   * @param {Object} object The object to be manipulated\n   * @param {string} property The name of the property to be manipulated\n   * @param {Number} minValue Minimum allowed value\n   * @param {Number} maxValue Maximum allowed value\n   * @param {Number} stepValue Increment by which to change value\n   *\n   * @member dat.controllers\n   */\n  var NumberControllerSlider = function(object, property, min, max, step) {\n    NumberControllerSlider.superclass.call(this, object, property, { min: min, max: max, step: step });\n\n    var _this = this;\n\n    function onTouchDown(e) {\n      dom.bind(window, 'touchmove', onTouchDrag);\n      dom.bind(window, 'touchend', onTouchUp);\n\n      onTouchDrag(e);\n    }\n\n    function onTouchDrag(e) {\n      e.preventDefault();\n\n      var offset = dom.getOffset(_this.__background);\n      var width = dom.getWidth(_this.__background);\n      \n      _this.setValue(\n        map(e.touches[0].clientX, offset.left, offset.left + width, _this.__min, _this.__max)\n      );\n\n      return false;\n    }\n    \n    function onTouchUp() {\n      dom.unbind(window, 'touchmove', onTouchDrag);\n      dom.unbind(window, 'touchend', onTouchUp);\n      _this.fireFinishChange();\n    }    \n\n    function onMouseDown(e) {\n      dom.bind(window, 'mousemove', onMouseDrag);\n      dom.bind(window, 'mouseup', onMouseUp);\n\n      onMouseDrag(e);\n    }\n\n    function onMouseDrag(e) {\n      e.preventDefault();\n\n      var offset = dom.getOffset(_this.__background);\n      var width = dom.getWidth(_this.__background);\n      \n      _this.setValue(\n        map(e.clientX, offset.left, offset.left + width, _this.__min, _this.__max)\n      );\n\n      return false;\n    }\n\n    function onMouseUp() {\n      dom.unbind(window, 'mousemove', onMouseDrag);\n      dom.unbind(window, 'mouseup', onMouseUp);\n      _this.fireFinishChange();\n    }\n\n    this.__background = document.createElement('div');\n    this.__foreground = document.createElement('div');\n    \n    dom.bind(this.__background, 'touchstart', onTouchDown);\n    dom.bind(this.__background, 'mousedown', onMouseDown);\n    \n    dom.addClass(this.__background, 'slider');\n    dom.addClass(this.__foreground, 'slider-fg');\n\n    this.updateDisplay();\n\n    this.__background.appendChild(this.__foreground);\n    this.domElement.appendChild(this.__background);\n  };\n\n  NumberControllerSlider.superclass = NumberController;\n\n  /**\n   * Injects default stylesheet for slider elements.\n   */\n  NumberControllerSlider.useDefaultStyles = function() {\n    css.inject(styleSheet);\n  };\n\n  common.extend(\n      NumberControllerSlider.prototype,\n      NumberController.prototype,\n      {\n        updateDisplay: function() {\n          var pct = (this.getValue() - this.__min) / (this.__max - this.__min);\n          this.__foreground.style.width = (pct * 100) + '%';\n          return NumberControllerSlider.superclass.prototype.updateDisplay.call(this);\n        }\n      }\n  );\n\n  function map(v, i1, i2, o1, o2) {\n    return o1 + (o2 - o1) * ((v - i1) / (i2 - i1));\n  }\n\n  return NumberControllerSlider;\n});\n\n",
    "/**\n * dat.GUI JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\ndefine('dat/controllers/StringController',[\n    'dat/controllers/Controller',\n    'dat/dom/dom',\n    'dat/utils/common'\n], function(Controller, dom, common) {\n  'use strict';\n\n  /**\n   * @class Provides a text input to alter the string property of an object.\n   *\n   * @extends dat.controllers.Controller\n   *\n   * @param {Object} object The object to be manipulated\n   * @param {string} property The name of the property to be manipulated\n   *\n   * @member dat.controllers\n   */\n  var StringController = function(object, property, options) {\n    StringController.superclass.call(this, object, property, 'string', options);\n\n    var _this = this;\n\n    this.__input = document.createElement('input');\n    this.__input.setAttribute('type', 'text');\n\n    dom.bind(this.__input, 'keyup', onChange);\n    dom.bind(this.__input, 'change', onChange);\n    dom.bind(this.__input, 'blur', onBlur);\n    dom.bind(this.__input, 'keydown', onKeyDown);\n\n    function onKeyDown(e) {\n      if (e.keyCode === 13) {\n        /* jshint validthis: true */\n        this.blur(); \n        /* jshint validthis: false */\n      }\n    }\n    \n    function onChange() {\n      _this.setValue(_this.__input.value);\n    }\n\n    function onBlur() {\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.getValue());\n      }\n    }\n\n    this.updateDisplay();\n\n    this.domElement.appendChild(this.__input);\n  };\n\n  StringController.superclass = Controller;\n\n  common.extend(\n      StringController.prototype,\n      Controller.prototype,\n      {\n        updateDisplay: function() {\n          // Stops the caret from moving on account of:\n          // keyup -> setValue -> updateDisplay\n          if (!dom.isActive(this.__input)) {\n            this.__input.value = this.getValue();\n          }\n          this.__input.disabled = this.getReadonly();\n          return StringController.superclass.prototype.updateDisplay.call(this);\n        }\n      }\n  );\n\n  return StringController;\n});\n\n\n",
    "/**\n * dat.GUI JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\ndefine('dat/controllers/FunctionController',[\n    'dat/controllers/Controller',\n    'dat/dom/dom',\n    'dat/utils/common'\n], function(Controller, dom, common) {\n  'use strict';\n  \n  /**\n   * @class Provides a GUI interface to fire a specified method, a property of an object.\n   *\n   * @extends dat.controllers.Controller\n   *\n   * @param {Object} object The object to be manipulated\n   * @param {string} property The name of the property to be manipulated\n   * @param {string} text The text displayed in the button which will invoke the specified method.\n   * @param {Array} user_data Optional set of user-specified datums to be passed to the specified method as its parameters (using JavaScript `.apply()`)\n   *\n   * @member dat.controllers\n   */\n  var FunctionController = function(object, property, text, user_data) {\n    if (!common.isUndefined(user_data) && !common.isArray(user_data)) {\n      user_data = [user_data];\n    }\n\n    FunctionController.superclass.call(this, object, property);\n\n    var _this = this;\n\n    this.__button = document.createElement('div');\n    this.__button.innerHTML = text === undefined ? 'Fire' : text;\n    dom.bind(this.__button, 'click', function(e) {\n      e.preventDefault();\n      e.stopPropagation();\n      _this.fire(user_data);\n      return false;\n    });\n\n    dom.addClass(this.__button, 'button');\n\n    this.domElement.appendChild(this.__button);\n  };\n\n  FunctionController.superclass = Controller;\n\n  common.extend(\n      FunctionController.prototype,\n      Controller.prototype,\n      {\n        fire: function(user_data) {\n          var no_go = this.fireBeforeChange(user_data);\n          if (!no_go) {\n            this.getValue().apply(this.object, user_data);\n          }\n          this.fireChange(user_data);\n          this.fireFinishChange(user_data);\n        }\n      }\n  );\n\n  return FunctionController;\n});\n\n\n",
    "/**\n * dat.GUI JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\ndefine('dat/controllers/BooleanController',[\n  'dat/controllers/Controller',\n  'dat/dom/dom',\n  'dat/utils/common'\n], function(Controller, dom, common) {\n  'use strict';\n\n  /**\n   * @class Provides a checkbox input to alter the boolean property of an object.\n   * @extends dat.controllers.Controller\n   *\n   * @param {Object} object The object to be manipulated\n   * @param {string} property The name of the property to be manipulated\n   *\n   * @member dat.controllers\n   */\n  var BooleanController = function(object, property, options) {\n    BooleanController.superclass.call(this, object, property, 'boolean', options);\n\n    var _this = this;\n    this.__prev = this.getValue();\n\n    this.__checkbox = document.createElement('input');\n    this.__checkbox.setAttribute('type', 'checkbox');\n\n    dom.bind(this.__checkbox, 'change', onChange, false);\n\n    this.domElement.appendChild(this.__checkbox);\n\n    // Match original value\n    this.updateDisplay();\n\n    function onChange() {\n      _this.setValue(!_this.__prev);\n    }\n  };\n\n  BooleanController.superclass = Controller;\n\n  common.extend(\n      BooleanController.prototype,\n      Controller.prototype,\n      {\n        setValue: function(v) {\n          var toReturn = BooleanController.superclass.prototype.setValue.call(this, v);\n          this.__prev = this.getValue();\n          return toReturn;\n        },\n\n        updateDisplay: function() {\n          if (this.getValue() === true) {\n            this.__checkbox.setAttribute('checked', 'checked');\n            this.__checkbox.checked = true;    \n          } else {\n            this.__checkbox.checked = false;\n          }\n\n          this.__checkbox.disabled = this.getReadonly();\n\n          return BooleanController.superclass.prototype.updateDisplay.call(this);\n        }\n      }\n  );\n\n  return BooleanController;\n});\n\n\n",
    "\ndefine('text!dat/controllers/ImageController.css',[],function () { return '\\n.GUI-preview-image\\n{\\n    float: left;\\n    padding: 0.4em;\\n    max-width: 2em;\\n    max-height: 2em;\\n\\n}\\n\\n.GUI-label-image\\n{\\n    color:rgb(214, 214, 245);\\n    text-decoration: underline;\\n    display: block;\\n    background-color: #3c3c3c;\\n    width: 100%;\\n    cursor: pointer;\\n}\\n\\n.GUI-label-image:hover\\n{\\n    background: #3c3c3c;\\n}\\n\\n';});\n\n",
    "/**\n * Created by pery on 16/08/14.\n */\n\ndefine('dat/controllers/ImageController',[\n    'dat/controllers/Controller',\n    'dat/dom/dom',\n    'dat/utils/css',\n    'dat/utils/common',\n    'text!dat/controllers/ImageController.css'\n], function(Controller, dom, css, common, styleSheet) {\n  'use strict';\n\n    /**\n     * @class Provides a image/file input to alter the url property on an object\n     *\n     * @extends dat.controllers.Controller\n     *\n     * @param {Object} object The object to be manipulated\n     * @param {string} property The name of the property to be manipulated\n     *\n     * @member dat.controllers\n     */\n    function ImageController(Object, property) {\n        ImageController.superclass.call(this, Object, property);\n\n        var _this = this;\n\n        this.__input = document.createElement('input');\n        this.__input.setAttribute('type', 'file');\n        this.__input.style.display = 'none';\n\n        this.__label = document.createElement('label');\n        this.__label.innerText = this.getValue();\n        this.__label.appendChild(this.__input);\n\n        this.__previewImage = document.createElement('img');\n\n        dom.addClass(this.__previewImage, 'GUI-preview-image');\n        dom.addClass(this.__label, 'GUI-label-image');\n\n        function onChange() {\n            var file = _this.__input.files[0];\n            var url = URL.createObjectURL(file);\n            _this.__previewImage.src = url;\n            _this.setValue(url);\n        }\n\n        dom.bind(this.__input, 'change', onChange);\n        //todo: bind onDragRelease\n\n        this.updateDisplay();\n        this.domElement.appendChild(this.__previewImage);\n        this.domElement.appendChild(this.__label);\n    }\n\n    ImageController.superclass = Controller;\n\n    /**\n     * Injects default stylesheet for slider elements.\n     */\n    ImageController.useDefaultStyles = function() {\n        css.inject(styleSheet);\n    };\n\n    common.extend(\n        ImageController.prototype,\n        Controller.prototype,\n        {\n            updateDisplay: function() {\n                this.__previewImage.src = this.getValue();\n                return ImageController.superclass.prototype.updateDisplay.call(this);\n            }\n        }\n    )\n\n    return ImageController;\n});\n\n\n",
    "/**\n * dat.GUI JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\ndefine('dat/controllers/factory',[\n  'dat/controllers/Controller',\n  'dat/controllers/OptionController',\n  'dat/controllers/NumberControllerBox',\n  'dat/controllers/NumberControllerSlider',\n  'dat/controllers/StringController',\n  'dat/controllers/FunctionController',\n  'dat/controllers/BooleanController',\n  'dat/controllers/ImageController',\n  'dat/utils/common'\n],\n    function(Controller, OptionController, NumberControllerBox, NumberControllerSlider, StringController, FunctionController, BooleanController, ImageController, common) {\n      'use strict';\n      \n      var firstTimeImageController = true;\n\n      var ARR_SLICE = Array.prototype.slice;\n\n      function isControllerTemplate(f) {\n        return typeof f === 'function' &&\n            f.prototype &&\n            typeof f.prototype.onChange === 'function' &&\n            typeof f.prototype.onFinishChange === 'function' &&\n            typeof f.prototype.setValue === 'function' &&\n            typeof f.prototype.getValue === 'function' &&\n            typeof f.prototype.updateDisplay === 'function';\n      }\n\n      return function(object, property, controllerName, controllers, options_1, options_2, options_3, options_4, options_5, options_6) {\n        // when the user specified a specific controller, we'll be using that one, otherwise we 'sniff' the correct controller giving the input values & ditto types.\n        var ControllerConstructor = controllers[controllerName];\n        if (!ControllerConstructor && /* controllerName instanceof Controller */ isControllerTemplate(controllerName)) {\n          ControllerConstructor = controllerName;\n        }\n        if (ControllerConstructor) {\n          return new ControllerConstructor(object, property, options_1, options_2, options_3, options_4, options_5, options_6);\n        }\n\n        var initialValue = object[property];\n\n        // Providing options?\n        if (common.isArray(options_1) || common.isObject(options_1)) {\n          return new OptionController(object, property, options_1);\n        }\n\n        // Providing a map?\n\n        if (common.isNumber(initialValue)) {\n          if (common.isNumber(options_1) && common.isNumber(options_2)) {\n            // Has min and max.\n            return new NumberControllerSlider(object, property, options_1, options_2, options_3, options_4, options_5, options_6);\n          } else {\n            return new NumberControllerBox(object, property, { \n              min: options_1, \n              max: options_2, \n              step: options_3, \n              minimumSaneStepSize: options_4, \n              maximumSaneStepSize: options_5,\n              mode: options_6\n            });\n          }\n        }\n\n        if (common.isImagePath(initialValue)) {\n          if (firstTimeImageController) {\n            ImageController.useDefaultStyles();\n            firstTimeImageController = false;\n          }\n          return new ImageController(object, property);\n        }\n\n        if (common.isString(initialValue)) {\n          return new StringController(object, property);\n        }\n\n        if (common.isFunction(initialValue)) {\n          var opts = ARR_SLICE.call(arguments, 5);\n          if (opts.length === 0) {\n            opts = undefined;\n          }\n          return new FunctionController(object, property, options_1, opts);\n        }\n\n        if (common.isBoolean(initialValue)) {\n          return new BooleanController(object, property);\n        }\n\n        // otherwise: we cannot 'sniff' the type of controller you want, since the\n        // `initialValue` is null or undefined.\n        return false;\n      }\n    });\n\n\n",
    "/**\n * dat.GUI JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\ndefine('dat/color/toString',[\n  'dat/utils/common'\n], function(common) {\n\n  'use strict';\n\n  return function(color) {\n\n    if (color.a === 1 || common.isUndefined(color.a)) {\n\n      var s = color.hex.toString(16);\n      while (s.length < 6) {\n        s = '0' + s;\n      }\n\n      return '#' + s;\n\n    } else {\n\n      return 'rgba(' + Math.round(color.r) + ',' + Math.round(color.g) + ',' + Math.round(color.b) + ',' + color.a + ')';\n\n    }\n\n  };\n\n});\n\n",
    "/**\n * dat.GUI JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\ndefine('dat/color/interpret',[\n  'dat/color/toString',\n  'dat/utils/common'\n], function(toString, common) {\n\n  'use strict';\n\n  var result, toReturn;\n\n  var interpret = function() {\n\n    toReturn = false;\n\n    var original = arguments.length > 1 ? common.toArray(arguments) : arguments[0];\n\n    common.each(INTERPRETATIONS, function(family) {\n\n      if (family.litmus(original)) {\n\n        common.each(family.conversions, function(conversion, conversionName) {\n\n          result = conversion.read(original);\n\n          if (toReturn === false && result !== false) {\n            toReturn = result;\n            result.conversionName = conversionName;\n            result.conversion = conversion;\n            return common.BREAK;\n\n          }\n\n        });\n\n        return common.BREAK;\n\n      }\n\n    });\n\n    return toReturn;\n\n  };\n\n  var INTERPRETATIONS = [\n\n    // Strings\n    {\n\n      litmus: common.isString,\n\n      conversions: {\n\n        THREE_CHAR_HEX: {\n\n          read: function(original) {\n\n            var test = original.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);\n            if (test === null) {\n              return false;\n            }\n\n            return {\n              space: 'HEX',\n              hex: parseInt(\n                  '0x' +\n                      test[1].toString() + test[1].toString() +\n                      test[2].toString() + test[2].toString() +\n                      test[3].toString() + test[3].toString(), 16)\n            };\n\n          },\n\n          write: toString\n\n        },\n\n        SIX_CHAR_HEX: {\n\n          read: function(original) {\n\n            var test = original.match(/^#([A-F0-9]{6})$/i);\n            if (test === null) {\n              return false;\n            }\n\n            return {\n              space: 'HEX',\n              hex: parseInt('0x' + test[1].toString(), 16)\n            };\n\n          },\n\n          write: toString\n\n        },\n\n        CSS_RGB: {\n\n          read: function(original) {\n\n            var test = original.match(/^rgb\\(\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*\\)/);\n            if (test === null) { \n              return false; \n            }\n\n            return {\n              space: 'RGB',\n              r: parseFloat(test[1]),\n              g: parseFloat(test[2]),\n              b: parseFloat(test[3])\n            };\n\n          },\n\n          write: toString\n\n        },\n\n        CSS_RGBA: {\n\n          read: function(original) {\n\n            var test = original.match(/^rgba\\(\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*\\,\\s*(.+)\\s*\\)/);\n            if (test === null) {\n              return false;\n            }\n\n            return {\n              space: 'RGB',\n              r: parseFloat(test[1]),\n              g: parseFloat(test[2]),\n              b: parseFloat(test[3]),\n              a: parseFloat(test[4])\n            };\n\n          },\n\n          write: toString\n\n        }\n\n      }\n\n    },\n\n    // Numbers\n    {\n\n      litmus: common.isNumber,\n\n      conversions: {\n\n        HEX: {\n          read: function(original) {\n            return {\n              space: 'HEX',\n              hex: original,\n              conversionName: 'HEX'\n            };\n          },\n\n          write: function(color) {\n            return color.hex;\n          }\n        }\n\n      }\n\n    },\n\n    // Arrays\n    {\n\n      litmus: common.isArray,\n\n      conversions: {\n\n        RGB_ARRAY: {\n          read: function(original) {\n            if (original.length !== 3) {\n              return false;\n            }\n\n            return {\n              space: 'RGB',\n              r: original[0],\n              g: original[1],\n              b: original[2]\n            };\n          },\n\n          write: function(color) {\n            return [color.r, color.g, color.b];\n          }\n\n        },\n\n        RGBA_ARRAY: {\n          read: function(original) {\n            if (original.length !== 4) {\n              return false;\n            }\n\n            return {\n              space: 'RGB',\n              r: original[0],\n              g: original[1],\n              b: original[2],\n              a: original[3]\n            };\n          },\n\n          write: function(color) {\n            return [color.r, color.g, color.b, color.a];\n          }\n\n        }\n\n      }\n\n    },\n\n    // Objects\n    {\n\n      litmus: common.isObject,\n\n      conversions: {\n\n        RGBA_OBJ: {\n          read: function(original) {\n            if (common.isNumber(original.r) &&\n                common.isNumber(original.g) &&\n                common.isNumber(original.b) &&\n                common.isNumber(original.a)) {\n              return {\n                space: 'RGB',\n                r: original.r,\n                g: original.g,\n                b: original.b,\n                a: original.a\n              };\n            }\n            return false;\n          },\n\n          write: function(color) {\n            return {\n              r: color.r,\n              g: color.g,\n              b: color.b,\n              a: color.a\n            };\n          }\n        },\n\n        RGB_OBJ: {\n          read: function(original) {\n            if (common.isNumber(original.r) &&\n                common.isNumber(original.g) &&\n                common.isNumber(original.b)) {\n              return {\n                space: 'RGB',\n                r: original.r,\n                g: original.g,\n                b: original.b\n              };\n            }\n            return false;\n          },\n\n          write: function(color) {\n            return {\n              r: color.r,\n              g: color.g,\n              b: color.b\n            };\n          }\n        },\n\n        HSVA_OBJ: {\n          read: function(original) {\n            if (common.isNumber(original.h) &&\n                common.isNumber(original.s) &&\n                common.isNumber(original.v) &&\n                common.isNumber(original.a)) {\n              return {\n                space: 'HSV',\n                h: original.h,\n                s: original.s,\n                v: original.v,\n                a: original.a\n              };\n            }\n            return false;\n          },\n\n          write: function(color) {\n            return {\n              h: color.h,\n              s: color.s,\n              v: color.v,\n              a: color.a\n            };\n          }\n        },\n\n        HSV_OBJ: {\n          read: function(original) {\n            if (common.isNumber(original.h) &&\n                common.isNumber(original.s) &&\n                common.isNumber(original.v)) {\n              return {\n                space: 'HSV',\n                h: original.h,\n                s: original.s,\n                v: original.v\n              };\n            }\n            return false;\n          },\n\n          write: function(color) {\n            return {\n              h: color.h,\n              s: color.s,\n              v: color.v\n            };\n          }\n\n        }\n\n      }\n\n    }\n\n  ];\n\n  return interpret;\n\n});\n\n",
    "/**\n * dat.GUI JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\ndefine('dat/color/math',[\n\n], function() {\n\n  'use strict';\n\n  var tmpComponent;\n\n  return {\n\n    hsv_to_rgb: function(h, s, v) {\n\n      var hi = Math.floor(h / 60) % 6;\n\n      var f = h / 60 - Math.floor(h / 60);\n      var p = v * (1.0 - s);\n      var q = v * (1.0 - (f * s));\n      var t = v * (1.0 - ((1.0 - f) * s));\n      var c = [\n        [v, t, p],\n        [q, v, p],\n        [p, v, t],\n        [p, q, v],\n        [t, p, v],\n        [v, p, q]\n      ][hi];\n\n      return {\n        r: c[0] * 255,\n        g: c[1] * 255,\n        b: c[2] * 255\n      };\n\n    },\n\n    rgb_to_hsv: function(r, g, b) {\n\n      var min = Math.min(r, g, b),\n          max = Math.max(r, g, b),\n          delta = max - min,\n          h, s;\n\n      if (max !== 0) {\n        s = delta / max;\n      } else {\n        return {\n          h: NaN,\n          s: 0,\n          v: 0\n        };\n      }\n\n      if (r === max) {\n        h = (g - b) / delta;\n      } else if (g === max) {\n        h = 2 + (b - r) / delta;\n      } else {\n        h = 4 + (r - g) / delta;\n      }\n      h /= 6;\n      if (h < 0) {\n        h += 1;\n      }\n\n      return {\n        h: h * 360,\n        s: s,\n        v: max / 255\n      };\n    },\n\n    rgb_to_hex: function(r, g, b) {\n      var hex = this.hex_with_component(0, 2, r);\n      hex = this.hex_with_component(hex, 1, g);\n      hex = this.hex_with_component(hex, 0, b);\n      return hex;\n    },\n\n    component_from_hex: function(hex, componentIndex) {\n      return (hex >> (componentIndex * 8)) & 0xFF;\n    },\n\n    hex_with_component: function(hex, componentIndex, value) {\n      return value << (tmpComponent = componentIndex * 8) | (hex & ~ (0xFF << tmpComponent));\n    }\n\n  };\n\n});\n\n",
    "/**\n * dat.GUI JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\ndefine('dat/color/Color',[\n  'dat/color/interpret',\n  'dat/color/math',\n  'dat/color/toString',\n  'dat/utils/common'\n], function(interpret, math, toString, common) {\n\n  'use strict';\n\n  var Color = function() {\n\n    this.__state = interpret.apply(this, arguments);\n\n    if (this.__state === false) {\n      throw 'Failed to interpret color arguments';\n    }\n\n    this.__state.a = this.__state.a || 1;\n\n  };\n\n  Color.COMPONENTS = ['r','g','b','h','s','v','hex','a'];\n\n  common.extend(Color.prototype, {\n\n    toString: function() {\n      return toString(this);\n    },\n\n    toOriginal: function() {\n      return this.__state.conversion.write(this);\n    }\n\n  });\n\n  defineRGBComponent(Color.prototype, 'r', 2);\n  defineRGBComponent(Color.prototype, 'g', 1);\n  defineRGBComponent(Color.prototype, 'b', 0);\n\n  defineHSVComponent(Color.prototype, 'h');\n  defineHSVComponent(Color.prototype, 's');\n  defineHSVComponent(Color.prototype, 'v');\n\n  Object.defineProperty(Color.prototype, 'a', {\n\n    get: function() {\n      return this.__state.a;\n    },\n\n    set: function(v) {\n      this.__state.a = v;\n    }\n\n  });\n\n  Object.defineProperty(Color.prototype, 'hex', {\n\n    get: function() {\n\n      if (this.__state.space !== 'HEX') {\n        this.__state.hex = math.rgb_to_hex(this.r, this.g, this.b);\n      }\n\n      return this.__state.hex;\n\n    },\n\n    set: function(v) {\n\n      this.__state.space = 'HEX';\n      this.__state.hex = v;\n\n    }\n\n  });\n\n  function defineRGBComponent(target, component, componentHexIndex) {\n\n    Object.defineProperty(target, component, {\n\n      get: function() {\n\n        if (this.__state.space === 'RGB') {\n          return this.__state[component];\n        }\n\n        recalculateRGB(this, component, componentHexIndex);\n\n        return this.__state[component];\n\n      },\n\n      set: function(v) {\n\n        if (this.__state.space !== 'RGB') {\n          recalculateRGB(this, component, componentHexIndex);\n          this.__state.space = 'RGB';\n        }\n\n        this.__state[component] = v;\n\n      }\n\n    });\n\n  }\n\n  function defineHSVComponent(target, component) {\n\n    Object.defineProperty(target, component, {\n\n      get: function() {\n\n        if (this.__state.space === 'HSV') {\n          return this.__state[component];\n        }\n\n        recalculateHSV(this);\n\n        return this.__state[component];\n\n      },\n\n      set: function(v) {\n\n        if (this.__state.space !== 'HSV') {\n          recalculateHSV(this);\n          this.__state.space = 'HSV';\n        }\n\n        this.__state[component] = v;\n\n      }\n\n    });\n\n  }\n\n  function recalculateRGB(color, component, componentHexIndex) {\n\n    if (color.__state.space === 'HEX') {\n\n      color.__state[component] = math.component_from_hex(color.__state.hex, componentHexIndex);\n\n    } else if (color.__state.space === 'HSV') {\n\n      common.extend(color.__state, math.hsv_to_rgb(color.__state.h, color.__state.s, color.__state.v));\n\n    } else {\n\n      throw 'Corrupted color state';\n\n    }\n\n  }\n\n  function recalculateHSV(color) {\n\n    var result = math.rgb_to_hsv(color.r, color.g, color.b);\n\n    common.extend(color.__state,\n        {\n          s: result.s,\n          v: result.v\n        }\n    );\n\n    if (!common.isNaN(result.h)) {\n      color.__state.h = result.h;\n    } else if (common.isUndefined(color.__state.h)) {\n      color.__state.h = 0;\n    }\n\n  }\n\n  return Color;\n\n});\n\n",
    "/**\n * dat.GUI JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\ndefine('dat/controllers/ColorController',[\n  'dat/controllers/Controller',\n  'dat/dom/dom',\n  'dat/color/Color',\n  'dat/color/interpret',\n  'dat/utils/common'\n], function(Controller, dom, Color, interpret, common) {\n  'use strict';\n\n  var ColorController = function(object, property, options) {\n    ColorController.superclass.call(this, object, property, 'color', options);\n\n    this.__color = new Color(this.getValue());\n    this.__temp = new Color(0);\n\n    var _this = this;\n\n    this.domElement = document.createElement('div');\n\n    dom.makeSelectable(this.domElement, false);\n\n    this.__selector = document.createElement('div');\n    this.__selector.className = 'selector';\n\n    this.__saturation_field = document.createElement('div');\n    this.__saturation_field.className = 'saturation-field';\n\n    this.__field_knob = document.createElement('div');\n    this.__field_knob.className = 'field-knob';\n    this.__field_knob_border = '2px solid ';\n\n    this.__hue_knob = document.createElement('div');\n    this.__hue_knob.className = 'hue-knob';\n\n    this.__hue_field = document.createElement('div');\n    this.__hue_field.className = 'hue-field';\n\n    this.__input = document.createElement('input');\n    this.__input.type = 'text';\n    this.__input_textShadow = ['1px 0px 0px ', '-1px 0px 0px ', '0px 1px 0px ', '0px -1px 0px '];\n\n    /* jshint unused: false */\n\n    dom.bind(this.__input, 'keydown', function(e) {\n      if (e.keyCode === 13) { // on enter\n        onBlur.call(this);\n      }\n    });\n\n    dom.bind(this.__input, 'blur', onBlur);\n\n    dom.bind(this.__selector, 'mousedown', function(e) {\n      dom\n        .addClass(this, 'drag')\n        .bind(window, 'mouseup', function(e) {\n          dom.removeClass(_this.__selector, 'drag');\n        });\n    });\n\n    dom.bind(this.__selector, 'touchstart', function(e) {\n      dom\n        .addClass(this, 'drag')\n        .bind(window, 'touchend', function(e) {\n          dom.removeClass(_this.__selector, 'drag');\n        });\n    });\n\n    /* jshint unused: true */\n\n    var value_field = document.createElement('div');\n\n    common.extend(this.__selector.style, {\n      width: '122px',\n      height: '102px',\n      padding: '3px',\n      backgroundColor: '#222',\n      boxShadow: '0px 1px 3px rgba(0,0,0,0.3)'\n    });\n\n    common.extend(this.__field_knob.style, {\n      position: 'absolute',\n      width: '12px',\n      height: '12px',\n      border: this.__field_knob_border + (this.__color.v < 0.5 ? '#fff' : '#000'),\n      boxShadow: '0px 1px 3px rgba(0,0,0,0.5)',\n      borderRadius: '12px',\n      zIndex: 1\n    });\n    \n    common.extend(this.__hue_knob.style, {\n      position: 'absolute',\n      width: '15px',\n      height: '2px',\n      borderRight: '4px solid #fff',\n      zIndex: 1\n    });\n\n    common.extend(this.__saturation_field.style, {\n      width: '100px',\n      height: '100px',\n      border: '1px solid #555',\n      marginRight: '3px',\n      display: 'inline-block',\n      cursor: 'pointer'\n    });\n\n    common.extend(value_field.style, {\n      width: '100%',\n      height: '100%',\n      background: 'none'\n    });\n    \n    linearGradient(value_field, 'top', 'rgba(0,0,0,0)', '#000');\n\n    common.extend(this.__hue_field.style, {\n      width: '15px',\n      height: '100px',\n      display: 'inline-block',\n      border: '1px solid #555',\n      cursor: 'ns-resize'\n    });\n\n    hueGradient(this.__hue_field);\n\n    common.extend(this.__input.style, {\n      outline: 'none',\n//      width: '120px',\n      textAlign: 'center',\n//      padding: '4px',\n//      marginBottom: '6px',\n      color: '#fff',\n      border: 0,\n      fontWeight: 'bold',\n      textShadow: this.__input_textShadow.map(function (d) {\n        return d + ' rgba(0,0,0,0.7)';\n      }).join(', ')\n    });\n\n    dom.bind(this.__saturation_field, 'mousedown', fieldDown);\n    dom.bind(this.__field_knob, 'mousedown', fieldDown);\n    dom.bind(this.__saturation_field, 'touchstart', fieldDownOnTouch);\n    dom.bind(this.__field_knob, 'touchstart', fieldDownOnTouch);\n\n    dom.bind(this.__hue_field, 'mousedown', function(e) {\n      setH(e);\n      dom.bind(window, 'mousemove', setH);\n      dom.bind(window, 'mouseup', unbindH);\n    });\n\n    dom.bind(this.__hue_field, 'touchstart', function(e) {\n      setHonTouch(e);\n      dom.bind(window, 'touchmove', setHonTouch);\n      dom.bind(window, 'touchend', unbindH);\n    });\n\n    function fieldDown(e) {\n      setSV(e);\n      // document.body.style.cursor = 'none';\n      dom.bind(window, 'mousemove', setSV);\n      dom.bind(window, 'mouseup', unbindSV);\n      dom.bind(window, 'touchmove', setSVonTouch);\n      dom.bind(window, 'touchend', unbindSV);\n    }\n\n    function fieldDownOnTouch(e) {\n      e.clientX = e.touches[0].clientX;\n      e.clientY = e.touches[0].clientY;\n      fieldDown(e);\n    }\n\n    function unbindSV() {\n      dom.unbind(window, 'mousemove', setSV);\n      dom.unbind(window, 'mouseup', unbindSV);\n      dom.unbind(window, 'touchmove', setSVonTouch);\n      dom.unbind(window, 'touchend', unbindSV);\n      // document.body.style.cursor = 'default';\n    }\n\n    function onBlur() {\n      /* jshint validthis: true */\n      var i = interpret(this.value);\n      if (i !== false) {\n        _this.__color.__state = i;\n        _this.setValue(_this.__color.toOriginal());\n      } else {\n        this.value = _this.__color.toString();\n      }\n      /* jshint validthis: false */\n    }\n\n    function unbindH() {\n      dom.unbind(window, 'mousemove', setH);\n      dom.unbind(window, 'mouseup', unbindH);\n      dom.unbind(window, 'touchmove', setHonTouch);\n      dom.unbind(window, 'touchend', unbindH);\n    }\n\n    this.__saturation_field.appendChild(value_field);\n    this.__selector.appendChild(this.__field_knob);\n    this.__selector.appendChild(this.__saturation_field);\n    this.__selector.appendChild(this.__hue_field);\n    this.__hue_field.appendChild(this.__hue_knob);\n\n    this.domElement.appendChild(this.__input);\n    this.domElement.appendChild(this.__selector);\n\n    this.updateDisplay();\n\n    function setSV(e) {\n      e.preventDefault();\n\n      var w = dom.getWidth(_this.__saturation_field);\n      var o = dom.getOffset(_this.__saturation_field);\n      var scroll = getScroll(_this.__saturation_field);\n      var s = (e.clientX - o.left + scroll.left) / w;\n      var v = 1 - (e.clientY - o.top + scroll.top) / w;\n\n      if (v > 1) {\n        v = 1;\n      }\n      else if (v < 0) {\n        v = 0;\n      }\n\n      if (s > 1) {\n        s = 1;\n      }\n      else if (s < 0) {\n        s = 0;\n      }\n\n      _this.__color.v = v;\n      _this.__color.s = s;\n\n      _this.setValue(_this.__color.toOriginal());\n\n      return false;\n    }\n\n    function setH(e) {\n      e.preventDefault();\n\n      var s = dom.getHeight(_this.__hue_field);\n      var o = dom.getOffset(_this.__hue_field);\n      var scroll = getScroll(_this.__hue_field);\n      var h = 1 - (e.clientY - o.top + scroll.top) / s;\n\n      if (h > 1) {\n        h = 1;\n      }\n      else if (h < 0) {\n        h = 0;\n      }\n\n      _this.__color.h = h * 360;\n\n      _this.setValue(_this.__color.toOriginal());\n\n      return false;\n    }\n\n    function setSVonTouch(e) {\n      e.clientX = e.touches[0].clientX;\n      e.clientY = e.touches[0].clientY;\n      return setSV(e);\n    }\n\n    function setHonTouch(e) {\n      e.clientY = e.touches[0].clientY;\n      return setH(e);\n    }\n\n    function getScroll(el) {\n      var scroll = { top: el.scrollTop, left: el.scrollLeft };\n      while(el = el.parentNode) {\n        scroll.top += (el.scrollTop || 0);\n        scroll.left += (el.scrollLeft || 0);\n      }\n      return scroll;\n    }\n  };\n\n  ColorController.superclass = Controller;\n\n  common.extend(\n      ColorController.prototype,\n      Controller.prototype,\n      {\n        updateDisplay: function() {\n          var i = interpret(this.getValue());\n\n          if (i !== false) {\n            var mismatch = false;\n\n            // Check for mismatch on the interpreted value.\n\n            common.each(Color.COMPONENTS, function(component) {\n              if (!common.isUndefined(i[component]) &&\n                  !common.isUndefined(this.__color.__state[component]) &&\n                  i[component] !== this.__color.__state[component]) {\n                mismatch = true;\n                return {}; // break\n              }\n            }, this);\n\n            // If nothing diverges, we keep our previous values\n            // for statefulness, otherwise we recalculate fresh\n            if (mismatch) {\n              common.extend(this.__color.__state, i);\n            }\n          }\n\n          common.extend(this.__temp.__state, this.__color.__state);\n\n          this.__temp.a = 1;\n\n          var flip = (this.__color.v < 0.5 || this.__color.s > 0.5) ? 255 : 0;\n          var _flip = 255 - flip;\n\n          common.extend(this.__field_knob.style, {\n            marginLeft: 100 * this.__color.s - 7 + 'px',\n            marginTop: 100 * (1 - this.__color.v) - 7 + 'px',\n            backgroundColor: this.__temp.toString(),\n            border: this.__field_knob_border + 'rgb(' + flip + ',' + flip + ',' + flip +')'\n          });\n\n          this.__hue_knob.style.marginTop = (1 - this.__color.h / 360) * 100 + 'px'\n\n          this.__temp.s = 1;\n          this.__temp.v = 1;\n\n          linearGradient(this.__saturation_field, 'left', '#fff', this.__temp.toString());\n\n          common.extend(this.__input.style, {\n            backgroundColor: this.__input.value = this.__color.toString(),\n            color: 'rgb(' + flip + ',' + flip + ',' + flip +')',\n            textShadow: this.__input_textShadow.map(function (d) {\n              return d + ' rgba(' + _flip + ',' + _flip + ',' + _flip +',0.7)';\n            }).join(', ')\n          });\n\n          this.__input.disabled = this.getReadonly();\n        }\n      }\n  );\n  \n  var vendors = ['-moz-','-o-','-webkit-','-ms-',''];\n  \n  function linearGradient(elem, x, a, b) {\n    elem.style.background = '';\n    common.each(vendors, function(vendor) {\n      elem.style.cssText += 'background: ' + vendor + 'linear-gradient('+x+', '+a+' 0%, ' + b + ' 100%); ';\n    });\n  }\n  \n  function hueGradient(elem) {\n    elem.style.background = '';\n    elem.style.cssText += 'background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);'\n    elem.style.cssText += 'background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);'\n    elem.style.cssText += 'background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);'\n    elem.style.cssText += 'background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);'\n    elem.style.cssText += 'background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);'\n  }\n\n  return ColorController;\n});\n\n\n",
    "/**\n * dat.GUI JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\ndefine('dat/utils/requestAnimationFrame',[\n], function() {\n  'use strict';\n\n  /**\n   * requirejs version of Paul Irish's RequestAnimationFrame\n   * http://paulirish.com/2011/requestanimationframe-for-smart-animating/\n   */\n\n  return window.requestAnimationFrame ||\n      window.webkitRequestAnimationFrame ||\n      window.mozRequestAnimationFrame ||\n      window.oRequestAnimationFrame ||\n      window.msRequestAnimationFrame ||\n      /* jshint unused: false */\n      function(callback, element) {\n        window.setTimeout(callback, 1000 / 60);\n      };\n});\n\n\n",
    "/**\n * dat.GUI JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\ndefine('dat/dom/CenteredDiv',[\n  'dat/dom/dom',\n  'dat/utils/common'\n], function(dom, common) {\n  'use strict';\n\n  var CenteredDiv = function() {\n    this.backgroundElement = document.createElement('div');\n    common.extend(this.backgroundElement.style, {\n      backgroundColor: 'rgba(0,0,0,0.8)',\n      top: 0,\n      left: 0,\n      display: 'none',\n      zIndex: '1000',\n      opacity: 0,\n      WebkitTransition: 'opacity 0.2s linear',\n      transition: 'opacity 0.2s linear'\n    });\n\n    dom.makeFullscreen(this.backgroundElement);\n    this.backgroundElement.style.position = 'fixed';\n\n    this.domElement = document.createElement('div');\n    common.extend(this.domElement.style, {\n      position: 'fixed',\n      display: 'none',\n      zIndex: '1001',\n      opacity: 0,\n      WebkitTransition: '-webkit-transform 0.2s ease-out, opacity 0.2s linear',\n      transition: 'transform 0.2s ease-out, opacity 0.2s linear'\n    });\n\n    document.body.appendChild(this.backgroundElement);\n    document.body.appendChild(this.domElement);\n\n    var _this = this;\n    dom.bind(this.backgroundElement, 'click', function() {\n      _this.hide();\n    });\n  };\n\n  CenteredDiv.prototype.show = function() {\n    var _this = this;\n\n    this.backgroundElement.style.display = 'block';\n\n    this.domElement.style.display = 'block';\n    this.domElement.style.opacity = 0;\n//    this.domElement.style.top = '52%';\n    this.domElement.style.webkitTransform = 'scale(1.1)';\n\n    this.layout();\n\n    common.defer(function() {\n      _this.backgroundElement.style.opacity = 1;\n      _this.domElement.style.opacity = 1;\n      _this.domElement.style.webkitTransform = 'scale(1)';\n    });\n  };\n\n  CenteredDiv.prototype.hide = function() {\n    var _this = this;\n\n    var hide = function() {\n      _this.domElement.style.display = 'none';\n      _this.backgroundElement.style.display = 'none';\n\n      dom.unbind(_this.domElement, 'webkitTransitionEnd', hide);\n      dom.unbind(_this.domElement, 'transitionend', hide);\n      dom.unbind(_this.domElement, 'oTransitionEnd', hide);\n    };\n\n    dom.bind(this.domElement, 'webkitTransitionEnd', hide);\n    dom.bind(this.domElement, 'transitionend', hide);\n    dom.bind(this.domElement, 'oTransitionEnd', hide);\n\n    this.backgroundElement.style.opacity = 0;\n//    this.domElement.style.top = '48%';\n    this.domElement.style.opacity = 0;\n    this.domElement.style.webkitTransform = 'scale(1.1)';\n  };\n\n  CenteredDiv.prototype.layout = function() {\n    this.domElement.style.left = (window.innerWidth / 2 - dom.getWidth(this.domElement) / 2) + 'px';\n    this.domElement.style.top = (window.innerHeight / 2 - dom.getHeight(this.domElement) / 2) + 'px';\n  };\n  \n  return CenteredDiv;\n});\n\n\n",
    "/**\n * dat.GUI JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\n\n//\n// OBSOLETE STUFF?\n//\n// old v0.4 code which needs to be integrated or otherwise thrown away\n//\n\n\n// var css = require('../utils/css');\n// var Controller = require('../controllers/Controller');\n// var BooleanController = require('../controllers/BooleanController');\n// var StringController = require('../controllers/StringController');\n// var FunctionController = require('../controllers/FunctionController');\n// var NumberControllerBox = require('../controllers/NumberControllerBox');\n// var NumberControllerSlider = require('../controllers/NumberControllerSlider');\n// var OptionController = require('../controllers/OptionController');\n// var ColorController = require('../controllers/ColorController');\n// var NullController = require('../controllers/NullController');\n// var UndefinedController = require('../controllers/UndefinedController');\n\n// var requestAnimationFrame = require('../utils/requestAnimationFrame');\n// var CenteredDiv = require('../dom/CenteredDiv');\n// var dom = require('../dom/dom');\n// var common = require('../utils/common');\n// var styleSheet = require('./style.css.js');\n// var saveDialogueContents = require('./saveDialogue.html.js');\n// var sniff = require('../controllers/sniff');\n\n\n//\n// EOF\n//\n      \n      \n      \ndefine('dat/gui/GUI',[\n  'dat/utils/css',\n\n  'text!dat/gui/saveDialogue.html',\n  'text!dat/gui/style.css',\n\n  'dat/controllers/factory',\n  'dat/controllers/Controller',\n  'dat/controllers/BooleanController',\n  'dat/controllers/FunctionController',\n  'dat/controllers/NumberController',\n  'dat/controllers/NumberControllerBox',\n  'dat/controllers/NumberControllerSlider',\n  'dat/controllers/OptionController',\n  'dat/controllers/StringController',\n  'dat/controllers/ImageController',\n  'dat/controllers/ColorController',\n\n  'dat/utils/requestAnimationFrame',\n\n  'dat/dom/CenteredDiv',\n  'dat/dom/dom',\n\n  'dat/utils/common'\n], function(css, saveDialogueContents, styleSheet, controllerFactory, Controller, BooleanController, FunctionController, NumberController, NumberControllerBox, NumberControllerSlider, OptionController, StringController, ImageController, ColorController, requestAnimationFrame, CenteredDiv, dom, common) {\n  'use strict';\n\n  //var ARR_EACH = Array.prototype.forEach;\n  var ARR_SLICE = Array.prototype.slice;\n\n  css.inject(styleSheet);\n\n  /** Outer-most className for GUI's */\n  var CSS_NAMESPACE = 'dg';\n\n  var HIDE_KEY_CODE = 72;\n\n  /** The only value shared between the JS and SCSS. Use caution. */\n  var CLOSE_BUTTON_HEIGHT = 20;\n\n  var DEFAULT_DEFAULT_PRESET_NAME = 'Default';\n\n  var SUPPORTS_LOCAL_STORAGE = (function() {\n    try {\n      return 'localStorage' in window && window.localStorage !== null;\n    } catch (e) {\n      return false;\n    }\n  })();\n\n  var SAVE_DIALOGUE;\n\n  /** Have we yet to create an autoPlace GUI? */\n  var auto_place_virgin = true;\n\n  /** Fixed position div that auto place GUI's go inside */\n  var auto_place_container;\n\n  /** Are we hiding the GUI's ? */\n  var hide = false;\n\n  /** GUI's which should be hidden */\n  var hideable_guis = [];\n\n  /**\n   * A lightweight controller library for JavaScript. It allows you to easily\n   * manipulate variables and fire functions on the fly.\n   * @class\n   *\n   * @member dat.GUI\n   *\n   * @param {Object} [params]\n   * @param {String} [params.name] The name of this GUI.\n   * @param {Object} [params.load] JSON object representing the saved state of\n   * this GUI.\n   * @param {Boolean} [params.auto=true]\n   * @param {dat.gui.GUI} [params.parent] The GUI I'm nested in.\n   * @param {Boolean} [params.closed] If true, starts closed\n   */\n  var GUI = function(params) {\n    var _this = this;\n\n    this.__typeControllers = {\n      color: ColorController,\n      option: OptionController,\n      numberSlider: NumberControllerSlider,\n      numberBox: NumberControllerBox,\n      number: NumberController,\n      string: StringController,\n      image: ImageController,\n      'function': FunctionController,\n      'boolean': BooleanController\n    };\n\n    /**\n     * Outermost DOM Element\n     * @type DOMElement\n     */\n    this.domElement = document.createElement('div');\n    this.__ul = document.createElement('ul');\n    this.domElement.appendChild(this.__ul);\n\n    dom.addClass(this.domElement, CSS_NAMESPACE);\n\n    /**\n     * Nested GUI's by name\n     * @ignore\n     */\n    this.__folders = {};\n\n    this.__controllers = [];\n\n    /**\n     * List of objects I'm remembering for save, only used in top level GUI\n     * @ignore\n     */\n    this.__rememberedObjects = [];\n\n    /**\n     * Maps the index of remembered objects to a map of controllers, only used\n     * in top level GUI.\n     *\n     * @private\n     * @ignore\n     *\n     * @example\n     * [\n     *  {\n     *    propertyName: Controller,\n     *    anotherPropertyName: Controller\n     *  },\n     *  {\n     *    propertyName: Controller\n     *  }\n     * ]\n     */\n    this.__rememberedObjectIndecesToControllers = [];\n\n    this.__listening = [];\n\n    params = params || {};\n\n    // Default parameters\n    params = common.defaults(params, {\n      autoPlace: true,\n      width: GUI.DEFAULT_WIDTH\n    });\n\n    params = common.defaults(params, {\n      resizable: params.autoPlace,\n      hideable: params.autoPlace\n    });\n\n\n    if (!common.isUndefined(params.load)) {\n      // Explicit preset\n      if (params.preset) {\n        params.load.preset = params.preset;\n      }\n    } else {\n      params.load = { preset: DEFAULT_DEFAULT_PRESET_NAME };\n    }\n\n    if (common.isUndefined(params.parent) && params.hideable) {\n      hideable_guis.push(this);\n    }\n\n    // Only root level GUI's are resizable.\n    params.resizable = common.isUndefined(params.parent) && params.resizable;\n\n    if (params.autoPlace && common.isUndefined(params.scrollable)) {\n      params.scrollable = true;\n    }\n//    params.scrollable = common.isUndefined(params.parent) && params.scrollable === true;\n\n    // // Not part of params because I don't want people passing this in via\n    // // constructor. Should be a 'remembered' value.\n    // var use_local_storage =\n    //     SUPPORTS_LOCAL_STORAGE &&\n    //         localStorage.getItem(getLocalStorageHash(this, 'isLocal')) === 'true';\n\n    var saveToLocalStorage;\n\n    Object.defineProperties(this,\n      /** @lends dat.gui.GUI.prototype */\n      {\n        /**\n         * The parent <code>GUI</code>\n         * @type dat.gui.GUI\n         */\n        parent: {\n          get: function() {\n            return params.parent;\n          }\n        },\n\n        scrollable: {\n          get: function() {\n            return params.scrollable;\n          }\n        },\n\n        /**\n         * Handles <code>GUI</code>'s element placement for you\n         * @type Boolean\n         */\n        autoPlace: {\n          get: function() {\n            return params.autoPlace;\n          }\n        },\n\n        /**\n         * The identifier for a set of saved values\n         * @type String\n         */\n        preset: {\n          get: function() {\n            if (_this.parent) {\n              return _this.getRoot().preset;\n            } else {\n              return params.load.preset;\n            }\n          },\n\n          set: function(v) {\n            if (_this.parent) {\n              _this.getRoot().preset = v;\n            } else {\n              params.load.preset = v;\n            }\n            setPresetSelectIndex(_this);\n            _this.revert();\n            return _this;\n          }\n        },\n\n        /**\n         * The width of <code>GUI</code> element\n         * @type Number\n         */\n        width: {\n          get: function() {\n            return params.width;\n          },\n          set: function(v) {\n            params.width = v;\n            setWidth(_this, v);\n            return _this;\n          }\n        },\n\n        /**\n         * The name of <code>GUI</code>. Used for folders. i.e\n         * a folder's name\n         * @type String\n         */\n        name: {\n          get: function() {\n            return params.name;\n          },\n          set: function(v) {\n            // TODO Check for collisions among sibling folders\n            params.name = v;\n            if (title_row_name) {\n              title_row_name.innerHTML = params.name;\n            }\n            return _this;\n          }\n        },\n\n        /**\n         * Whether the <code>GUI</code> is collapsed or not\n         * @type Boolean\n         */\n        closed: {\n          get: function() {\n            return params.closed;\n          },\n          set: function(v) {\n            params.closed = v;\n            if (params.closed) {\n              dom.addClass(_this.__ul, GUI.CLASS_CLOSED);\n            } else {\n              dom.removeClass(_this.__ul, GUI.CLASS_CLOSED);\n            }\n            // For browsers that aren't going to respect the CSS transition,\n            // Let's just check our height against the window height right off\n            // the bat.\n            _this.onResize();\n\n            if (_this.__closeButton) {\n              _this.__closeButton.innerHTML = v ? GUI.TEXT_OPEN : GUI.TEXT_CLOSED;\n            }\n            return _this;\n          }\n        },\n\n        /**\n         * Contains all presets\n         * @type Object\n         */\n        load: {\n          get: function() {\n            return params.load;\n          }\n        },\n\n        /**\n         * Determines whether or not to use <a href=\"https://developer.mozilla.org/en/DOM/Storage#localStorage\">localStorage</a> as the means for\n         * <code>remember</code>ing\n         * @type Boolean\n         */\n        useLocalStorage: {\n          // Return:\n          // - FALSE when localStorage has been *explicitly disabled* (by executing `this.useLocalStorage = false;` some time before)\n          // - NULL when localStorage is not available\n          // - TRUE when localStorage is available and has been enabled (localStorage is enabled by default)\n          get: function() {\n            if (!SUPPORTS_LOCAL_STORAGE) {\n              return null;\n            }\n            var rv = localStorage.getItem(getLocalStorageHash(_this, 'isLocal'));\n            if (rv === '0') {\n              return true;      // **default behaviour**: when the browser supports localStorage, it is available for dat.GUI data storage\n            } else {\n              return rv === 'true';\n            }\n          },\n          // @param {bool}:\n          // - truthy value: explicitly enables localStorage (when the browser supports it)\n          // \n          // - falsey value (except `null` or `undefined`): explicitly *disables* localStorage automatic data\n          //   storage for `dat.GUI`.\n          //   \n          // - `null` or `undefined`: *clear* the explicit configuration: localStorage use is determined\n          //   solely by the available browser support from this point forward. \n          //   \n          //   (You can use this `bool` value to clear previous explicit dat.GUI configuration \n          //   and data storage and revert to using the coded default(s) once again.)\n          set: function(bool) {\n            dom.unbind(window, 'unload', saveToLocalStorage);\n            if (SUPPORTS_LOCAL_STORAGE) {\n              dom.bind(window, 'unload', saveToLocalStorage);\n              if (bool == null) {\n                bool = 0;\n              } else {\n                bool = !!bool;              // coerce any input type to boolean\n              }\n              localStorage.setItem(getLocalStorageHash(_this, 'isLocal'), bool);\n            }\n            return _this;\n          }\n        }\n      });\n\n    // Are we a root level GUI?\n    if (common.isUndefined(params.parent)) {\n      params.closed = false;\n\n      dom.addClass(this.domElement, GUI.CLASS_MAIN);\n      dom.makeSelectable(this.domElement, false);\n\n      // Are we supposed to be loading locally?\n      if (SUPPORTS_LOCAL_STORAGE) {\n        var rv = this.useLocalStorage;\n        if (rv !== null) {\n        this.useLocalStorage = true;\n\n        var saved_gui = localStorage.getItem(getLocalStorageHash(this, 'gui'));\n\n        if (saved_gui) {\n          params.load = JSON.parse(saved_gui);\n        }\n        }\n      }\n\n      this.__closeButton = document.createElement('div');\n      this.__closeButton.innerHTML = GUI.TEXT_CLOSED;\n      dom.addClass(this.__closeButton, GUI.CLASS_CLOSE_BUTTON);\n      this.domElement.appendChild(this.__closeButton);\n\n      dom.bind(this.__closeButton, 'click', function() {\n        _this.closed = !_this.closed;\n      });\n\n      // Oh, you're a nested GUI!\n    } else {\n      if (params.closed === undefined) {\n        params.closed = true;\n      }\n\n      var title_row_name = document.createTextNode(params.name);\n      dom.addClass(title_row_name, 'controller-name');\n\n      var title_row = addRow(this, title_row_name);\n\n      var on_click_title = function(e) {\n        e.preventDefault();\n        _this.closed = !_this.closed;\n        return false;\n      };\n\n      dom.addClass(this.__ul, GUI.CLASS_CLOSED);\n\n      dom.addClass(title_row, 'title');\n      dom.bind(title_row, 'click', on_click_title);\n\n      if (!params.closed) {\n        this.closed = false;\n      }\n    }\n\n    if (params.autoPlace) {\n      if (common.isUndefined(params.parent)) {\n        if (auto_place_virgin) {\n          auto_place_container = document.createElement('div');\n          dom.addClass(auto_place_container, CSS_NAMESPACE);\n          dom.addClass(auto_place_container, GUI.CLASS_AUTO_PLACE_CONTAINER);\n          document.body.appendChild(auto_place_container);\n          auto_place_virgin = false;\n        }\n\n        // Put it in the dom for you.\n        auto_place_container.appendChild(this.domElement);\n\n        // Apply the auto styles\n        dom.addClass(this.domElement, GUI.CLASS_AUTO_PLACE);\n      }\n\n      // Make it not elastic.\n      if (!this.parent) {\n        setWidth(this, params.width);\n      }\n    }\n\n    function onResizeHandler() { \n      _this.onResize(); \n    }\n\n    dom.bind(window, 'resize', onResizeHandler);\n    dom.bind(this.__ul, 'webkitTransitionEnd', onResizeHandler);\n    dom.bind(this.__ul, 'transitionend', onResizeHandler);\n    dom.bind(this.__ul, 'oTransitionEnd', onResizeHandler);\n    onResizeHandler();\n\n    if (params.resizable) {\n      addResizeHandle(this);\n    }\n\n    saveToLocalStorage = function () {\n      // only save the dat.GUI data when localStorage is available *and* has been enabled \n      // (which it is by default; see `.useLocalStorage` get/set)\n      if (_this.useLocalStorage) {\n        localStorage.setItem(getLocalStorageHash(_this, 'gui'), JSON.stringify(_this.getSaveObject()));\n      }\n    };\n\n    // expose this method publicly\n    this.saveToLocalStorageIfPossible = function () {\n      saveToLocalStorage();\n      return _this;\n    };\n\n    function resetWidth() {\n      var root = _this.getRoot();\n      root.width += 1;\n      common.defer(function() {\n        root.width -= 1;\n      });\n    }\n\n    if (!params.parent) {\n      resetWidth();\n    }\n  };\n\n  GUI.toggleHide = function() {\n    hide = !hide;\n    common.each(hideable_guis, function(gui) {\n      gui.domElement.style.zIndex = hide ? -999 : 999;\n      gui.domElement.style.opacity = hide ? 0 : 1;\n    });\n  };\n\n  GUI.CLASS_AUTO_PLACE = 'a';\n  GUI.CLASS_AUTO_PLACE_CONTAINER = 'ac';\n  GUI.CLASS_MAIN = 'main';\n  GUI.CLASS_CONTROLLER_ROW = 'cr';\n  GUI.CLASS_TOO_TALL = 'taller-than-window';\n  GUI.CLASS_CLOSED = 'closed';\n  GUI.CLASS_CLOSE_BUTTON = 'close-button';\n  GUI.CLASS_DRAG = 'drag';\n\n  GUI.DEFAULT_WIDTH = 245;\n  GUI.TEXT_CLOSED = 'Close Controls';\n  GUI.TEXT_OPEN = 'Open Controls';\n\n  dom.bind(window, 'keydown', function(e) {\n    if (document.activeElement.type !== 'text' &&\n        (e.which === HIDE_KEY_CODE || e.keyCode === HIDE_KEY_CODE)) {\n      GUI.toggleHide();\n    }\n  }, false);\n\n  common.extend(\n    GUI.prototype,\n\n    /** @lends dat.gui.GUI */\n    {\n      /**\n       * @param controllerName\n       * @param controllerTemplate the template controller object which will be used for \n       */\n      defineController: function(controllerName, controllerTemplate) {\n        this.__typeControllers[controllerName] = controllerTemplate;\n      },\n\n      /**\n       * @param controllerName\n       * @returns {dat.controllers.Controller} The controller registered for the given `controllerName`. \n       * Return boolean FALSE when no controller has been registered for the given name.\n       */\n      findController: function(controllerName) {\n        return this.__typeControllers[controllerName] || false;\n      },\n\n      /**\n       * @param object\n       * @param property\n       * @returns {dat.controllers.Controller} The new controller that was added.\n       * @instance\n       */\n      add: function(object, property /* ...args */) {\n        return add(\n            this,\n            object,\n            property,\n            {\n              factoryArgs: ARR_SLICE.call(arguments, 2)\n            }\n        );\n      },\n\n      /**\n       * @param object\n       * @param property\n       * @returns {dat.controllers.ColorController} The new controller that was added.\n       * @instance\n       */\n      addColor: function(object, property) {\n        return add(\n            this,\n            object,\n            property,\n            {\n              controller: 'color'\n            }\n        );\n      },\n\n      /**\n       * @param object\n       * @param property\n       * @returns {dat.controllers.Controller} The new controller that was added.\n       * @instance\n       */\n      addAs: function(object, property, controller /* ...args */) {\n        return add(\n            this,\n            object,\n            property,\n            {\n              controller: controller,\n              factoryArgs: ARR_SLICE.call(arguments, 3)\n            }\n        );\n      },\n\n      /**\n       * @param controller\n       * @instance\n       */\n      remove: function(controller) {\n        // TODO listening?\n        this.__ul.removeChild(controller.__li);\n        this.__controllers.splice(this.__controllers.indexOf(controller), 1);\n        var _this = this;\n        common.defer(function() {\n          _this.onResize();\n        });\n        return this;\n      },\n\n      destroy: function() {\n        if (this.autoPlace) {\n          auto_place_container.removeChild(this.domElement);\n        }\n      },\n\n      /**\n       * @param name\n       * @returns {dat.gui.GUI} The new folder.\n       * @throws {Error} if this GUI already has a folder by the specified\n       * name\n       * @instance\n       */\n      addFolder: function(name) {\n        // We have to prevent collisions on names in order to have a key\n        // by which to remember saved values\n        if (this.__folders[name] !== undefined) {\n          throw new Error('You already have a folder in this GUI by the' +\n              ' name \"' + name + '\"');\n        }\n\n        var new_gui_params = { name: name, parent: this };\n\n        // We need to pass down the autoPlace trait so that we can\n        // attach event listeners to open/close folder actions to\n        // ensure that a scrollbar appears if the window is too short.\n        new_gui_params.autoPlace = this.autoPlace;\n\n        // Do we have saved appearance data for this folder?\n\n        if (this.load && // Anything loaded?\n            this.load.folders && // Was my parent a dead-end?\n            this.load.folders[name]) { // Did daddy remember me?\n\n          // Start me closed if I was closed\n          new_gui_params.closed = this.load.folders[name].closed;\n\n          // Pass down the loaded data\n          new_gui_params.load = this.load.folders[name];\n        }\n\n        var gui = new GUI(new_gui_params);\n        this.__folders[name] = gui;\n\n        var li = addRow(this, gui.domElement);\n        dom.addClass(li, 'folder');\n        return gui;\n      },\n\n      open: function() {\n        this.closed = false;\n        return this;\n      },\n\n      close: function() {\n        this.closed = true;\n        return this;\n      },\n\n      onResize: function() {\n        var root = this.getRoot();\n\n        if (root.scrollable) {\n          var top = dom.getOffset(root.__ul).top;\n          var h = 0;\n\n          common.each(root.__ul.childNodes, function(node) {\n            if (! (root.autoPlace && node === root.__save_row)) {\n              h += dom.getHeight(node);\n            }\n          });\n\n          if (window.innerHeight - top - CLOSE_BUTTON_HEIGHT < h) {\n            dom.addClass(root.domElement, GUI.CLASS_TOO_TALL);\n            root.__ul.style.height = window.innerHeight - top - CLOSE_BUTTON_HEIGHT + 'px';\n          } else {\n            dom.removeClass(root.domElement, GUI.CLASS_TOO_TALL);\n            root.__ul.style.height = 'auto';\n          }\n        }\n\n        if (root.__resize_handle) {\n          common.defer(function() {\n            root.__resize_handle.style.height = root.__ul.offsetHeight + 'px';\n          });\n        }\n\n        if (root.__closeButton) {\n          root.__closeButton.style.width = root.width + 'px';\n        }\n      },\n\n      /**\n       * Mark objects for saving. The order of these objects cannot change as\n       * the GUI grows. When remembering new objects, append them to the end\n       * of the list.\n       *\n       * @param {Object...} objects\n       * @throws {Error} if not called on a top level GUI.\n       * @instance\n       */\n      remember: function(/*...args*/) {\n        if (common.isUndefined(SAVE_DIALOGUE)) {\n          SAVE_DIALOGUE = new CenteredDiv();\n          SAVE_DIALOGUE.domElement.innerHTML = saveDialogueContents;\n        }\n\n        if (this.parent) {\n          throw new Error('You can only call remember on a top level GUI.');\n        }\n\n        var _this = this;\n\n        common.each(ARR_SLICE.call(arguments), function(object) {\n          if (_this.__rememberedObjects.length === 0) {\n            addSaveMenu(_this);\n          }\n          if (_this.__rememberedObjects.indexOf(object) === -1) {\n            _this.__rememberedObjects.push(object);\n          }\n        });\n\n        if (this.autoPlace) {\n          // Set save row width\n          setWidth(this, this.width);\n        }\n        return this;\n      },\n\n      /**\n       * @returns {dat.gui.GUI} the topmost parent GUI of a nested GUI.\n       * @instance\n       */\n      getRoot: function() {\n        var gui = this;\n        while (gui.parent) {\n          gui = gui.parent;\n        }\n        return gui;\n      },\n\n      /**\n       * @returns {Object} a JSON object representing the current state of\n       * this GUI as well as its remembered properties.\n       * @instance\n       */\n      getSaveObject: function() {\n        var toReturn = this.load;\n\n        toReturn.closed = this.closed;\n\n        // Am I remembering any values?\n        if (this.__rememberedObjects.length > 0) {\n          toReturn.preset = this.preset;\n\n          if (!toReturn.remembered) {\n            toReturn.remembered = {};\n          }\n\n          toReturn.remembered[this.preset] = getCurrentPreset(this);\n        }\n\n        toReturn.folders = {};\n        common.each(this.__folders, function(element, key) {\n          toReturn.folders[key] = element.getSaveObject();\n        });\n\n        return toReturn;\n      },\n\n      save: function() {\n        if (!this.load.remembered) {\n          this.load.remembered = {};\n        }\n\n        this.load.remembered[this.preset] = getCurrentPreset(this);\n        markPresetModified(this, false);\n        this.saveToLocalStorageIfPossible();\n        return this;\n      },\n\n      saveAs: function(presetName) {\n        if (!this.load.remembered) {\n          // Retain default values upon first save\n          this.load.remembered = {};\n          this.load.remembered[DEFAULT_DEFAULT_PRESET_NAME] = getCurrentPreset(this, true);\n        }\n\n        this.load.remembered[presetName] = getCurrentPreset(this);\n        this.preset = presetName;\n        addPresetOption(this, presetName, true);\n        this.saveToLocalStorageIfPossible();\n        return this;\n      },\n\n      revert: function(gui) {\n        common.each(this.__controllers, function(controller) {\n          // Make revert work on Default.\n          if (!this.getRoot().load.remembered) {\n            controller.setValue(controller.initialValue);\n          } else {\n            recallSavedValue(gui || this.getRoot(), controller);\n          }\n        }, this);\n\n        common.each(this.__folders, function(folder) {\n          folder.revert(folder);\n        });\n\n        if (!gui) {\n          markPresetModified(this.getRoot(), false);\n        }\n        return this;\n      },\n\n      listen: function(controller) {\n        var init = this.__listening.length === 0;\n        this.__listening.push(controller);\n        if (init) {\n          updateDisplays(this.__listening);\n        }\n        return this;\n      }\n    }\n  );\n\n  function add(gui, object, property, params) {\n    var factoryArgs = [object, property, params.controller, gui.__typeControllers].concat(params.factoryArgs);\n    var controller = controllerFactory.apply(gui, factoryArgs);\n\n    if (!controller) {\n      if (object[property] === undefined) {\n        throw new Error('Object ' + object + ' has no property \"' + property + '\"');\n      } else {\n        throw new Error('Object ' + object + ' has a (probably null-ed) property \"' + property + '\" for which you did not explicitly specify a suitable controller');\n      }\n    }\n\n    if (params.before instanceof Controller) {\n      params.before = params.before.__li;\n    }\n\n    recallSavedValue(gui, controller);\n\n    dom.addClass(controller.domElement, 'c');\n\n    var name = document.createElement('span');\n    dom.addClass(name, 'property-name');\n    name.innerHTML = controller.property;\n\n    var container = document.createElement('div');\n    container.appendChild(name);\n    container.appendChild(controller.domElement);\n\n    var li = addRow(gui, container, params.before);\n\n    dom.addClass(li, GUI.CLASS_CONTROLLER_ROW);\n    dom.addClass(li, typeof controller.getValue());\n\n    augmentController(gui, li, controller);\n\n    gui.__controllers.push(controller);\n\n    return controller;\n  }\n\n  /**\n   * Add a row to the end of the GUI or before another row.\n   *\n   * @param gui\n   * @param [dom] If specified, inserts the dom content in the new row\n   * @param [liBefore] If specified, places the new row before another row\n   */\n  function addRow(gui, dom, liBefore) {\n    var li = document.createElement('li');\n    if (dom) {\n      li.appendChild(dom);\n    }\n    if (liBefore) {\n      gui.__ul.insertBefore(li, liBefore);\n    } else {\n      gui.__ul.appendChild(li);\n    }\n    gui.onResize();\n    return li;\n  }\n\n  function augmentController(gui, li, controller) {\n    controller.__li = li;\n    controller.__gui = gui;\n\n    common.extend(controller, {\n      options: function(options) {\n        var next_sibling;\n\n        if (arguments.length > 1) {\n          next_sibling = controller.__li.nextElementSibling;\n          controller.remove();\n\n          return add(\n              gui,\n              controller.object,\n              controller.property,\n              {\n                before: next_sibling,\n                factoryArgs: [common.toArray(arguments)]\n              }\n          );\n        }\n\n        if (common.isArray(options) || common.isObject(options)) {\n          next_sibling = controller.__li.nextElementSibling;\n          controller.remove();\n\n          return add(\n              gui,\n              controller.object,\n              controller.property,\n              {\n                before: next_sibling,\n                factoryArgs: [options]\n              }\n          );\n        }           \n      },\n\n      name: function(v) {\n        controller.__li.firstElementChild.firstElementChild.innerHTML = v;\n        return controller;\n      },\n\n      listen: function() {\n        controller.__gui.listen(controller);\n        return controller;\n      },\n\n      remove: function() {\n        controller.__gui.remove(controller);\n        return controller;\n      }\n    });\n\n    // All sliders should be accompanied by a box.\n    if (controller instanceof NumberControllerSlider) {\n      var box = new NumberControllerBox(controller.object, controller.property,\n          { min: controller.__min, max: controller.__max, step: controller.__step });\n\n      common.each(['updateDisplay', 'onChange', 'onFinishChange'], function(method) {\n        var pc = controller[method];\n        var pb = box[method];\n        controller[method] = box[method] = function() {\n          var args = ARR_SLICE.call(arguments);\n          pc.apply(controller, args);\n          return pb.apply(box, args);\n        }\n      });\n\n      dom.addClass(li, 'has-slider');\n      controller.domElement.insertBefore(box.domElement, controller.domElement.firstElementChild);\n    }\n    else if (controller instanceof NumberControllerBox) {\n      var r = function(returned) {\n        // Have we defined both boundaries?\n        if (common.isNumber(controller.__min) && common.isNumber(controller.__max)) {\n          // Well, then let's just replace this with a slider.\n          controller.remove();\n          return add(\n              gui,\n              controller.object,\n              controller.property,\n              {\n                before: controller.__li.nextElementSibling,\n                factoryArgs: [controller.__min, controller.__max, controller.__step]\n              });\n        }\n\n        return returned;\n      };\n\n      controller.min = common.compose(r, controller.min);\n      controller.max = common.compose(r, controller.max);\n    }\n    else if (controller instanceof BooleanController) {\n      dom.bind(li, 'click', function() {\n        dom.fakeEvent(controller.__checkbox, 'click');\n      });\n\n      dom.bind(controller.__checkbox, 'click', function(e) {\n        e.stopPropagation(); // Prevents double-toggle\n      })\n    }\n    else if (controller instanceof FunctionController) {\n      dom.bind(li, 'click', function() {\n        dom.fakeEvent(controller.__button, 'click');\n      });\n\n      dom.bind(li, 'mouseover', function() {\n        dom.addClass(controller.__button, 'hover');\n      });\n\n      dom.bind(li, 'mouseout', function() {\n        dom.removeClass(controller.__button, 'hover');\n      });\n    }\n    else if (controller instanceof ColorController) {\n      dom.addClass(li, 'color');\n      controller.updateDisplay = common.compose(function(r) {\n        li.style.borderLeftColor = controller.__color.toString();\n        return r;\n      }, controller.updateDisplay);\n\n      controller.updateDisplay();\n    }\n\n    controller.setValue = common.compose(function(r) {\n      if (gui.getRoot().__preset_select && controller.isModified()) {\n        markPresetModified(gui.getRoot(), true);\n      }\n      return r;\n    }, controller.setValue);\n  }\n\n  function recallSavedValue(gui, controller) {\n    // Find the topmost GUI, that's where remembered objects live.\n    var root = gui.getRoot();\n\n    // Does the object we're controlling match anything we've been told to\n    // remember?\n    var matched_index = root.__rememberedObjects.indexOf(controller.object);\n\n    // Why yes, it does!\n    if (matched_index !== -1) {\n      // Let me fetch a map of controllers for this object.\n      var controller_map =\n          root.__rememberedObjectIndecesToControllers[matched_index];\n\n      // I believe this is the first controller we've created for this\n      // object. Let's make a fresh map.\n      if (controller_map === undefined) {\n        controller_map = {};\n        root.__rememberedObjectIndecesToControllers[matched_index] = controller_map;\n      }\n\n      // Keep track of this controller\n      controller_map[controller.property] = controller;\n\n      // Okay, now have we saved any values for this controller?\n      if (root.load && root.load.remembered) {\n        var preset_map = root.load.remembered;\n\n        // Which preset are we trying to load?\n        var preset;\n\n        if (preset_map[gui.preset]) {\n          preset = preset_map[gui.preset];\n        } else if (preset_map[DEFAULT_DEFAULT_PRESET_NAME]) {\n          // Uhh, you can have the default instead?\n          preset = preset_map[DEFAULT_DEFAULT_PRESET_NAME];\n        } else {\n          // Nada.\n\n          return;\n        }\n\n        // Did the loaded object remember this object?\n        if (preset[matched_index] &&\n            // Did we remember this particular property?\n            preset[matched_index][controller.property] !== undefined) {\n          // We did remember something for this guy ...\n          var value = preset[matched_index][controller.property];\n\n          // And that's what it is.\n          controller.initialValue = value;\n          controller.setValue(value);\n        }\n      }\n    }\n  }\n\n  function getLocalStorageHash(gui, key) {\n    // TODO how does this deal with multiple GUI's?\n    return document.location.href + '.' + key;\n  }\n\n  function addSaveMenu(gui) {\n    var div = gui.__save_row = document.createElement('li');\n\n    dom.addClass(gui.domElement, 'has-save');\n\n    gui.__ul.insertBefore(div, gui.__ul.firstChild);\n\n    dom.addClass(div, 'save-row');\n\n    var gears = document.createElement('span');\n    gears.innerHTML = '&nbsp;';\n    dom.addClass(gears, 'button gears');\n\n    // TODO replace with FunctionController\n    var button = document.createElement('span');\n    button.innerHTML = 'Save';\n    dom.addClass(button, 'button');\n    dom.addClass(button, 'save');\n\n    var button2 = document.createElement('span');\n    button2.innerHTML = 'New';\n    dom.addClass(button2, 'button');\n    dom.addClass(button2, 'save-as');\n\n    var button3 = document.createElement('span');\n    button3.innerHTML = 'Revert';\n    dom.addClass(button3, 'button');\n    dom.addClass(button3, 'revert');\n\n    var select = gui.__preset_select = document.createElement('select');\n\n    if (gui.load && gui.load.remembered) {\n      common.each(gui.load.remembered, function(value, key) {\n        addPresetOption(gui, key, key === gui.preset);\n      });\n    } else {\n      addPresetOption(gui, DEFAULT_DEFAULT_PRESET_NAME, false);\n    }\n\n    dom.bind(select, 'change', function() {\n      for (var index = 0; index < gui.__preset_select.length; index++) {\n        gui.__preset_select[index].innerHTML = gui.__preset_select[index].value;\n      }\n\n      gui.preset = this.value;\n    });\n\n    div.appendChild(select);\n    div.appendChild(gears);\n    div.appendChild(button);\n    div.appendChild(button2);\n    div.appendChild(button3);\n\n    function showHideExplain() {\n      explain.style.display = gui.useLocalStorage ? 'block' : 'none';\n    }\n\n    if (SUPPORTS_LOCAL_STORAGE) {\n      var saveLocally = document.getElementById('dg-save-locally');\n      var explain = document.getElementById('dg-local-explain');\n\n      saveLocally.style.display = 'block';\n\n      var localStorageCheckBox = document.getElementById('dg-local-storage');\n\n      if (localStorage.getItem(getLocalStorageHash(gui, 'isLocal')) === 'true') {\n        localStorageCheckBox.setAttribute('checked', 'checked');\n      }\n\n      showHideExplain();\n\n      // TODO: Use a boolean controller, fool!\n      dom.bind(localStorageCheckBox, 'change', function() {\n        gui.useLocalStorage = !gui.useLocalStorage;\n        showHideExplain();\n      });\n    }\n\n    var newConstructorTextArea = document.getElementById('dg-new-constructor');\n\n    dom.bind(newConstructorTextArea, 'keydown', function(e) {\n      if (e.metaKey && (e.which === 67 || e.keyCode === 67)) {\n        SAVE_DIALOGUE.hide();\n      }\n    });\n\n    dom.bind(gears, 'click', function() {\n      newConstructorTextArea.innerHTML = JSON.stringify(gui.getSaveObject(), undefined, 2);\n      SAVE_DIALOGUE.show();\n      newConstructorTextArea.focus();\n      newConstructorTextArea.select();\n    });\n\n    dom.bind(button, 'click', function() {\n      gui.save();\n    });\n\n    dom.bind(button2, 'click', function() {\n      var presetName = prompt('Enter a new preset name.');\n      if (presetName) {\n        gui.saveAs(presetName);\n      }\n    });\n\n    dom.bind(button3, 'click', function() {\n      gui.revert();\n    });\n  }\n\n  function addResizeHandle(gui) {\n    gui.__resize_handle = document.createElement('div');\n\n    common.extend(gui.__resize_handle.style, {\n      width: '6px',\n      marginLeft: '-3px',\n      height: '200px',\n      cursor: 'ew-resize',\n      position: 'absolute'\n//      border: '1px solid blue'\n    });\n\n    var pmouseX;\n\n    dom.bind(gui.__resize_handle, 'mousedown', dragStart);\n    dom.bind(gui.__closeButton, 'mousedown', dragStart);\n\n    gui.domElement.insertBefore(gui.__resize_handle, gui.domElement.firstElementChild);\n\n    function dragStart(e) {\n      e.preventDefault();\n\n      pmouseX = e.clientX;\n\n      dom.addClass(gui.__closeButton, GUI.CLASS_DRAG);\n      dom.bind(window, 'mousemove', drag);\n      dom.bind(window, 'mouseup', dragStop);\n\n      return false;\n    }\n\n    function drag(e) {\n      e.preventDefault();\n\n      gui.width += pmouseX - e.clientX;\n      gui.onResize();\n      pmouseX = e.clientX;\n\n      return false;\n    }\n\n    function dragStop() {\n      dom.removeClass(gui.__closeButton, GUI.CLASS_DRAG);\n      dom.unbind(window, 'mousemove', drag);\n      dom.unbind(window, 'mouseup', dragStop);\n    }\n  }\n\n  function setWidth(gui, w) {\n    gui.domElement.style.width = w + 'px';\n    // Auto placed save-rows are position fixed, so we have to\n    // set the width manually if we want it to bleed to the edge\n    if (gui.__save_row && gui.autoPlace) {\n      gui.__save_row.style.width = w + 'px';\n    }\n    if (gui.__closeButton) {\n      gui.__closeButton.style.width = w + 'px';\n    }\n  }\n\n  function getCurrentPreset(gui, useInitialValues) {\n    var toReturn = {};\n\n    // For each object I'm remembering\n    common.each(gui.__rememberedObjects, function(val, index) {\n      var saved_values = {};\n\n      // The controllers I've made for this object by property\n      var controller_map =\n          gui.__rememberedObjectIndecesToControllers[index];\n\n      // Remember each value for each property\n      common.each(controller_map, function(controller, property) {\n        saved_values[property] = useInitialValues ? controller.initialValue : controller.getValue();\n      });\n\n      // Save the values for this object\n      toReturn[index] = saved_values;\n    });\n\n    return toReturn;\n  }\n\n  function addPresetOption(gui, name, setSelected) {\n    var opt = document.createElement('option');\n    opt.innerHTML = name;\n    opt.value = name;\n    gui.__preset_select.appendChild(opt);\n    if (setSelected) {\n      gui.__preset_select.selectedIndex = gui.__preset_select.length - 1;\n    }\n  }\n\n  function setPresetSelectIndex(gui) {\n    for (var index = 0; index < gui.__preset_select.length; index++) {\n      if (gui.__preset_select[index].value === gui.preset) {\n        gui.__preset_select.selectedIndex = index;\n      }\n    }\n  }\n\n  function markPresetModified(gui, modified) {\n    var opt = gui.__preset_select[gui.__preset_select.selectedIndex];\n//    console.log('mark', modified, opt);\n    if (modified) {\n      opt.innerHTML = opt.value + '*';\n    } else {\n      opt.innerHTML = opt.value;\n    }\n  }\n\n  function updateDisplays(controllerArray) {\n    if (controllerArray.length !== 0) {\n      requestAnimationFrame(function() {\n        updateDisplays(controllerArray);\n      });\n    }\n\n    common.each(controllerArray, function(c) {\n      c.updateDisplay();\n    });\n  }\n\n  return GUI;\n});\n\n\n",
    "//\n// OBSOLETE STUFF?\n//\n// old v0.4 code which needs to be integrated or otherwise thrown away\n//\n\n\ndefine('dat.GUI',[\n  'dat/gui/GUI',\n\n  'dat/controllers/Controller',\n  'dat/controllers/StringController',\n  'dat/controllers/BooleanController',\n  'dat/controllers/FunctionController',\n  'dat/controllers/NumberControllerBox',\n  'dat/controllers/NumberController',\n  'dat/controllers/NumberControllerSlider',\n  'dat/controllers/OptionController',\n  'dat/controllers/ColorController',\n  'dat/controllers/ImageController',\n  'dat/controllers/factory',\n\n  'dat/dom/CenteredDiv',\n  'dat/dom/dom',\n\n  'dat/color/math',\n  'dat/color/interpret',\n  'dat/color/Color',\n  'dat/color/toString',\n\n  'dat/utils/css',\n  'dat/utils/common',\n  'dat/utils/requestAnimationFrame',\n], function(\n  dat_gui_GUI,\n\n  dat_controllers_Controller,\n  dat_controllers_StringController,\n  dat_controllers_BooleanController,\n  dat_controllers_FunctionController,\n  dat_controllers_NumberControllerBox,\n  dat_controllers_NumberController,\n  dat_controllers_NumberControllerSlider,\n  dat_controllers_OptionController,\n  dat_controllers_ColorController,\n  dat_controllers_ImageController,\n  dat_controllers_factory,\n\n  dat_dom_CenteredDiv,\n  dat_dom_dom,\n\n  dat_color_math,\n  dat_color_interpret,\n  dat_color_Color,\n  dat_color_toString,\n\n  dat_utils_css,\n  dat_utils_common,\n  dat_utils_requestAnimationFrame\n) {\n  'use strict';\n\n  var dat = {\n      utils: {\n          css: dat_utils_css,\n          common: dat_utils_common,\n          requestAnimationFrame: dat_utils_requestAnimationFrame,\n      },\n      controller: {\n          Controller: dat_controllers_Controller,\n          OptionController: dat_controllers_OptionController,\n          NumberController: dat_controllers_NumberController,\n          NumberControllerBox: dat_controllers_NumberControllerBox,\n          NumberControllerSlider: dat_controllers_NumberControllerSlider,\n          StringController: dat_controllers_StringController,\n          FunctionController: dat_controllers_FunctionController,\n          BooleanController: dat_controllers_BooleanController,\n          ImageController: dat_controllers_ImageController,\n          ColorController: dat_controllers_ColorController,\n          factory: dat_controllers_factory,\n      },\n      dom: {\n          dom: dat_dom_dom,\n          CenteredDiv: dat_dom_CenteredDiv,\n      },\n      color: {\n          toString: dat_color_toString,\n          interpret: dat_color_interpret,\n          math: dat_color_math,\n          Color: dat_color_Color,\n      },\n      gui: {\n          GUI: dat_gui_GUI\n      }\n  };\n\n  return dat;\n});\n\n\n"
  ]
}