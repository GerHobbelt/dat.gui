{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 42cae1a29f16216ae46b","webpack:///../index.js","webpack:///./dat/index.js"],"names":["module","exports","inject","CSS_NAMESPACE","HIDE_KEY_CODE","CLOSE_BUTTON_HEIGHT","DEFAULT_DEFAULT_PRESET_NAME","SUPPORTS_LOCAL_STORAGE","window","localStorage","e","SAVE_DIALOGUE","autoPlaceVirgin","autoPlaceContainer","hide","hideableGuis","GUI","pars","_this","params","domElement","document","createElement","__ul","appendChild","addClass","__folders","__controllers","__rememberedObjects","__rememberedObjectIndecesToControllers","__listening","defaults","autoPlace","width","DEFAULT_WIDTH","resizable","hideable","isUndefined","load","preset","parent","push","scrollable","useLocalStorage","getItem","getLocalStorageHash","saveToLocalStorage","Object","defineProperties","get","getRoot","set","v","setPresetSelectIndex","revert","setWidth","name","titleRowName","innerHTML","closed","CLASS_CLOSED","removeClass","onResize","__closeButton","TEXT_OPEN","TEXT_CLOSED","bool","bind","unbind","setItem","CLASS_MAIN","makeSelectable","savedGui","JSON","parse","CLASS_CLOSE_BUTTON","undefined","createTextNode","titleRow","addRow","onClickTitle","preventDefault","CLASS_AUTO_PLACE_CONTAINER","body","CLASS_AUTO_PLACE","__resizeHandler","addResizeHandle","stringify","getSaveObject","saveToLocalStorageIfPossible","resetWidth","root","defer","toggleHide","each","gui","style","display","CLASS_CONTROLLER_ROW","CLASS_TOO_TALL","CLASS_DRAG","_keydownHandler","activeElement","type","which","keyCode","extend","prototype","add","object","property","factoryArgs","Array","slice","call","arguments","addColor","color","remove","controller","removeChild","__li","splice","indexOf","destroy","addFolder","Error","newGuiParams","folders","li","removeFolder","folder","parentElement","open","close","debounce","top","getOffset","h","childNodes","node","__save_row","getHeight","innerHeight","height","__resize_handle","offsetHeight","remember","length","addSaveMenu","toReturn","remembered","getCurrentPreset","element","key","save","markPresetModified","saveAs","presetName","addPresetOption","setValue","initialValue","recallSavedValue","__onFinishChange","getValue","listen","init","updateDisplays","updateDisplay","newDom","liBefore","insertBefore","modified","opt","__preset_select","selectedIndex","value","augmentController","__gui","options","nextSibling","nextElementSibling","before","toArray","isArray","isObject","firstElementChild","box","min","__min","max","__max","step","__step","method","pc","pb","args","apply","r","returned","isNumber","oldName","wasListening","newController","compose","fakeEvent","__checkbox","stopPropagation","__button","val","borderLeftColor","__color","toString","isModified","matchedIndex","controllerMap","presetMap","concat","container","location","href","setSelected","showHideExplain","explain","div","firstChild","gears","button","button2","button3","select","index","getElementById","localStorageCheckBox","saveLocally","setAttribute","newConstructorTextArea","metaKey","show","focus","prompt","pmouseX","marginLeft","cursor","position","drag","clientX","dragStop","dragStart","w","useInitialValues","savedValues","controllerArray","c"],"mappings":"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","file":"dat.gui.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"dat\"] = factory();\n\telse\n\t\troot[\"dat\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 42cae1a29f16216ae46b","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nimport dat from './src/dat/index';\n\nmodule.exports = dat;\n\n\n\n// WEBPACK FOOTER //\n// ../index.js","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nimport css from '../utils/css';\nimport saveDialogueContents from './saveDialogue.html';\nimport ControllerFactory from '../controllers/ControllerFactory';\nimport Controller from '../controllers/Controller';\nimport BooleanController from '../controllers/BooleanController';\nimport FunctionController from '../controllers/FunctionController';\nimport NumberControllerBox from '../controllers/NumberControllerBox';\nimport NumberControllerSlider from '../controllers/NumberControllerSlider';\nimport ColorController from '../controllers/ColorController';\nimport requestAnimationFrame from '../utils/requestAnimationFrame';\nimport CenteredDiv from '../dom/CenteredDiv';\nimport dom from '../dom/dom';\nimport common from '../utils/common';\n\nimport styleSheet from './style.scss'; // CSS to embed in build\n\ncss.inject(styleSheet);\n\n/** Outer-most className for GUI's */\nconst CSS_NAMESPACE = 'dg';\n\nconst HIDE_KEY_CODE = 72;\n\n/** The only value shared between the JS and SCSS. Use caution. */\nconst CLOSE_BUTTON_HEIGHT = 20;\n\nconst DEFAULT_DEFAULT_PRESET_NAME = 'Default';\n\nconst SUPPORTS_LOCAL_STORAGE = (function() {\n  try {\n    return 'localStorage' in window && window.localStorage !== null;\n  } catch (e) {\n    return false;\n  }\n}());\n\nlet SAVE_DIALOGUE;\n\n/** Have we yet to create an autoPlace GUI? */\nlet autoPlaceVirgin = true;\n\n/** Fixed position div that auto place GUI's go inside */\nlet autoPlaceContainer;\n\n/** Are we hiding the GUI's ? */\nlet hide = false;\n\n/** GUI's which should be hidden */\nconst hideableGuis = [];\n\n/**\n * A lightweight controller library for JavaScript. It allows you to easily\n * manipulate variables and fire functions on the fly.\n * @class\n *\n * @member dat.gui\n *\n * @param {Object} [params]\n * @param {String} [params.name] The name of this GUI.\n * @param {Object} [params.load] JSON object representing the saved state of\n * this GUI.\n * @param {Boolean} [params.auto=true]\n * @param {dat.gui.GUI} [params.parent] The GUI I'm nested in.\n * @param {Boolean} [params.closed] If true, starts closed\n */\nconst GUI = function(pars) {\n  const _this = this;\n\n  let params = pars || {};\n\n  /**\n   * Outermost DOM Element\n   * @type DOMElement\n   */\n  this.domElement = document.createElement('div');\n  this.__ul = document.createElement('ul');\n  this.domElement.appendChild(this.__ul);\n\n  dom.addClass(this.domElement, CSS_NAMESPACE);\n\n  /**\n   * Nested GUI's by name\n   * @ignore\n   */\n  this.__folders = {};\n\n  this.__controllers = [];\n\n  /**\n   * List of objects I'm remembering for save, only used in top level GUI\n   * @ignore\n   */\n  this.__rememberedObjects = [];\n\n  /**\n   * Maps the index of remembered objects to a map of controllers, only used\n   * in top level GUI.\n   *\n   * @private\n   * @ignore\n   *\n   * @example\n   * [\n   *  {\n     *    propertyName: Controller,\n     *    anotherPropertyName: Controller\n     *  },\n   *  {\n     *    propertyName: Controller\n     *  }\n   * ]\n   */\n  this.__rememberedObjectIndecesToControllers = [];\n\n  this.__listening = [];\n\n  // Default parameters\n  params = common.defaults(params, {\n    autoPlace: true,\n    width: GUI.DEFAULT_WIDTH\n  });\n\n  params = common.defaults(params, {\n    resizable: params.autoPlace,\n    hideable: params.autoPlace\n  });\n\n  if (!common.isUndefined(params.load)) {\n    // Explicit preset\n    if (params.preset) {\n      params.load.preset = params.preset;\n    }\n  } else {\n    params.load = { preset: DEFAULT_DEFAULT_PRESET_NAME };\n  }\n\n  if (common.isUndefined(params.parent) && params.hideable) {\n    hideableGuis.push(this);\n  }\n\n  // Only root level GUI's are resizable.\n  params.resizable = common.isUndefined(params.parent) && params.resizable;\n\n  if (params.autoPlace && common.isUndefined(params.scrollable)) {\n    params.scrollable = true;\n  }\n//    params.scrollable = common.isUndefined(params.parent) && params.scrollable === true;\n\n  // Not part of params because I don't want people passing this in via\n  // constructor. Should be a 'remembered' value.\n  let useLocalStorage =\n    SUPPORTS_LOCAL_STORAGE &&\n    localStorage.getItem(getLocalStorageHash(this, 'isLocal')) === 'true';\n\n  let saveToLocalStorage;\n\n  Object.defineProperties(this,\n    /** @lends dat.gui.GUI.prototype */\n    {\n      /**\n       * The parent <code>GUI</code>\n       * @type dat.gui.GUI\n       */\n      parent: {\n        get: function() {\n          return params.parent;\n        }\n      },\n\n      scrollable: {\n        get: function() {\n          return params.scrollable;\n        }\n      },\n\n      /**\n       * Handles <code>GUI</code>'s element placement for you\n       * @type Boolean\n       */\n      autoPlace: {\n        get: function() {\n          return params.autoPlace;\n        }\n      },\n\n      /**\n       * The identifier for a set of saved values\n       * @type String\n       */\n      preset: {\n        get: function() {\n          if (_this.parent) {\n            return _this.getRoot().preset;\n          }\n\n          return params.load.preset;\n        },\n\n        set: function(v) {\n          if (_this.parent) {\n            _this.getRoot().preset = v;\n          } else {\n            params.load.preset = v;\n          }\n          setPresetSelectIndex(this);\n          _this.revert();\n        }\n      },\n\n      /**\n       * The width of <code>GUI</code> element\n       * @type Number\n       */\n      width: {\n        get: function() {\n          return params.width;\n        },\n        set: function(v) {\n          params.width = v;\n          setWidth(_this, v);\n        }\n      },\n\n      /**\n       * The name of <code>GUI</code>. Used for folders. i.e\n       * a folder's name\n       * @type String\n       */\n      name: {\n        get: function() {\n          return params.name;\n        },\n        set: function(v) {\n          // TODO Check for collisions among sibling folders\n          params.name = v;\n          if (titleRowName) {\n            titleRowName.innerHTML = params.name;\n          }\n        }\n      },\n\n      /**\n       * Whether the <code>GUI</code> is collapsed or not\n       * @type Boolean\n       */\n      closed: {\n        get: function() {\n          return params.closed;\n        },\n        set: function(v) {\n          params.closed = v;\n          if (params.closed) {\n            dom.addClass(_this.__ul, GUI.CLASS_CLOSED);\n          } else {\n            dom.removeClass(_this.__ul, GUI.CLASS_CLOSED);\n          }\n          // For browsers that aren't going to respect the CSS transition,\n          // Lets just check our height against the window height right off\n          // the bat.\n          this.onResize();\n\n          if (_this.__closeButton) {\n            _this.__closeButton.innerHTML = v ? GUI.TEXT_OPEN : GUI.TEXT_CLOSED;\n          }\n        }\n      },\n\n      /**\n       * Contains all presets\n       * @type Object\n       */\n      load: {\n        get: function() {\n          return params.load;\n        }\n      },\n\n      /**\n       * Determines whether or not to use <a href=\"https://developer.mozilla.org/en/DOM/Storage#localStorage\">localStorage</a> as the means for\n       * <code>remember</code>ing\n       * @type Boolean\n       */\n      useLocalStorage: {\n\n        get: function() {\n          return useLocalStorage;\n        },\n        set: function(bool) {\n          if (SUPPORTS_LOCAL_STORAGE) {\n            useLocalStorage = bool;\n            if (bool) {\n              dom.bind(window, 'unload', saveToLocalStorage);\n            } else {\n              dom.unbind(window, 'unload', saveToLocalStorage);\n            }\n            localStorage.setItem(getLocalStorageHash(_this, 'isLocal'), bool);\n          }\n        }\n      }\n    });\n\n  // Are we a root level GUI?\n  if (common.isUndefined(params.parent)) {\n    params.closed = false;\n\n    dom.addClass(this.domElement, GUI.CLASS_MAIN);\n    dom.makeSelectable(this.domElement, false);\n\n    // Are we supposed to be loading locally?\n    if (SUPPORTS_LOCAL_STORAGE) {\n      if (useLocalStorage) {\n        _this.useLocalStorage = true;\n\n        const savedGui = localStorage.getItem(getLocalStorageHash(this, 'gui'));\n\n        if (savedGui) {\n          params.load = JSON.parse(savedGui);\n        }\n      }\n    }\n\n    this.__closeButton = document.createElement('div');\n    this.__closeButton.innerHTML = GUI.TEXT_CLOSED;\n    dom.addClass(this.__closeButton, GUI.CLASS_CLOSE_BUTTON);\n    this.domElement.appendChild(this.__closeButton);\n\n    dom.bind(this.__closeButton, 'click', function() {\n      _this.closed = !_this.closed;\n    });\n    // Oh, you're a nested GUI!\n  } else {\n    if (params.closed === undefined) {\n      params.closed = true;\n    }\n\n    const titleRowName = document.createTextNode(params.name);\n    dom.addClass(titleRowName, 'controller-name');\n\n    const titleRow = addRow(_this, titleRowName);\n\n    const onClickTitle = function(e) {\n      e.preventDefault();\n      _this.closed = !_this.closed;\n      return false;\n    };\n\n    dom.addClass(this.__ul, GUI.CLASS_CLOSED);\n\n    dom.addClass(titleRow, 'title');\n    dom.bind(titleRow, 'click', onClickTitle);\n\n    if (!params.closed) {\n      this.closed = false;\n    }\n  }\n\n  if (params.autoPlace) {\n    if (common.isUndefined(params.parent)) {\n      if (autoPlaceVirgin) {\n        autoPlaceContainer = document.createElement('div');\n        dom.addClass(autoPlaceContainer, CSS_NAMESPACE);\n        dom.addClass(autoPlaceContainer, GUI.CLASS_AUTO_PLACE_CONTAINER);\n        document.body.appendChild(autoPlaceContainer);\n        autoPlaceVirgin = false;\n      }\n\n      // Put it in the dom for you.\n      autoPlaceContainer.appendChild(this.domElement);\n\n      // Apply the auto styles\n      dom.addClass(this.domElement, GUI.CLASS_AUTO_PLACE);\n    }\n\n\n    // Make it not elastic.\n    if (!this.parent) {\n      setWidth(_this, params.width);\n    }\n  }\n\n  this.__resizeHandler = function() {\n    _this.onResize();\n  };\n\n  dom.bind(window, 'resize', this.__resizeHandler);\n  dom.bind(this.__ul, 'webkitTransitionEnd', this.__resizeHandler);\n  dom.bind(this.__ul, 'transitionend', this.__resizeHandler);\n  dom.bind(this.__ul, 'oTransitionEnd', this.__resizeHandler);\n  this.onResize();\n\n  if (params.resizable) {\n    addResizeHandle(this);\n  }\n\n  saveToLocalStorage = function() {\n    if (SUPPORTS_LOCAL_STORAGE && localStorage.getItem(getLocalStorageHash(_this, 'isLocal')) === 'true') {\n      localStorage.setItem(getLocalStorageHash(_this, 'gui'), JSON.stringify(_this.getSaveObject()));\n    }\n  };\n\n  // expose this method publicly\n  this.saveToLocalStorageIfPossible = saveToLocalStorage;\n\n  function resetWidth() {\n    const root = _this.getRoot();\n    root.width += 1;\n    common.defer(function() {\n      root.width -= 1;\n    });\n  }\n\n  if (!params.parent) {\n    resetWidth();\n  }\n};\n\nGUI.toggleHide = function() {\n  hide = !hide;\n  common.each(hideableGuis, function(gui) {\n    gui.domElement.style.display = hide ? 'none' : '';\n  });\n};\n\nGUI.CLASS_AUTO_PLACE = 'a';\nGUI.CLASS_AUTO_PLACE_CONTAINER = 'ac';\nGUI.CLASS_MAIN = 'main';\nGUI.CLASS_CONTROLLER_ROW = 'cr';\nGUI.CLASS_TOO_TALL = 'taller-than-window';\nGUI.CLASS_CLOSED = 'closed';\nGUI.CLASS_CLOSE_BUTTON = 'close-button';\nGUI.CLASS_DRAG = 'drag';\n\nGUI.DEFAULT_WIDTH = 245;\nGUI.TEXT_CLOSED = 'Close Controls';\nGUI.TEXT_OPEN = 'Open Controls';\n\nGUI._keydownHandler = function(e) {\n  if (document.activeElement.type !== 'text' &&\n    (e.which === HIDE_KEY_CODE || e.keyCode === HIDE_KEY_CODE)) {\n    GUI.toggleHide();\n  }\n};\ndom.bind(window, 'keydown', GUI._keydownHandler, false);\n\ncommon.extend(\n  GUI.prototype,\n\n  /** @lends dat.gui.GUI */\n  {\n\n    /**\n     * @param object\n     * @param property\n     * @returns {dat.controllers.Controller} The new controller that was added.\n     * @instance\n     */\n    add: function(object, property) {\n      return add(\n        this,\n        object,\n        property,\n        {\n          factoryArgs: Array.prototype.slice.call(arguments, 2)\n        }\n      );\n    },\n\n    /**\n     * @param object\n     * @param property\n     * @returns {dat.controllers.ColorController} The new controller that was added.\n     * @instance\n     */\n    addColor: function(object, property) {\n      return add(\n        this,\n        object,\n        property,\n        {\n          color: true\n        }\n      );\n    },\n\n    /**\n     * @param controller\n     * @instance\n     */\n    remove: function(controller) {\n      // TODO listening?\n      this.__ul.removeChild(controller.__li);\n      this.__controllers.splice(this.__controllers.indexOf(controller), 1);\n      const _this = this;\n      common.defer(function() {\n        _this.onResize();\n      });\n    },\n\n    destroy: function() {\n      if (this.autoPlace) {\n        autoPlaceContainer.removeChild(this.domElement);\n      }\n\n      dom.unbind(window, 'keydown', GUI._keydownHandler, false);\n      dom.unbind(window, 'resize', this.__resizeHandler);\n\n      if (this.saveToLocalStorageIfPossible) {\n        dom.unbind(window, 'unload', this.saveToLocalStorageIfPossible);\n      }\n    },\n\n    /**\n     * @param name\n     * @returns {dat.gui.GUI} The new folder.\n     * @throws {Error} if this GUI already has a folder by the specified\n     * name\n     * @instance\n     */\n    addFolder: function(name) {\n      // We have to prevent collisions on names in order to have a key\n      // by which to remember saved values\n      if (this.__folders[name] !== undefined) {\n        throw new Error('You already have a folder in this GUI by the' +\n          ' name \"' + name + '\"');\n      }\n\n      const newGuiParams = { name: name, parent: this };\n\n      // We need to pass down the autoPlace trait so that we can\n      // attach event listeners to open/close folder actions to\n      // ensure that a scrollbar appears if the window is too short.\n      newGuiParams.autoPlace = this.autoPlace;\n\n      // Do we have saved appearance data for this folder?\n      if (this.load && // Anything loaded?\n        this.load.folders && // Was my parent a dead-end?\n        this.load.folders[name]) { // Did daddy remember me?\n        // Start me closed if I was closed\n        newGuiParams.closed = this.load.folders[name].closed;\n\n        // Pass down the loaded data\n        newGuiParams.load = this.load.folders[name];\n      }\n\n      const gui = new GUI(newGuiParams);\n      this.__folders[name] = gui;\n\n      const li = addRow(this, gui.domElement);\n      dom.addClass(li, 'folder');\n      return gui;\n    },\n\n    removeFolder: function(folder) {\n      this.__ul.removeChild(folder.domElement.parentElement);\n\n      delete this.__folders[folder.name];\n\n      // Do we have saved appearance data for this folder?\n      if (this.load && // Anything loaded?\n          this.load.folders && // Was my parent a dead-end?\n          this.load.folders[folder.name]) {\n          delete this.load.folders[folder.name];\n      }\n\n      const _this = this;\n      common.defer(function() {\n        _this.onResize();\n      });\n    },\n\n    open: function() {\n      this.closed = false;\n    },\n\n    close: function() {\n      this.closed = true;\n    },\n\n    onResize: common.debounce(function() {\n      // we debounce this function to prevent performance issues when rotating on tablet/mobile\n      const root = this.getRoot();\n      if (root.scrollable) {\n        const top = dom.getOffset(root.__ul).top;\n        let h = 0;\n\n        common.each(root.__ul.childNodes, function(node) {\n          if (!(root.autoPlace && node === root.__save_row)) {\n            h += dom.getHeight(node);\n          }\n        });\n\n        if (window.innerHeight - top - CLOSE_BUTTON_HEIGHT < h) {\n          dom.addClass(root.domElement, GUI.CLASS_TOO_TALL);\n          root.__ul.style.height = window.innerHeight - top - CLOSE_BUTTON_HEIGHT + 'px';\n        } else {\n          dom.removeClass(root.domElement, GUI.CLASS_TOO_TALL);\n          root.__ul.style.height = 'auto';\n        }\n      }\n\n      if (root.__resize_handle) {\n        common.defer(function() {\n          root.__resize_handle.style.height = root.__ul.offsetHeight + 'px';\n        });\n      }\n\n      if (root.__closeButton) {\n        root.__closeButton.style.width = root.width + 'px';\n      }\n    }, 200),\n\n    /**\n     * Mark objects for saving. The order of these objects cannot change as\n     * the GUI grows. When remembering new objects, append them to the end\n     * of the list.\n     *\n     * @param {Object...} objects\n     * @throws {Error} if not called on a top level GUI.\n     * @instance\n     */\n    remember: function() {\n      if (common.isUndefined(SAVE_DIALOGUE)) {\n        SAVE_DIALOGUE = new CenteredDiv();\n        SAVE_DIALOGUE.domElement.innerHTML = saveDialogueContents;\n      }\n\n      if (this.parent) {\n        throw new Error('You can only call remember on a top level GUI.');\n      }\n\n      const _this = this;\n\n      common.each(Array.prototype.slice.call(arguments), function(object) {\n        if (_this.__rememberedObjects.length === 0) {\n          addSaveMenu(_this);\n        }\n        if (_this.__rememberedObjects.indexOf(object) === -1) {\n          _this.__rememberedObjects.push(object);\n        }\n      });\n\n      if (this.autoPlace) {\n        // Set save row width\n        setWidth(this, this.width);\n      }\n    },\n\n    /**\n     * @returns {dat.gui.GUI} the topmost parent GUI of a nested GUI.\n     * @instance\n     */\n    getRoot: function() {\n      let gui = this;\n      while (gui.parent) {\n        gui = gui.parent;\n      }\n      return gui;\n    },\n\n    /**\n     * @returns {Object} a JSON object representing the current state of\n     * this GUI as well as its remembered properties.\n     * @instance\n     */\n    getSaveObject: function() {\n      const toReturn = this.load;\n      toReturn.closed = this.closed;\n\n      // Am I remembering any values?\n      if (this.__rememberedObjects.length > 0) {\n        toReturn.preset = this.preset;\n\n        if (!toReturn.remembered) {\n          toReturn.remembered = {};\n        }\n\n        toReturn.remembered[this.preset] = getCurrentPreset(this);\n      }\n\n      toReturn.folders = {};\n      common.each(this.__folders, function(element, key) {\n        toReturn.folders[key] = element.getSaveObject();\n      });\n\n      return toReturn;\n    },\n\n    save: function() {\n      if (!this.load.remembered) {\n        this.load.remembered = {};\n      }\n\n      this.load.remembered[this.preset] = getCurrentPreset(this);\n      markPresetModified(this, false);\n      this.saveToLocalStorageIfPossible();\n    },\n\n    saveAs: function(presetName) {\n      if (!this.load.remembered) {\n        // Retain default values upon first save\n        this.load.remembered = {};\n        this.load.remembered[DEFAULT_DEFAULT_PRESET_NAME] = getCurrentPreset(this, true);\n      }\n\n      this.load.remembered[presetName] = getCurrentPreset(this);\n      this.preset = presetName;\n      addPresetOption(this, presetName, true);\n      this.saveToLocalStorageIfPossible();\n    },\n\n    revert: function(gui) {\n      common.each(this.__controllers, function(controller) {\n        // Make revert work on Default.\n        if (!this.getRoot().load.remembered) {\n          controller.setValue(controller.initialValue);\n        } else {\n          recallSavedValue(gui || this.getRoot(), controller);\n        }\n\n        // fire onFinishChange callback\n        if (controller.__onFinishChange) {\n          controller.__onFinishChange.call(controller, controller.getValue());\n        }\n      }, this);\n\n      common.each(this.__folders, function(folder) {\n        folder.revert(folder);\n      });\n\n      if (!gui) {\n        markPresetModified(this.getRoot(), false);\n      }\n    },\n\n    listen: function(controller) {\n      const init = this.__listening.length === 0;\n      this.__listening.push(controller);\n      if (init) {\n        updateDisplays(this.__listening);\n      }\n    },\n\n    updateDisplay: function() {\n      common.each(this.__controllers, function(controller) {\n        controller.updateDisplay();\n      });\n      common.each(this.__folders, function(folder) {\n        folder.updateDisplay();\n      });\n    }\n  }\n);\n\n/**\n * Add a row to the end of the GUI or before another row.\n *\n * @param gui\n * @param [newDom] If specified, inserts the dom content in the new row\n * @param [liBefore] If specified, places the new row before another row\n */\nfunction addRow(gui, newDom, liBefore) {\n  const li = document.createElement('li');\n  if (newDom) {\n    li.appendChild(newDom);\n  }\n\n  if (liBefore) {\n    gui.__ul.insertBefore(li, liBefore);\n  } else {\n    gui.__ul.appendChild(li);\n  }\n  gui.onResize();\n  return li;\n}\n\nfunction markPresetModified(gui, modified) {\n  const opt = gui.__preset_select[gui.__preset_select.selectedIndex];\n\n  // console.log('mark', modified, opt);\n  if (modified) {\n    opt.innerHTML = opt.value + '*';\n  } else {\n    opt.innerHTML = opt.value;\n  }\n}\n\nfunction augmentController(gui, li, controller) {\n  controller.__li = li;\n  controller.__gui = gui;\n\n  common.extend(controller, {\n    options: function(options) {\n      if (arguments.length > 1) {\n        const nextSibling = controller.__li.nextElementSibling;\n        controller.remove();\n\n        return add(\n          gui,\n          controller.object,\n          controller.property,\n          {\n            before: nextSibling,\n            factoryArgs: [common.toArray(arguments)]\n          }\n        );\n      }\n\n      if (common.isArray(options) || common.isObject(options)) {\n        const nextSibling = controller.__li.nextElementSibling;\n        controller.remove();\n\n        return add(\n          gui,\n          controller.object,\n          controller.property,\n          {\n            before: nextSibling,\n            factoryArgs: [options]\n          }\n        );\n      }\n    },\n\n    name: function(v) {\n      controller.__li.firstElementChild.firstElementChild.innerHTML = v;\n      return controller;\n    },\n\n    listen: function() {\n      controller.__gui.listen(controller);\n      return controller;\n    },\n\n    remove: function() {\n      controller.__gui.remove(controller);\n      return controller;\n    }\n  });\n\n  // All sliders should be accompanied by a box.\n  if (controller instanceof NumberControllerSlider) {\n    const box = new NumberControllerBox(controller.object, controller.property,\n      { min: controller.__min, max: controller.__max, step: controller.__step });\n\n    common.each(['updateDisplay', 'onChange', 'onFinishChange', 'step'], function(method) {\n      const pc = controller[method];\n      const pb = box[method];\n      controller[method] = box[method] = function() {\n        const args = Array.prototype.slice.call(arguments);\n        pb.apply(box, args);\n        return pc.apply(controller, args);\n      };\n    });\n\n    dom.addClass(li, 'has-slider');\n    controller.domElement.insertBefore(box.domElement, controller.domElement.firstElementChild);\n  } else if (controller instanceof NumberControllerBox) {\n    const r = function(returned) {\n      // Have we defined both boundaries?\n      if (common.isNumber(controller.__min) && common.isNumber(controller.__max)) {\n        // Well, then lets just replace this with a slider.\n\n        // lets remember if the old controller had a specific name or was listening\n        const oldName = controller.__li.firstElementChild.firstElementChild.innerHTML;\n        const wasListening = controller.__gui.__listening.indexOf(controller) > -1;\n\n        controller.remove();\n        const newController = add(\n          gui,\n          controller.object,\n          controller.property,\n          {\n            before: controller.__li.nextElementSibling,\n            factoryArgs: [controller.__min, controller.__max, controller.__step]\n          });\n\n        newController.name(oldName);\n        if (wasListening) newController.listen();\n\n        return newController;\n      }\n\n      return returned;\n    };\n\n    controller.min = common.compose(r, controller.min);\n    controller.max = common.compose(r, controller.max);\n  } else if (controller instanceof BooleanController) {\n    dom.bind(li, 'click', function() {\n      dom.fakeEvent(controller.__checkbox, 'click');\n    });\n\n    dom.bind(controller.__checkbox, 'click', function(e) {\n      e.stopPropagation(); // Prevents double-toggle\n    });\n  } else if (controller instanceof FunctionController) {\n    dom.bind(li, 'click', function() {\n      dom.fakeEvent(controller.__button, 'click');\n    });\n\n    dom.bind(li, 'mouseover', function() {\n      dom.addClass(controller.__button, 'hover');\n    });\n\n    dom.bind(li, 'mouseout', function() {\n      dom.removeClass(controller.__button, 'hover');\n    });\n  } else if (controller instanceof ColorController) {\n    dom.addClass(li, 'color');\n    controller.updateDisplay = common.compose(function(val) {\n      li.style.borderLeftColor = controller.__color.toString();\n      return val;\n    }, controller.updateDisplay);\n\n    controller.updateDisplay();\n  }\n\n  controller.setValue = common.compose(function(val) {\n    if (gui.getRoot().__preset_select && controller.isModified()) {\n      markPresetModified(gui.getRoot(), true);\n    }\n\n    return val;\n  }, controller.setValue);\n}\n\nfunction recallSavedValue(gui, controller) {\n  // Find the topmost GUI, that's where remembered objects live.\n  const root = gui.getRoot();\n\n  // Does the object we're controlling match anything we've been told to\n  // remember?\n  const matchedIndex = root.__rememberedObjects.indexOf(controller.object);\n\n  // Why yes, it does!\n  if (matchedIndex !== -1) {\n    // Let me fetch a map of controllers for thcommon.isObject.\n    let controllerMap = root.__rememberedObjectIndecesToControllers[matchedIndex];\n\n    // Ohp, I believe this is the first controller we've created for this\n    // object. Lets make the map fresh.\n    if (controllerMap === undefined) {\n      controllerMap = {};\n      root.__rememberedObjectIndecesToControllers[matchedIndex] =\n        controllerMap;\n    }\n\n    // Keep track of this controller\n    controllerMap[controller.property] = controller;\n\n    // Okay, now have we saved any values for this controller?\n    if (root.load && root.load.remembered) {\n      const presetMap = root.load.remembered;\n\n      // Which preset are we trying to load?\n      let preset;\n\n      if (presetMap[gui.preset]) {\n        preset = presetMap[gui.preset];\n      } else if (presetMap[DEFAULT_DEFAULT_PRESET_NAME]) {\n        // Uhh, you can have the default instead?\n        preset = presetMap[DEFAULT_DEFAULT_PRESET_NAME];\n      } else {\n        // Nada.\n        return;\n      }\n\n      // Did the loaded object remember thcommon.isObject? &&  Did we remember this particular property?\n      if (preset[matchedIndex] && preset[matchedIndex][controller.property] !== undefined) {\n        // We did remember something for this guy ...\n        const value = preset[matchedIndex][controller.property];\n\n        // And that's what it is.\n        controller.initialValue = value;\n        controller.setValue(value);\n      }\n    }\n  }\n}\n\nfunction add(gui, object, property, params) {\n  if (object[property] === undefined) {\n    throw new Error(`Object \"${object}\" has no property \"${property}\"`);\n  }\n\n  let controller;\n\n  if (params.color) {\n    controller = new ColorController(object, property);\n  } else {\n    const factoryArgs = [object, property].concat(params.factoryArgs);\n    controller = ControllerFactory.apply(gui, factoryArgs);\n  }\n\n  if (params.before instanceof Controller) {\n    params.before = params.before.__li;\n  }\n\n  recallSavedValue(gui, controller);\n\n  dom.addClass(controller.domElement, 'c');\n\n  const name = document.createElement('span');\n  dom.addClass(name, 'property-name');\n  name.innerHTML = controller.property;\n\n  const container = document.createElement('div');\n  container.appendChild(name);\n  container.appendChild(controller.domElement);\n\n  const li = addRow(gui, container, params.before);\n\n  dom.addClass(li, GUI.CLASS_CONTROLLER_ROW);\n  if (controller instanceof ColorController) {\n    dom.addClass(li, 'color');\n  } else {\n    dom.addClass(li, typeof controller.getValue());\n  }\n\n  augmentController(gui, li, controller);\n\n  gui.__controllers.push(controller);\n\n  return controller;\n}\n\nfunction getLocalStorageHash(gui, key) {\n  // TODO how does this deal with multiple GUI's?\n  return document.location.href + '.' + key;\n}\n\nfunction addPresetOption(gui, name, setSelected) {\n  const opt = document.createElement('option');\n  opt.innerHTML = name;\n  opt.value = name;\n  gui.__preset_select.appendChild(opt);\n  if (setSelected) {\n    gui.__preset_select.selectedIndex = gui.__preset_select.length - 1;\n  }\n}\n\nfunction showHideExplain(gui, explain) {\n  explain.style.display = gui.useLocalStorage ? 'block' : 'none';\n}\n\nfunction addSaveMenu(gui) {\n  const div = gui.__save_row = document.createElement('li');\n\n  dom.addClass(gui.domElement, 'has-save');\n\n  gui.__ul.insertBefore(div, gui.__ul.firstChild);\n\n  dom.addClass(div, 'save-row');\n\n  const gears = document.createElement('span');\n  gears.innerHTML = '&nbsp;';\n  dom.addClass(gears, 'button gears');\n\n  // TODO replace with FunctionController\n  const button = document.createElement('span');\n  button.innerHTML = 'Save';\n  dom.addClass(button, 'button');\n  dom.addClass(button, 'save');\n\n  const button2 = document.createElement('span');\n  button2.innerHTML = 'New';\n  dom.addClass(button2, 'button');\n  dom.addClass(button2, 'save-as');\n\n  const button3 = document.createElement('span');\n  button3.innerHTML = 'Revert';\n  dom.addClass(button3, 'button');\n  dom.addClass(button3, 'revert');\n\n  const select = gui.__preset_select = document.createElement('select');\n\n  if (gui.load && gui.load.remembered) {\n    common.each(gui.load.remembered, function(value, key) {\n      addPresetOption(gui, key, key === gui.preset);\n    });\n  } else {\n    addPresetOption(gui, DEFAULT_DEFAULT_PRESET_NAME, false);\n  }\n\n  dom.bind(select, 'change', function() {\n    for (let index = 0; index < gui.__preset_select.length; index++) {\n      gui.__preset_select[index].innerHTML = gui.__preset_select[index].value;\n    }\n\n    gui.preset = this.value;\n  });\n\n  div.appendChild(select);\n  div.appendChild(gears);\n  div.appendChild(button);\n  div.appendChild(button2);\n  div.appendChild(button3);\n\n  if (SUPPORTS_LOCAL_STORAGE) {\n    const explain = document.getElementById('dg-local-explain');\n    const localStorageCheckBox = document.getElementById('dg-local-storage');\n    const saveLocally = document.getElementById('dg-save-locally');\n\n    saveLocally.style.display = 'block';\n\n    if (localStorage.getItem(getLocalStorageHash(gui, 'isLocal')) === 'true') {\n      localStorageCheckBox.setAttribute('checked', 'checked');\n    }\n\n    showHideExplain(gui, explain);\n\n    // TODO: Use a boolean controller, fool!\n    dom.bind(localStorageCheckBox, 'change', function() {\n      gui.useLocalStorage = !gui.useLocalStorage;\n      showHideExplain(gui, explain);\n    });\n  }\n\n  const newConstructorTextArea = document.getElementById('dg-new-constructor');\n\n  dom.bind(newConstructorTextArea, 'keydown', function(e) {\n    if (e.metaKey && (e.which === 67 || e.keyCode === 67)) {\n      SAVE_DIALOGUE.hide();\n    }\n  });\n\n  dom.bind(gears, 'click', function() {\n    newConstructorTextArea.innerHTML = JSON.stringify(gui.getSaveObject(), undefined, 2);\n    SAVE_DIALOGUE.show();\n    newConstructorTextArea.focus();\n    newConstructorTextArea.select();\n  });\n\n  dom.bind(button, 'click', function() {\n    gui.save();\n  });\n\n  dom.bind(button2, 'click', function() {\n    const presetName = prompt('Enter a new preset name.');\n    if (presetName) {\n      gui.saveAs(presetName);\n    }\n  });\n\n  dom.bind(button3, 'click', function() {\n    gui.revert();\n  });\n\n  // div.appendChild(button2);\n}\n\nfunction addResizeHandle(gui) {\n  let pmouseX;\n\n  gui.__resize_handle = document.createElement('div');\n\n  common.extend(gui.__resize_handle.style, {\n\n    width: '6px',\n    marginLeft: '-3px',\n    height: '200px',\n    cursor: 'ew-resize',\n    position: 'absolute'\n    // border: '1px solid blue'\n\n  });\n\n  function drag(e) {\n    e.preventDefault();\n\n    gui.width += pmouseX - e.clientX;\n    gui.onResize();\n    pmouseX = e.clientX;\n\n    return false;\n  }\n\n  function dragStop() {\n    dom.removeClass(gui.__closeButton, GUI.CLASS_DRAG);\n    dom.unbind(window, 'mousemove', drag);\n    dom.unbind(window, 'mouseup', dragStop);\n  }\n\n  function dragStart(e) {\n    e.preventDefault();\n\n    pmouseX = e.clientX;\n\n    dom.addClass(gui.__closeButton, GUI.CLASS_DRAG);\n    dom.bind(window, 'mousemove', drag);\n    dom.bind(window, 'mouseup', dragStop);\n\n    return false;\n  }\n\n  dom.bind(gui.__resize_handle, 'mousedown', dragStart);\n  dom.bind(gui.__closeButton, 'mousedown', dragStart);\n\n  gui.domElement.insertBefore(gui.__resize_handle, gui.domElement.firstElementChild);\n}\n\nfunction setWidth(gui, w) {\n  gui.domElement.style.width = w + 'px';\n  // Auto placed save-rows are position fixed, so we have to\n  // set the width manually if we want it to bleed to the edge\n  if (gui.__save_row && gui.autoPlace) {\n    gui.__save_row.style.width = w + 'px';\n  }\n  if (gui.__closeButton) {\n    gui.__closeButton.style.width = w + 'px';\n  }\n}\n\nfunction getCurrentPreset(gui, useInitialValues) {\n  const toReturn = {};\n\n  // For each object I'm remembering\n  common.each(gui.__rememberedObjects, function(val, index) {\n    const savedValues = {};\n\n    // The controllers I've made for thcommon.isObject by property\n    const controllerMap =\n      gui.__rememberedObjectIndecesToControllers[index];\n\n    // Remember each value for each property\n    common.each(controllerMap, function(controller, property) {\n      savedValues[property] = useInitialValues ? controller.initialValue : controller.getValue();\n    });\n\n    // Save the values for thcommon.isObject\n    toReturn[index] = savedValues;\n  });\n\n  return toReturn;\n}\n\nfunction setPresetSelectIndex(gui) {\n  for (let index = 0; index < gui.__preset_select.length; index++) {\n    if (gui.__preset_select[index].value === gui.preset) {\n      gui.__preset_select.selectedIndex = index;\n    }\n  }\n}\n\nfunction updateDisplays(controllerArray) {\n  if (controllerArray.length !== 0) {\n    requestAnimationFrame.call(window, function() {\n      updateDisplays(controllerArray);\n    });\n  }\n\n  common.each(controllerArray, function(c) {\n    c.updateDisplay();\n  });\n}\n\nmodule.exports = GUI;\n\n\n// WEBPACK FOOTER //\n// ./dat/index.js"],"sourceRoot":""}