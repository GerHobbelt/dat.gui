/**
 * dat.GUI JavaScript Controller Library
 * http://code.google.com/p/dat-gui
 *
 * Copyright 2011-2020 Data Arts Team, Google Creative Lab
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 */

!(function (e, t) {
  "object" == typeof exports && "undefined" != typeof module
    ? t(exports)
    : "function" == typeof define && define.amd
    ? define(["exports"], t)
    : t(((e = e || self).dat = {}));
})(this, function (e) {
  "use strict";
  function t(e, t) {
    var n = e.__state.conversionName.toString(),
      i = Math.round(e.r),
      o = Math.round(e.g),
      r = Math.round(e.b),
      s = e.a,
      a = Math.round(e.h),
      l = e.s.toFixed(1),
      d = e.v.toFixed(1);
    if (t || "THREE_CHAR_HEX" === n || "SIX_CHAR_HEX" === n) {
      for (var c = e.hex.toString(16); c.length < 6; ) c = "0" + c;
      return "#" + c;
    }
    return "CSS_RGB" === n
      ? "rgb(" + i + "," + o + "," + r + ")"
      : "CSS_RGBA" === n
      ? "rgba(" + i + "," + o + "," + r + "," + s + ")"
      : "HEX" === n
      ? "0x" + e.hex.toString(16)
      : "RGB_ARRAY" === n
      ? "[" + i + "," + o + "," + r + "]"
      : "RGBA_ARRAY" === n
      ? "[" + i + "," + o + "," + r + "," + s + "]"
      : "RGB_OBJ" === n
      ? "{r:" + i + ",g:" + o + ",b:" + r + "}"
      : "RGBA_OBJ" === n
      ? "{r:" + i + ",g:" + o + ",b:" + r + ",a:" + s + "}"
      : "HSV_OBJ" === n
      ? "{h:" + a + ",s:" + l + ",v:" + d + "}"
      : "HSVA_OBJ" === n
      ? "{h:" + a + ",s:" + l + ",v:" + d + ",a:" + s + "}"
      : "unknown format";
  }
  var n,
    s = Array.prototype.forEach,
    i = Array.prototype.slice,
    m = {
      BREAK: {},
      extend: function (n) {
        return (
          this.each(
            i.call(arguments, 1),
            function (t) {
              (this.isObject(t) ? Object.keys(t) : []).forEach(
                function (e) {
                  this.isUndefined(t[e]) || (n[e] = t[e]);
                }.bind(this)
              );
            },
            this
          ),
          n
        );
      },
      defaults: function (n) {
        return (
          this.each(
            i.call(arguments, 1),
            function (t) {
              (this.isObject(t) ? Object.keys(t) : []).forEach(
                function (e) {
                  this.isUndefined(n[e]) && (n[e] = t[e]);
                }.bind(this)
              );
            },
            this
          ),
          n
        );
      },
      compose: function () {
        var n = i.call(arguments);
        return function () {
          for (var e = i.call(arguments), t = n.length - 1; 0 <= t; t--) e = [n[t].apply(this, e)];
          return e[0];
        };
      },
      each: function (e, t, n) {
        if (e)
          if (s && e.forEach && e.forEach === s) e.forEach(t, n);
          else if (e.length === e.length + 0) {
            for (var i = 0, o = e.length; i < o; i++) if (i in e && t.call(n, e[i], i) === this.BREAK) return;
          } else for (var r in e) if (t.call(n, e[r], r) === this.BREAK) return;
      },
      defer: function (e) {
        setTimeout(e, 0);
      },
      debounce: function (i, o, r) {
        var s;
        return function () {
          var e = this,
            t = arguments;
          var n = r || !s;
          clearTimeout(s),
            (s = setTimeout(function () {
              (s = null), r || i.apply(e, t);
            }, o)),
            n && i.apply(e, t);
        };
      },
      toArray: function (e) {
        return e.toArray ? e.toArray() : i.call(e);
      },
      isUndefined: function (e) {
        return void 0 === e;
      },
      isNull: function (e) {
        return null === e;
      },
      isNaN:
        ((n = function (e) {
          return isNaN(e);
        }),
        (o.toString = function () {
          return n.toString();
        }),
        o),
      isArray:
        Array.isArray ||
        function (e) {
          return e.constructor === Array;
        },
      isObject: function (e) {
        return e === Object(e);
      },
      isNumber: function (e) {
        return e === e + 0;
      },
      isString: function (e) {
        return e === e + "";
      },
      isBoolean: function (e) {
        return !1 === e || !0 === e;
      },
      isFunction: function (e) {
        return "[object Function]" === Object.prototype.toString.call(e);
      },
    };
  function o(e) {
    return n.apply(this, arguments);
  }
  function f(e) {
    a = !1;
    var n = 1 < arguments.length ? m.toArray(arguments) : e;
    return (
      m.each(c, function (e) {
        if (e.litmus(n))
          return (
            m.each(e.conversions, function (e, t) {
              if (((r = e.read(n)), !1 === a && !1 !== r))
                return ((a = r).conversionName = t), (r.conversion = e), m.BREAK;
            }),
            m.BREAK
          );
      }),
      a
    );
  }
  var r,
    a,
    l,
    d,
    c = [
      {
        litmus: m.isString,
        conversions: {
          THREE_CHAR_HEX: {
            read: function (e) {
              var t = e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);
              return (
                null !== t && {
                  space: "HEX",
                  hex: parseInt(
                    "0x" +
                      t[1].toString() +
                      t[1].toString() +
                      t[2].toString() +
                      t[2].toString() +
                      t[3].toString() +
                      t[3].toString(),
                    16
                  ),
                }
              );
            },
            write: t,
          },
          SIX_CHAR_HEX: {
            read: function (e) {
              var t = e.match(/^#([A-F0-9]{6})$/i);
              return null !== t && { space: "HEX", hex: parseInt("0x" + t[1].toString(), 16) };
            },
            write: t,
          },
          CSS_RGB: {
            read: function (e) {
              var t = e.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);
              return null !== t && { space: "RGB", r: parseFloat(t[1]), g: parseFloat(t[2]), b: parseFloat(t[3]) };
            },
            write: t,
          },
          CSS_RGBA: {
            read: function (e) {
              var t = e.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);
              return (
                null !== t && {
                  space: "RGB",
                  r: parseFloat(t[1]),
                  g: parseFloat(t[2]),
                  b: parseFloat(t[3]),
                  a: parseFloat(t[4]),
                }
              );
            },
            write: t,
          },
        },
      },
      {
        litmus: m.isNumber,
        conversions: {
          HEX: {
            read: function (e) {
              return { space: "HEX", hex: e, conversionName: "HEX" };
            },
            write: function (e) {
              return e.hex;
            },
          },
        },
      },
      {
        litmus: m.isArray,
        conversions: {
          RGB_ARRAY: {
            read: function (e) {
              return 3 === e.length && { space: "RGB", r: e[0], g: e[1], b: e[2] };
            },
            write: function (e) {
              return [e.r, e.g, e.b];
            },
          },
          RGBA_ARRAY: {
            read: function (e) {
              return 4 === e.length && { space: "RGB", r: e[0], g: e[1], b: e[2], a: e[3] };
            },
            write: function (e) {
              return [e.r, e.g, e.b, e.a];
            },
          },
        },
      },
      {
        litmus: m.isObject,
        conversions: {
          RGBA_OBJ: {
            read: function (e) {
              return (
                !!(m.isNumber(e.r) && m.isNumber(e.g) && m.isNumber(e.b) && m.isNumber(e.a)) && {
                  space: "RGB",
                  r: e.r,
                  g: e.g,
                  b: e.b,
                  a: e.a,
                }
              );
            },
            write: function (e) {
              return { r: e.r, g: e.g, b: e.b, a: e.a };
            },
          },
          RGB_OBJ: {
            read: function (e) {
              return (
                !!(m.isNumber(e.r) && m.isNumber(e.g) && m.isNumber(e.b)) && { space: "RGB", r: e.r, g: e.g, b: e.b }
              );
            },
            write: function (e) {
              return { r: e.r, g: e.g, b: e.b };
            },
          },
          HSVA_OBJ: {
            read: function (e) {
              return (
                !!(m.isNumber(e.h) && m.isNumber(e.s) && m.isNumber(e.v) && m.isNumber(e.a)) && {
                  space: "HSV",
                  h: e.h,
                  s: e.s,
                  v: e.v,
                  a: e.a,
                }
              );
            },
            write: function (e) {
              return { h: e.h, s: e.s, v: e.v, a: e.a };
            },
          },
          HSV_OBJ: {
            read: function (e) {
              return (
                !!(m.isNumber(e.h) && m.isNumber(e.s) && m.isNumber(e.v)) && { space: "HSV", h: e.h, s: e.s, v: e.v }
              );
            },
            write: function (e) {
              return { h: e.h, s: e.s, v: e.v };
            },
          },
        },
      },
    ],
    u = {
      hsv_to_rgb: function (e, t, n) {
        var i = Math.floor(e / 60) % 6,
          o = e / 60 - Math.floor(e / 60),
          r = n * (1 - t),
          s = n * (1 - o * t),
          a = n * (1 - (1 - o) * t),
          l = [
            [n, a, r],
            [s, n, r],
            [r, n, a],
            [r, s, n],
            [a, r, n],
            [n, r, s],
          ][i];
        return { r: 255 * l[0], g: 255 * l[1], b: 255 * l[2] };
      },
      rgb_to_hsv: function (e, t, n) {
        var i,
          o = Math.min(e, t, n),
          r = Math.max(e, t, n),
          s = r - o;
        return 0 === r
          ? { h: NaN, s: 0, v: 0 }
          : ((i = e === r ? (t - n) / s : t === r ? 2 + (n - e) / s : 4 + (e - t) / s),
            (i /= 6) < 0 && (i += 1),
            { h: 360 * i, s: s / r, v: r / 255 });
      },
      rgb_to_hex: function (e, t, n) {
        var i = this.hex_with_component(0, 2, e),
          i = this.hex_with_component(i, 1, t);
        return (i = this.hex_with_component(i, 0, n));
      },
      component_from_hex: function (e, t) {
        return (e >> (8 * t)) & 255;
      },
      hex_with_component: function (e, t, n) {
        return (n << (l = 8 * t)) | (e & ~(255 << l));
      },
    },
    p =
      (((d = _.prototype).toString = function () {
        return t(this);
      }),
      (d.toHexString = function () {
        return t(this, !0);
      }),
      (d.toOriginal = function () {
        return this.__state.conversion.write(this);
      }),
      _);
  function _() {
    if (((this.__state = f.apply(this, arguments)), !1 === this.__state))
      throw new Error("Failed to interpret color arguments");
    this.__state.a = this.__state.a || 1;
  }
  function h(e, t, n) {
    Object.defineProperty(e, t, {
      get: function () {
        return "RGB" === this.__state.space || p.recalculateRGB(this, t, n), this.__state[t];
      },
      set: function (e) {
        "RGB" !== this.__state.space && (p.recalculateRGB(this, t, n), (this.__state.space = "RGB")),
          (this.__state[t] = e);
      },
    });
  }
  function b(e, t) {
    Object.defineProperty(e, t, {
      get: function () {
        return "HSV" === this.__state.space || p.recalculateHSV(this), this.__state[t];
      },
      set: function (e) {
        "HSV" !== this.__state.space && (p.recalculateHSV(this), (this.__state.space = "HSV")), (this.__state[t] = e);
      },
    });
  }
  (p.recalculateRGB = function (e, t, n) {
    if ("HEX" === e.__state.space) e.__state[t] = u.component_from_hex(e.__state.hex, n);
    else {
      if ("HSV" !== e.__state.space) throw new Error("Corrupted color state");
      m.extend(e.__state, u.hsv_to_rgb(e.__state.h, e.__state.s, e.__state.v));
    }
  }),
    (p.recalculateHSV = function (e) {
      var t = u.rgb_to_hsv(e.r, e.g, e.b);
      m.extend(e.__state, { s: t.s, v: t.v }),
        m.isNaN(t.h) ? m.isUndefined(e.__state.h) && (e.__state.h = 0) : (e.__state.h = t.h);
    }),
    (p.COMPONENTS = ["r", "g", "b", "h", "s", "v", "hex", "a"]),
    h(p.prototype, "r", 2),
    h(p.prototype, "g", 1),
    h(p.prototype, "b", 0),
    b(p.prototype, "h"),
    b(p.prototype, "s"),
    b(p.prototype, "v"),
    Object.defineProperty(p.prototype, "a", {
      get: function () {
        return this.__state.a;
      },
      set: function (e) {
        this.__state.a = e;
      },
    }),
    Object.defineProperty(p.prototype, "hex", {
      get: function () {
        return (
          "HEX" !== !this.__state.space && (this.__state.hex = u.rgb_to_hex(this.r, this.g, this.b)), this.__state.hex
        );
      },
      set: function (e) {
        (this.__state.space = "HEX"), (this.__state.hex = e);
      },
    });
  var g,
    v =
      (((g = y.prototype).onChange = function (e) {
        return (this.__onChange = e), this;
      }),
      (g.onFinishChange = function (e) {
        return (this.__onFinishChange = e), this;
      }),
      (g.setValue = function (e) {
        return (
          (this.object[this.property] = e), this.__onChange && this.__onChange.call(this, e), this.updateDisplay(), this
        );
      }),
      (g.getValue = function () {
        return this.object[this.property];
      }),
      (g.updateDisplay = function () {
        return this;
      }),
      (g.isModified = function () {
        return this.initialValue !== this.getValue();
      }),
      y);
  function y(e, t) {
    (this.initialValue = e[t]),
      (this.domElement = document.createElement("div")),
      (this.object = e),
      (this.property = t),
      (this.__onChange = void 0),
      (this.__onFinishChange = void 0);
  }
  function w(e, t) {
    for (var n = 0; n < t.length; n++) {
      var i = t[n];
      (i.enumerable = i.enumerable || !1),
        (i.configurable = !0),
        "value" in i && (i.writable = !0),
        Object.defineProperty(e, i.key, i);
    }
  }
  function E(e, t) {
    (e.prototype = Object.create(t.prototype)), ((e.prototype.constructor = e).__proto__ = t);
  }
  function C(e) {
    if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    return e;
  }
  var x = {};
  m.each(
    {
      HTMLEvents: ["change"],
      MouseEvents: ["click", "mousemove", "mousedown", "mouseup", "mouseover"],
      KeyboardEvents: ["keydown"],
    },
    function (e, t) {
      m.each(e, function (e) {
        x[e] = t;
      });
    }
  );
  var S = /(\d+(\.\d+)?)px/;
  function k(e) {
    if ("0" === e || m.isUndefined(e)) return 0;
    var t = e.match(S);
    return m.isNull(t) ? 0 : parseFloat(t[1]);
  }
  var A,
    O = {
      makeSelectable: function (e, t) {
        void 0 !== e &&
          void 0 !== e.style &&
          ((e.onselectstart = t
            ? function () {
                return !1;
              }
            : function () {}),
          (e.style.MozUserSelect = t ? "auto" : "none"),
          (e.style.KhtmlUserSelect = t ? "auto" : "none"),
          (e.unselectable = t ? "on" : "off"));
      },
      makeFullscreen: function (e, t, n) {
        var i = n,
          o = t;
        m.isUndefined(o) && (o = !0),
          m.isUndefined(i) && (i = !0),
          (e.style.position = "absolute"),
          o && ((e.style.left = 0), (e.style.right = 0)),
          i && ((e.style.top = 0), (e.style.bottom = 0));
      },
      fakeEvent: function (e, t, n, i) {
        var o = n || {},
          r = x[t];
        if (!r) throw new Error("Event type " + t + " not supported.");
        var s = document.createEvent(r);
        switch (r) {
          case "MouseEvents":
            var a = o.x || o.clientX || 0,
              l = o.y || o.clientY || 0;
            s.initMouseEvent(
              t,
              o.bubbles || !1,
              o.cancelable || !0,
              window,
              o.clickCount || 1,
              0,
              0,
              a,
              l,
              !1,
              !1,
              !1,
              !1,
              0,
              null
            );
            break;
          case "KeyboardEvents":
            var d = s.initKeyboardEvent || s.initKeyEvent;
            m.defaults(o, {
              cancelable: !0,
              ctrlKey: !1,
              altKey: !1,
              shiftKey: !1,
              metaKey: !1,
              keyCode: void 0,
              charCode: void 0,
            }),
              d(
                t,
                o.bubbles || !1,
                o.cancelable,
                window,
                o.ctrlKey,
                o.altKey,
                o.shiftKey,
                o.metaKey,
                o.keyCode,
                o.charCode
              );
            break;
          default:
            s.initEvent(t, o.bubbles || !1, o.cancelable || !0);
        }
        m.defaults(s, i), e.dispatchEvent(s);
      },
      bind: function (e, t, n, i) {
        var o = i || !1;
        return e.addEventListener ? e.addEventListener(t, n, o) : e.attachEvent && e.attachEvent("on" + t, n), O;
      },
      unbind: function (e, t, n, i) {
        var o = i || !1;
        return e.removeEventListener ? e.removeEventListener(t, n, o) : e.detachEvent && e.detachEvent("on" + t, n), O;
      },
      addClass: function (e, t) {
        var n;
        return (
          void 0 === e.className
            ? (e.className = t)
            : e.className === t ||
              (-1 === (n = e.className.split(/ +/)).indexOf(t) &&
                (n.push(t), (e.className = n.join(" ").replace(/^\s+/, "").replace(/\s+$/, "")))),
          O
        );
      },
      removeClass: function (e, t) {
        var n, i;
        return (
          t
            ? e.className === t
              ? e.removeAttribute("class")
              : -1 !== (i = (n = e.className.split(/ +/)).indexOf(t)) && (n.splice(i, 1), (e.className = n.join(" ")))
            : (e.className = void 0),
          O
        );
      },
      hasClass: function (e, t) {
        return new RegExp("(?:^|\\s+)" + t + "(?:\\s+|$)").test(e.className) || !1;
      },
      getWidth: function (e) {
        var t = getComputedStyle(e);
        return (
          k(t["border-left-width"]) +
          k(t["border-right-width"]) +
          k(t["padding-left"]) +
          k(t["padding-right"]) +
          k(t.width)
        );
      },
      getHeight: function (e) {
        var t = getComputedStyle(e);
        return (
          k(t["border-top-width"]) +
          k(t["border-bottom-width"]) +
          k(t["padding-top"]) +
          k(t["padding-bottom"]) +
          k(t.height)
        );
      },
      getOffset: function (e) {
        var t = e,
          n = { left: 0, top: 0 };
        if (t.offsetParent) for (; (n.left += t.offsetLeft), (n.top += t.offsetTop), (t = t.offsetParent); );
        return n;
      },
      isActive: function (e) {
        return e === document.activeElement && (e.type || e.href);
      },
    },
    T = (function (o) {
      function e(e, t) {
        var n = o.call(this, e, t) || this,
          i = C(n);
        return (
          (n.__prev = n.getValue()),
          (n.__checkbox = document.createElement("input")),
          n.__checkbox.setAttribute("type", "checkbox"),
          O.bind(
            n.__checkbox,
            "change",
            function () {
              i.setValue(!i.__prev);
            },
            !1
          ),
          n.domElement.appendChild(n.__checkbox),
          n.updateDisplay(),
          n
        );
      }
      E(e, o);
      var t = e.prototype;
      return (
        (t.setValue = function (e) {
          var t = o.prototype.setValue.call(this, e);
          return (
            this.__onFinishChange && this.__onFinishChange.call(this, this.getValue()),
            (this.__prev = this.getValue()),
            t
          );
        }),
        (t.updateDisplay = function () {
          return (
            !0 === this.getValue()
              ? (this.__checkbox.setAttribute("checked", "checked"), (this.__checkbox.checked = !0), (this.__prev = !0))
              : ((this.__checkbox.checked = !1), (this.__prev = !1)),
            o.prototype.updateDisplay.call(this)
          );
        }),
        e
      );
    })(v),
    L = (function (a) {
      function e(e, t, n) {
        var i,
          o = a.call(this, e, t) || this,
          r = n,
          s = C(o);
        return (
          (o.__select = document.createElement("select")),
          m.isArray(r) &&
            ((i = {}),
            m.each(r, function (e) {
              i[e] = e;
            }),
            (r = i)),
          m.each(r, function (e, t) {
            var n = document.createElement("option");
            (n.innerHTML = t), n.setAttribute("value", e), s.__select.appendChild(n);
          }),
          o.updateDisplay(),
          O.bind(o.__select, "change", function () {
            var e = this.options[this.selectedIndex].value;
            s.setValue(e);
          }),
          o.domElement.appendChild(o.__select),
          o
        );
      }
      E(e, a);
      var t = e.prototype;
      return (
        (t.setValue = function (e) {
          var t = a.prototype.setValue.call(this, e);
          return this.__onFinishChange && this.__onFinishChange.call(this, this.getValue()), t;
        }),
        (t.updateDisplay = function () {
          return O.isActive(this.__select)
            ? this
            : ((this.__select.value = this.getValue()), a.prototype.updateDisplay.call(this));
        }),
        e
      );
    })(v),
    R =
      (E(N, (A = v)),
      (N.prototype.updateDisplay = function () {
        return O.isActive(this.__input) || (this.__input.value = this.getValue()), A.prototype.updateDisplay.call(this);
      }),
      N);
  function N(e, t) {
    var n = A.call(this, e, t) || this,
      i = C(n);
    function o() {
      i.setValue(i.__input.value);
    }
    return (
      (n.__input = document.createElement("input")),
      n.__input.setAttribute("type", "text"),
      O.bind(n.__input, "keyup", o),
      O.bind(n.__input, "change", o),
      O.bind(n.__input, "blur", function () {
        i.__onFinishChange && i.__onFinishChange.call(i, i.getValue());
      }),
      O.bind(n.__input, "keydown", function (e) {
        13 === e.keyCode && this.blur();
      }),
      n.updateDisplay(),
      n.domElement.appendChild(n.__input),
      n
    );
  }
  function B(e) {
    var t = e.toString();
    return -1 < t.indexOf(".") ? t.length - t.indexOf(".") - 1 : 0;
  }
  var H = (function (r) {
    function e(e, t, n) {
      var i = r.call(this, e, t) || this,
        o = n || {};
      return (
        (i.__min = o.min),
        (i.__max = o.max),
        (i.__step = o.step),
        m.isUndefined(i.__step)
          ? 0 === i.initialValue
            ? (i.__impliedStep = 1)
            : (i.__impliedStep = Math.pow(10, Math.floor(Math.log(Math.abs(i.initialValue)) / Math.LN10)) / 10)
          : (i.__impliedStep = i.__step),
        (i.__precision = B(i.__impliedStep)),
        i
      );
    }
    E(e, r);
    var t = e.prototype;
    return (
      (t.setValue = function (e) {
        var t = e;
        return (
          void 0 !== this.__min && t < this.__min
            ? (t = this.__min)
            : void 0 !== this.__max && t > this.__max && (t = this.__max),
          void 0 !== this.__step && t % this.__step != 0 && (t = Math.round(t / this.__step) * this.__step),
          r.prototype.setValue.call(this, t)
        );
      }),
      (t.min = function (e) {
        return (this.__min = e), this;
      }),
      (t.max = function (e) {
        return (this.__max = e), this;
      }),
      (t.step = function (e) {
        return (this.__step = e), (this.__impliedStep = e), (this.__precision = B(e)), this;
      }),
      e
    );
  })(v);
  var V,
    F =
      (E(D, (V = H)),
      (D.prototype.updateDisplay = function () {
        var e, t, n;
        return (
          (this.__input.value = this.__truncationSuspended
            ? this.getValue()
            : ((e = this.getValue()), (t = this.__precision), (n = Math.pow(10, t)), Math.round(e * n) / n)),
          V.prototype.updateDisplay.call(this)
        );
      }),
      D);
  function D(e, t, n) {
    var i = V.call(this, e, t, n) || this;
    i.__truncationSuspended = !1;
    var o,
      r = C(i);
    function s() {
      r.__onFinishChange && r.__onFinishChange.call(r, r.getValue());
    }
    function a(e) {
      var t = o - e.clientY;
      r.setValue(r.getValue() + t * r.__impliedStep), (o = e.clientY);
    }
    function l() {
      O.unbind(window, "mousemove", a), O.unbind(window, "mouseup", l), s();
    }
    return (
      (i.__input = document.createElement("input")),
      i.__input.setAttribute("type", "text"),
      O.bind(i.__input, "change", function () {
        var e = parseFloat(r.__input.value);
        m.isNaN(e) || r.setValue(e);
      }),
      O.bind(i.__input, "blur", function () {
        s();
      }),
      O.bind(i.__input, "mousedown", function (e) {
        O.bind(window, "mousemove", a), O.bind(window, "mouseup", l), (o = e.clientY);
      }),
      O.bind(i.__input, "keydown", function (e) {
        13 === e.keyCode && ((r.__truncationSuspended = !0), this.blur(), (r.__truncationSuspended = !1), s());
      }),
      i.updateDisplay(),
      i.domElement.appendChild(i.__input),
      i
    );
  }
  function j(e, t, n, i, o) {
    return i + ((e - t) / (n - t)) * (o - i);
  }
  var M,
    I =
      (E(z, (M = H)),
      (z.prototype.updateDisplay = function () {
        var e = (this.getValue() - this.__min) / (this.__max - this.__min);
        return (this.__foreground.style.width = 100 * e + "%"), M.prototype.updateDisplay.call(this);
      }),
      z);
  function z(e, t, n, i, o) {
    var r = M.call(this, e, t, { min: n, max: i, step: o }) || this,
      s = C(r);
    function a(e) {
      e.preventDefault();
      var t = s.__background.getBoundingClientRect();
      return s.setValue(j(e.clientX, t.left, t.right, s.__min, s.__max)), !1;
    }
    function l() {
      O.unbind(window, "mousemove", a),
        O.unbind(window, "mouseup", l),
        s.__onFinishChange && s.__onFinishChange.call(s, s.getValue());
    }
    function d(e) {
      var t = e.touches[0].clientX,
        n = s.__background.getBoundingClientRect();
      s.setValue(j(t, n.left, n.right, s.__min, s.__max));
    }
    function c() {
      O.unbind(window, "touchmove", d),
        O.unbind(window, "touchend", c),
        s.__onFinishChange && s.__onFinishChange.call(s, s.getValue());
    }
    return (
      (r.__background = document.createElement("div")),
      (r.__foreground = document.createElement("div")),
      O.bind(r.__background, "mousedown", function (e) {
        document.activeElement.blur(), O.bind(window, "mousemove", a), O.bind(window, "mouseup", l), a(e);
      }),
      O.bind(r.__background, "touchstart", function (e) {
        if (1 !== e.touches.length) return;
        O.bind(window, "touchmove", d), O.bind(window, "touchend", c), d(e);
      }),
      O.addClass(r.__background, "slider"),
      O.addClass(r.__foreground, "slider-fg"),
      r.updateDisplay(),
      r.__background.appendChild(r.__foreground),
      r.domElement.appendChild(r.__background),
      r
    );
  }
  var P,
    G =
      (E(U, (P = v)),
      (U.prototype.fire = function () {
        this.__onChange && this.__onChange.call(this),
          this.getValue().call(this.object),
          this.__onFinishChange && this.__onFinishChange.call(this, this.getValue());
      }),
      U);
  function U(e, t, n) {
    var i = P.call(this, e, t) || this,
      o = C(i);
    return (
      (i.__button = document.createElement("div")),
      (i.__button.innerHTML = void 0 === n ? "Fire" : n),
      O.bind(i.__button, "click", function (e) {
        return e.preventDefault(), o.fire(), !1;
      }),
      O.addClass(i.__button, "button"),
      i.domElement.appendChild(i.__button),
      i
    );
  }
  var X,
    K =
      (E(Y, (X = v)),
      (Y.prototype.updateDisplay = function () {
        var t,
          n = f(this.getValue());
        !1 !== n &&
          ((t = !1),
          m.each(
            p.COMPONENTS,
            function (e) {
              if (!m.isUndefined(n[e]) && !m.isUndefined(this.__color.__state[e]) && n[e] !== this.__color.__state[e])
                return (t = !0), {};
            },
            this
          ),
          t && m.extend(this.__color.__state, n)),
          m.extend(this.__temp.__state, this.__color.__state),
          (this.__temp.a = 1);
        var e = this.__color.v < 0.5 || 0.5 < this.__color.s ? 255 : 0,
          i = 255 - e;
        m.extend(this.__field_knob.style, {
          marginLeft: 100 * this.__color.s - 7 + "px",
          marginTop: 100 * (1 - this.__color.v) - 7 + "px",
          backgroundColor: this.__temp.toHexString(),
          border: this.__field_knob_border + "rgb(" + e + "," + e + "," + e + ")",
        }),
          (this.__hue_knob.style.marginTop = 100 * (1 - this.__color.h / 360) + "px"),
          (this.__temp.s = 1),
          (this.__temp.v = 1),
          W(this.__saturation_field, "left", "#fff", this.__temp.toHexString()),
          (this.__input.value = this.__color.toString()),
          m.extend(this.__input.style, {
            backgroundColor: this.__color.toHexString(),
            color: "rgb(" + e + "," + e + "," + e + ")",
            textShadow: this.__input_textShadow + "rgba(" + i + "," + i + "," + i + ",.7)",
          });
      }),
      Y);
  function Y(e, t) {
    var n = X.call(this, e, t) || this;
    (n.__color = new p(n.getValue())), (n.__temp = new p(0));
    var a = C(n);
    (n.domElement = document.createElement("div")),
      O.makeSelectable(n.domElement, !1),
      (n.__selector = document.createElement("div")),
      (n.__selector.className = "selector"),
      (n.__saturation_field = document.createElement("div")),
      (n.__saturation_field.className = "saturation-field"),
      (n.__field_knob = document.createElement("div")),
      (n.__field_knob.className = "field-knob"),
      (n.__field_knob_border = "2px solid "),
      (n.__hue_knob = document.createElement("div")),
      (n.__hue_knob.className = "hue-knob"),
      (n.__hue_field = document.createElement("div")),
      (n.__hue_field.className = "hue-field"),
      (n.__input = document.createElement("input")),
      (n.__input.type = "text"),
      (n.__input_textShadow = "0 1px 1px "),
      O.bind(n.__input, "keydown", function (e) {
        13 === e.keyCode && c.call(this);
      }),
      O.bind(n.__input, "blur", c),
      O.bind(n.__selector, "mousedown", function () {
        O.addClass(this, "drag").bind(window, "mouseup", function () {
          O.removeClass(a.__selector, "drag");
        });
      }),
      O.bind(n.__selector, "touchstart", function () {
        O.addClass(this, "drag").bind(window, "touchend", function () {
          O.removeClass(a.__selector, "drag");
        });
      });
    var i,
      o = document.createElement("div");
    function r(e) {
      _(e),
        O.bind(window, "mousemove", _),
        O.bind(window, "touchmove", _),
        O.bind(window, "mouseup", l),
        O.bind(window, "touchend", l);
    }
    function s(e) {
      h(e),
        O.bind(window, "mousemove", h),
        O.bind(window, "touchmove", h),
        O.bind(window, "mouseup", d),
        O.bind(window, "touchend", d);
    }
    function l() {
      O.unbind(window, "mousemove", _),
        O.unbind(window, "touchmove", _),
        O.unbind(window, "mouseup", l),
        O.unbind(window, "touchend", l),
        u();
    }
    function d() {
      O.unbind(window, "mousemove", h),
        O.unbind(window, "touchmove", h),
        O.unbind(window, "mouseup", d),
        O.unbind(window, "touchend", d),
        u();
    }
    function c() {
      var e = f(this.value);
      !1 !== e ? ((a.__color.__state = e), a.setValue(a.__color.toOriginal())) : (this.value = a.__color.toString());
    }
    function u() {
      a.__onFinishChange && a.__onFinishChange.call(a, a.__color.toOriginal());
    }
    function _(e) {
      -1 === e.type.indexOf("touch") && e.preventDefault();
      var t = a.__saturation_field.getBoundingClientRect(),
        n = (e.touches && e.touches[0]) || e,
        i = n.clientX,
        o = n.clientY,
        r = (i - t.left) / (t.right - t.left),
        s = 1 - (o - t.top) / (t.bottom - t.top);
      return (
        1 < s ? (s = 1) : s < 0 && (s = 0),
        1 < r ? (r = 1) : r < 0 && (r = 0),
        (a.__color.v = s),
        (a.__color.s = r),
        a.setValue(a.__color.toOriginal()),
        !1
      );
    }
    function h(e) {
      -1 === e.type.indexOf("touch") && e.preventDefault();
      var t = a.__hue_field.getBoundingClientRect(),
        n = 1 - (((e.touches && e.touches[0]) || e).clientY - t.top) / (t.bottom - t.top);
      return 1 < n ? (n = 1) : n < 0 && (n = 0), (a.__color.h = 360 * n), a.setValue(a.__color.toOriginal()), !1;
    }
    return (
      m.extend(n.__selector.style, {
        width: "122px",
        height: "102px",
        padding: "3px",
        backgroundColor: "#222",
        boxShadow: "0px 1px 3px rgba(0,0,0,0.3)",
      }),
      m.extend(n.__field_knob.style, {
        position: "absolute",
        width: "12px",
        height: "12px",
        border: n.__field_knob_border + (n.__color.v < 0.5 ? "#fff" : "#000"),
        boxShadow: "0px 1px 3px rgba(0,0,0,0.5)",
        borderRadius: "12px",
        zIndex: 1,
      }),
      m.extend(n.__hue_knob.style, {
        position: "absolute",
        width: "15px",
        height: "2px",
        borderRight: "4px solid #fff",
        zIndex: 1,
      }),
      m.extend(n.__saturation_field.style, {
        width: "100px",
        height: "100px",
        border: "1px solid #555",
        marginRight: "3px",
        display: "inline-block",
        cursor: "pointer",
      }),
      m.extend(o.style, { width: "100%", height: "100%", background: "none" }),
      W(o, "top", "rgba(0,0,0,0)", "#000"),
      m.extend(n.__hue_field.style, {
        width: "15px",
        height: "100px",
        border: "1px solid #555",
        cursor: "ns-resize",
        position: "absolute",
        top: "3px",
        right: "3px",
      }),
      ((i = n.__hue_field).style.background = ""),
      (i.style.cssText +=
        "background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);"),
      (i.style.cssText +=
        "background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"),
      (i.style.cssText +=
        "background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"),
      (i.style.cssText +=
        "background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"),
      (i.style.cssText +=
        "background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"),
      m.extend(n.__input.style, {
        outline: "none",
        textAlign: "center",
        color: "#fff",
        border: 0,
        fontWeight: "bold",
        textShadow: n.__input_textShadow + "rgba(0,0,0,0.7)",
      }),
      O.bind(n.__saturation_field, "mousedown", r),
      O.bind(n.__saturation_field, "touchstart", r),
      O.bind(n.__field_knob, "mousedown", r),
      O.bind(n.__field_knob, "touchstart", r),
      O.bind(n.__hue_field, "mousedown", s),
      O.bind(n.__hue_field, "touchstart", s),
      n.__saturation_field.appendChild(o),
      n.__selector.appendChild(n.__field_knob),
      n.__selector.appendChild(n.__saturation_field),
      n.__selector.appendChild(n.__hue_field),
      n.__hue_field.appendChild(n.__hue_knob),
      n.domElement.appendChild(n.__input),
      n.domElement.appendChild(n.__selector),
      n.updateDisplay(),
      n
    );
  }
  var J = ["-moz-", "-o-", "-webkit-", "-ms-", ""];
  function W(t, n, i, o) {
    (t.style.background = ""),
      m.each(J, function (e) {
        t.style.cssText += "background: " + e + "linear-gradient(" + n + ", " + i + " 0%, " + o + " 100%); ";
      });
  }
  var q,
    $,
    Q,
    Z = function (e, t, n, i, o) {
      var r = e[t];
      return m.isArray(n) || m.isObject(n)
        ? new L(e, t, n)
        : m.isNumber(r)
        ? m.isNumber(n) && m.isNumber(i)
          ? m.isNumber(o)
            ? new I(e, t, n, i, o)
            : new I(e, t, n, i)
          : m.isNumber(o)
          ? new F(e, t, { min: n, max: i, step: o })
          : new F(e, t, { min: n, max: i })
        : m.isString(r)
        ? new R(e, t)
        : m.isFunction(r)
        ? new G(e, t, "")
        : m.isBoolean(r)
        ? new T(e, t)
        : null;
    },
    ee =
      (E(te, (q = v)),
      w(($ = te).prototype, [
        {
          key: "controller",
          set: function (e) {
            this._controller = e;
          },
          get: function () {
            return this._controller;
          },
        },
      ]),
      Q && w($, Q),
      te);
  function te(e, t) {
    var n = q.call(this, e, t) || this;
    return (
      (n.arguments = { object: e, property: t, opts: Array.prototype.slice.call(arguments, 2) }),
      e.property && (n.property = e.property(C(n))),
      n
    );
  }
  var ne = function (e, t) {
    var n = t || document,
      i = document.createElement("style");
    (i.type = "text/css"), (i.innerHTML = e);
    var o = n.getElementsByTagName("head")[0];
    try {
      o.appendChild(i);
    } catch (e) {}
  };
  var ie,
    oe =
      window.requestAnimationFrame ||
      window.webkitRequestAnimationFrame ||
      window.mozRequestAnimationFrame ||
      window.oRequestAnimationFrame ||
      window.msRequestAnimationFrame ||
      function (e) {
        setTimeout(e, 1e3 / 60);
      },
    re =
      (((ie = se.prototype).show = function () {
        var e = this;
        (this.backgroundElement.style.display = "block"),
          (this.domElement.style.display = "block"),
          (this.domElement.style.opacity = 0),
          (this.domElement.style.webkitTransform = "scale(1.1)"),
          this.layout(),
          m.defer(function () {
            (e.backgroundElement.style.opacity = 1),
              (e.domElement.style.opacity = 1),
              (e.domElement.style.webkitTransform = "scale(1)");
          });
      }),
      (ie.hide = function () {
        function e() {
          (t.domElement.style.display = "none"),
            (t.backgroundElement.style.display = "none"),
            O.unbind(t.domElement, "webkitTransitionEnd", e),
            O.unbind(t.domElement, "transitionend", e),
            O.unbind(t.domElement, "oTransitionEnd", e);
        }
        var t = this;
        O.bind(this.domElement, "webkitTransitionEnd", e),
          O.bind(this.domElement, "transitionend", e),
          O.bind(this.domElement, "oTransitionEnd", e),
          (this.backgroundElement.style.opacity = 0),
          (this.domElement.style.opacity = 0),
          (this.domElement.style.webkitTransform = "scale(1.1)");
      }),
      (ie.layout = function () {
        (this.domElement.style.left = window.innerWidth / 2 - O.getWidth(this.domElement) / 2 + "px"),
          (this.domElement.style.top = window.innerHeight / 2 - O.getHeight(this.domElement) / 2 + "px");
      }),
      se);
  function se() {
    (this.backgroundElement = document.createElement("div")),
      m.extend(this.backgroundElement.style, {
        backgroundColor: "rgba(0,0,0,0.8)",
        top: 0,
        left: 0,
        display: "none",
        zIndex: "1000",
        opacity: 0,
        WebkitTransition: "opacity 0.2s linear",
        transition: "opacity 0.2s linear",
      }),
      O.makeFullscreen(this.backgroundElement),
      (this.backgroundElement.style.position = "fixed"),
      (this.domElement = document.createElement("div")),
      m.extend(this.domElement.style, {
        position: "fixed",
        display: "none",
        zIndex: "1001",
        opacity: 0,
        WebkitTransition: "-webkit-transform 0.2s ease-out, opacity 0.2s linear",
        transition: "transform 0.2s ease-out, opacity 0.2s linear",
      }),
      document.body.appendChild(this.backgroundElement),
      document.body.appendChild(this.domElement);
    var e = this;
    O.bind(this.backgroundElement, "click", function () {
      e.hide();
    });
  }
  ne("");
  var ae,
    le,
    de = "Default",
    ce = (function () {
      try {
        return !!window.localStorage;
      } catch (e) {
        return !1;
      }
    })(),
    ue = !0,
    _e = !1,
    he = [],
    fe = function t(e) {
      var n = this,
        i = e || {};
      (this.domElement = document.createElement("div")),
        (this.__ul = document.createElement("ul")),
        this.domElement.appendChild(this.__ul),
        O.addClass(this.domElement, "dg"),
        (this.__folders = {}),
        (this.__controllers = []),
        (this.__rememberedObjects = []),
        (this.__rememberedObjectIndecesToControllers = []),
        (this.__listening = []),
        (i = m.defaults(i, { closeOnTop: !1, autoPlace: !0, width: t.DEFAULT_WIDTH })),
        (i = m.defaults(i, { resizable: i.autoPlace, hideable: i.autoPlace })),
        m.isUndefined(i.load) ? (i.load = { preset: de }) : i.preset && (i.load.preset = i.preset),
        m.isUndefined(i.parent) && i.hideable && he.push(this),
        (i.resizable = m.isUndefined(i.parent) && i.resizable),
        i.autoPlace && m.isUndefined(i.scrollable) && (i.scrollable = !0);
      var o,
        r,
        s,
        a,
        l,
        d,
        c,
        u = ce && "true" === localStorage.getItem(ye(0, "isLocal"));
      function _(e) {
        return e.preventDefault(), (l.width += d - e.clientX), l.onResize(), (d = e.clientX), !1;
      }
      function h() {
        O.removeClass(l.__closeButton, fe.CLASS_DRAG), O.unbind(window, "mousemove", _), O.unbind(window, "mouseup", h);
      }
      function f(e) {
        return (
          e.preventDefault(),
          (d = e.clientX),
          O.addClass(l.__closeButton, fe.CLASS_DRAG),
          O.bind(window, "mousemove", _),
          O.bind(window, "mouseup", h),
          !1
        );
      }
      Object.defineProperties(this, {
        parent: {
          get: function () {
            return i.parent;
          },
        },
        scrollable: {
          get: function () {
            return i.scrollable;
          },
        },
        autoPlace: {
          get: function () {
            return i.autoPlace;
          },
        },
        closeOnTop: {
          get: function () {
            return i.closeOnTop;
          },
        },
        preset: {
          get: function () {
            return n.parent ? n.getRoot().preset : i.load.preset;
          },
          set: function (e) {
            n.parent ? (n.getRoot().preset = e) : (i.load.preset = e),
              (function (e) {
                for (var t = 0; t < e.__preset_select.length; t++)
                  e.__preset_select[t].value === e.preset && (e.__preset_select.selectedIndex = t);
              })(this),
              n.revert();
          },
        },
        width: {
          get: function () {
            return i.width;
          },
          set: function (e) {
            (i.width = e), Ce(n, e);
          },
        },
        name: {
          get: function () {
            return i.name;
          },
          set: function (e) {
            (i.name = e), r && (r.innerHTML = i.name);
          },
        },
        closed: {
          get: function () {
            return i.closed;
          },
          set: function (e) {
            (i.closed = e),
              i.closed ? O.addClass(n.__ul, t.CLASS_CLOSED) : O.removeClass(n.__ul, t.CLASS_CLOSED),
              this.onResize(),
              n.__closeButton && (n.__closeButton.innerHTML = e ? t.TEXT_OPEN : t.TEXT_CLOSED);
          },
        },
        load: {
          get: function () {
            return i.load;
          },
        },
        useLocalStorage: {
          get: function () {
            return u;
          },
          set: function (e) {
            ce &&
              ((u = e) ? O.bind(window, "unload", o) : O.unbind(window, "unload", o),
              localStorage.setItem(ye(0, "isLocal"), e));
          },
        },
      }),
        m.isUndefined(i.parent)
          ? ((this.closed = i.closed || !1),
            O.addClass(this.domElement, t.CLASS_MAIN),
            O.makeSelectable(this.domElement, !1),
            ce && u && ((n.useLocalStorage = !0), (s = localStorage.getItem(ye(0, "gui"))) && (i.load = JSON.parse(s))),
            (this.__closeButton = document.createElement("div")),
            (this.__closeButton.innerHTML = t.TEXT_CLOSED),
            O.addClass(this.__closeButton, t.CLASS_CLOSE_BUTTON),
            i.closeOnTop
              ? (O.addClass(this.__closeButton, t.CLASS_CLOSE_TOP),
                this.domElement.insertBefore(this.__closeButton, this.domElement.childNodes[0]))
              : (O.addClass(this.__closeButton, t.CLASS_CLOSE_BOTTOM), this.domElement.appendChild(this.__closeButton)),
            O.bind(this.__closeButton, "click", function () {
              n.closed = !n.closed;
            }))
          : (void 0 === i.closed && (i.closed = !0),
            (a = document.createTextNode(i.name)),
            O.addClass(a, "controller-name"),
            (r = pe(n, a)),
            O.addClass(this.__ul, t.CLASS_CLOSED),
            O.addClass(r, "title"),
            O.bind(r, "click", function (e) {
              return e.preventDefault(), (n.closed = !n.closed), !1;
            }),
            i.closed || (this.closed = !1)),
        i.autoPlace &&
          (m.isUndefined(i.parent) &&
            (ue &&
              ((le = document.createElement("div")),
              O.addClass(le, "dg"),
              O.addClass(le, t.CLASS_AUTO_PLACE_CONTAINER),
              document.body.appendChild(le),
              (ue = !1)),
            le.appendChild(this.domElement),
            O.addClass(this.domElement, t.CLASS_AUTO_PLACE)),
          this.parent || Ce(n, i.width)),
        (this.__resizeHandler = function () {
          n.onResizeDebounced();
        }),
        O.bind(window, "resize", this.__resizeHandler),
        O.bind(this.__ul, "webkitTransitionEnd", this.__resizeHandler),
        O.bind(this.__ul, "transitionend", this.__resizeHandler),
        O.bind(this.__ul, "oTransitionEnd", this.__resizeHandler),
        this.onResize(),
        i.resizable &&
          (((l = this).__resize_handle = document.createElement("div")),
          m.extend(l.__resize_handle.style, {
            width: "6px",
            marginLeft: "-3px",
            height: "200px",
            cursor: "ew-resize",
            position: "absolute",
          }),
          O.bind(l.__resize_handle, "mousedown", f),
          O.bind(l.__closeButton, "mousedown", f),
          l.domElement.insertBefore(l.__resize_handle, l.domElement.firstElementChild)),
        (o = function () {
          ce &&
            "true" === localStorage.getItem(ye(0, "isLocal")) &&
            localStorage.setItem(ye(0, "gui"), JSON.stringify(n.getSaveObject()));
        }),
        (this.saveToLocalStorageIfPossible = o),
        i.parent ||
          (((c = n.getRoot()).width += 1),
          m.defer(function () {
            --c.width;
          }));
    };
  function pe(e, t, n) {
    var i = document.createElement("li");
    return t && i.appendChild(t), n ? e.__ul.insertBefore(i, n) : e.__ul.appendChild(i), e.onResize(), i;
  }
  function me(e) {
    O.unbind(window, "resize", e.__resizeHandler),
      e.saveToLocalStorageIfPossible && O.unbind(window, "unload", e.saveToLocalStorageIfPossible);
  }
  function be(e, t) {
    var n = e.__preset_select[e.__preset_select.selectedIndex];
    n.innerHTML = t ? n.value + "*" : n.value;
  }
  function ge(e, t) {
    var n = e.getRoot(),
      i = n.__rememberedObjects.indexOf(t.object);
    if (-1 !== i) {
      var o = n.__rememberedObjectIndecesToControllers[i];
      if (
        (void 0 === o && ((o = {}), (n.__rememberedObjectIndecesToControllers[i] = o)),
        (o[t.property] = t),
        n.load && n.load.remembered)
      ) {
        var r,
          s,
          a = n.load.remembered;
        if (a[e.preset]) r = a[e.preset];
        else {
          if (!a[de]) return;
          r = a[de];
        }
        r[i] && void 0 !== r[i][t.property] && ((s = r[i][t.property]), (t.initialValue = s), t.setValue(s));
      }
    }
  }
  function ve(e, t, n, i) {
    var o, r, s;
    if (
      (t.arguments &&
        ((t = (o = t).arguments.object), (n = o.arguments.property), (i = { factoryArgs: o.arguments.opts })),
      void 0 === o && void 0 === t[n])
    )
      throw new Error('Object "' + t + '" has no property "' + n + '"');
    null ===
    (s = i.color
      ? new K(t, n)
      : void 0 !== o && "string" == typeof o.property
      ? o
      : ((r = [t, n].concat(i.factoryArgs)), Z.apply(e, r)))
      ? (s = o)
      : void 0 !== o && (o.controller = s),
      i.before instanceof v && (i.before = i.before.__li),
      ge(e, s),
      O.addClass(s.domElement, "c");
    var a = document.createElement("span");
    if ((O.addClass(a, "property-name"), void 0 !== o && "object" == typeof o.property))
      for (var l in o.property) a.appendChild(o.property[l]);
    else a.innerHTML = s.property;
    var d = document.createElement("div");
    d.appendChild(a), d.appendChild(s.domElement);
    var c,
      u,
      _,
      h,
      f,
      p = pe(e, d, i.before);
    return (
      O.addClass(p, fe.CLASS_CONTROLLER_ROW),
      s instanceof K ? O.addClass(p, "color") : O.addClass(p, typeof s.getValue()),
      (c = e),
      (u = p),
      ((_ = s).__li = u),
      (_.__gui = c),
      m.extend(_, {
        options: function (e) {
          if (1 < arguments.length) {
            var t = _.__li.nextElementSibling;
            return _.remove(), ve(c, _.object, _.property, { before: t, factoryArgs: [m.toArray(arguments)] });
          }
          if (m.isArray(e) || m.isObject(e)) {
            var n = _.__li.nextElementSibling;
            return _.remove(), ve(c, _.object, _.property, { before: n, factoryArgs: [e] });
          }
        },
        name: function (e) {
          return (_.__li.firstElementChild.firstElementChild.innerHTML = e), _;
        },
        listen: function () {
          return _.__gui.listen(_), _;
        },
        remove: function () {
          return _.__gui.remove(_), _;
        },
      }),
      _ instanceof I
        ? ((h = new F(_.object, _.property, { min: _.__min, max: _.__max, step: _.__step })),
          m.each(["updateDisplay", "onChange", "onFinishChange", "step", "min", "max"], function (e) {
            var t = _[e],
              n = h[e];
            _[e] = h[e] = function () {
              var e = Array.prototype.slice.call(arguments);
              return n.apply(h, e), t.apply(_, e);
            };
          }),
          O.addClass(u, "has-slider"),
          _.domElement.insertBefore(h.domElement, _.domElement.firstElementChild))
        : _ instanceof F
        ? ((f = function (e) {
            if (m.isNumber(_.__min) && m.isNumber(_.__max)) {
              var t = _.__li.firstElementChild.firstElementChild.innerHTML,
                n = -1 < _.__gui.__listening.indexOf(_);
              _.remove();
              var i = ve(c, _.object, _.property, {
                before: _.__li.nextElementSibling,
                factoryArgs: [_.__min, _.__max, _.__step],
              });
              return i.name(t), n && i.listen(), i;
            }
            return e;
          }),
          (_.min = m.compose(f, _.min)),
          (_.max = m.compose(f, _.max)))
        : _ instanceof T
        ? (O.bind(u, "click", function () {
            O.fakeEvent(_.__checkbox, "click");
          }),
          O.bind(_.__checkbox, "click", function (e) {
            e.stopPropagation();
          }))
        : _ instanceof G
        ? (O.bind(u, "click", function () {
            O.fakeEvent(_.__button, "click");
          }),
          O.bind(u, "mouseover", function () {
            O.addClass(_.__button, "hover");
          }),
          O.bind(u, "mouseout", function () {
            O.removeClass(_.__button, "hover");
          }))
        : _ instanceof K &&
          (O.addClass(u, "color"),
          (_.updateDisplay = m.compose(function (e) {
            return (u.style.borderLeftColor = _.__color.toString()), e;
          }, _.updateDisplay)),
          _.updateDisplay()),
      (_.setValue = m.compose(function (e) {
        return c.getRoot().__preset_select && _.isModified() && be(c.getRoot(), !0), e;
      }, _.setValue)),
      e.__controllers.push(s),
      s
    );
  }
  function ye(e, t) {
    return document.location.href + "." + t;
  }
  function we(e, t, n) {
    var i = document.createElement("option");
    (i.innerHTML = t),
      (i.value = t),
      e.__preset_select.appendChild(i),
      n && (e.__preset_select.selectedIndex = e.__preset_select.length - 1);
  }
  function Ee(e, t) {
    t.style.display = e.useLocalStorage ? "block" : "none";
  }
  function Ce(e, t) {
    (e.domElement.style.width = t + "px"),
      e.__save_row && e.autoPlace && (e.__save_row.style.width = t + "px"),
      e.__closeButton && (e.__closeButton.style.width = t + "px");
  }
  function xe(o, r) {
    var s = {};
    return (
      m.each(o.__rememberedObjects, function (e, t) {
        var n = {},
          i = o.__rememberedObjectIndecesToControllers[t];
        m.each(i, function (e, t) {
          n[t] = r ? e.initialValue : e.getValue();
        }),
          (s[t] = n);
      }),
      s
    );
  }
  (fe.toggleHide = function () {
    (_e = !_e),
      m.each(he, function (e) {
        e.domElement.style.display = _e ? "none" : "";
      });
  }),
    (fe.CLASS_AUTO_PLACE = "a"),
    (fe.CLASS_AUTO_PLACE_CONTAINER = "ac"),
    (fe.CLASS_MAIN = "main"),
    (fe.CLASS_CONTROLLER_ROW = "cr"),
    (fe.CLASS_TOO_TALL = "taller-than-window"),
    (fe.CLASS_CLOSED = "closed"),
    (fe.CLASS_CLOSE_BUTTON = "close-button"),
    (fe.CLASS_CLOSE_TOP = "close-top"),
    (fe.CLASS_CLOSE_BOTTOM = "close-bottom"),
    (fe.CLASS_DRAG = "drag"),
    (fe.DEFAULT_WIDTH = 245),
    (fe.TEXT_CLOSED = "Close Controls"),
    (fe.TEXT_OPEN = "Open Controls"),
    (fe._keydownHandler = function (e) {
      "text" === document.activeElement.type || (72 !== e.which && 72 !== e.keyCode) || fe.toggleHide();
    }),
    O.bind(window, "keydown", fe._keydownHandler, !1),
    m.extend(fe.prototype, {
      add: function (e, t) {
        return ve(this, e, t, { factoryArgs: Array.prototype.slice.call(arguments, 2) });
      },
      addColor: function (e, t) {
        return ve(this, e, t, { color: !0 });
      },
      remove: function (e) {
        this.__ul.removeChild(e.__li), this.__controllers.splice(this.__controllers.indexOf(e), 1);
        var t = this;
        m.defer(function () {
          t.onResize();
        });
      },
      destroy: function () {
        if (this.parent)
          throw new Error(
            "Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead."
          );
        this.autoPlace && le.removeChild(this.domElement);
        var t = this;
        m.each(this.__folders, function (e) {
          t.removeFolder(e);
        }),
          O.unbind(window, "keydown", fe._keydownHandler, !1),
          me(this);
      },
      addFolder: function (e) {
        if (void 0 !== this.__folders[e])
          throw new Error('You already have a folder in this GUI by the name "' + e + '"');
        var t = { name: e, parent: this };
        (t.autoPlace = this.autoPlace),
          this.load &&
            this.load.folders &&
            this.load.folders[e] &&
            ((t.closed = this.load.folders[e].closed), (t.load = this.load.folders[e]));
        var n = new fe(t);
        this.__folders[e] = n;
        var i = pe(this, n.domElement);
        return O.addClass(i, "folder"), n;
      },
      removeFolder: function (t) {
        this.__ul.removeChild(t.domElement.parentElement),
          delete this.__folders[t.name],
          this.load && this.load.folders && this.load.folders[t.name] && delete this.load.folders[t.name],
          me(t);
        var e = this;
        m.each(t.__folders, function (e) {
          t.removeFolder(e);
        }),
          m.defer(function () {
            e.onResize();
          });
      },
      open: function () {
        this.closed = !1;
      },
      close: function () {
        this.closed = !0;
      },
      hide: function () {
        this.domElement.style.display = "none";
      },
      show: function () {
        this.domElement.style.display = "";
      },
      onResize: function () {
        var e,
          t,
          n = this.getRoot();
        n.scrollable &&
          ((e = O.getOffset(n.__ul).top),
          (t = 0),
          m.each(n.__ul.childNodes, function (e) {
            (n.autoPlace && e === n.__save_row) || (t += O.getHeight(e));
          }),
          window.innerHeight - e - 20 < t
            ? (O.addClass(n.domElement, fe.CLASS_TOO_TALL), (n.__ul.style.height = window.innerHeight - e - 20 + "px"))
            : (O.removeClass(n.domElement, fe.CLASS_TOO_TALL), (n.__ul.style.height = "auto"))),
          n.__resize_handle &&
            m.defer(function () {
              n.__resize_handle.style.height = n.__ul.offsetHeight + "px";
            }),
          n.__closeButton && (n.__closeButton.style.width = n.width + "px");
      },
      onResizeDebounced: m.debounce(function () {
        this.onResize();
      }, 50),
      remember: function () {
        if (
          (m.isUndefined(ae) &&
            ((ae = new re()).domElement.innerHTML =
              '<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>'),
          this.parent)
        )
          throw new Error("You can only call remember on a top level GUI.");
        var t = this;
        m.each(Array.prototype.slice.call(arguments), function (e) {
          0 === t.__rememberedObjects.length &&
            (function (n) {
              var e = (n.__save_row = document.createElement("li"));
              O.addClass(n.domElement, "has-save"),
                n.__ul.insertBefore(e, n.__ul.firstChild),
                O.addClass(e, "save-row");
              var t = document.createElement("span");
              (t.innerHTML = "&nbsp;"), O.addClass(t, "button gears");
              var i = document.createElement("span");
              (i.innerHTML = "Save"), O.addClass(i, "button"), O.addClass(i, "save");
              var o = document.createElement("span");
              (o.innerHTML = "New"), O.addClass(o, "button"), O.addClass(o, "save-as");
              var r = document.createElement("span");
              (r.innerHTML = "Revert"), O.addClass(r, "button"), O.addClass(r, "revert");
              var s = (n.__preset_select = document.createElement("select"));
              n.load && n.load.remembered
                ? m.each(n.load.remembered, function (e, t) {
                    we(n, t, t === n.preset);
                  })
                : we(n, de, !1);
              {
                var a, l;
                O.bind(s, "change", function () {
                  for (var e = 0; e < n.__preset_select.length; e++)
                    n.__preset_select[e].innerHTML = n.__preset_select[e].value;
                  n.preset = this.value;
                }),
                  e.appendChild(s),
                  e.appendChild(t),
                  e.appendChild(i),
                  e.appendChild(o),
                  e.appendChild(r),
                  ce &&
                    ((a = document.getElementById("dg-local-explain")),
                    (l = document.getElementById("dg-local-storage")),
                    (document.getElementById("dg-save-locally").style.display = "block"),
                    "true" === localStorage.getItem(ye(0, "isLocal")) && l.setAttribute("checked", "checked"),
                    Ee(n, a),
                    O.bind(l, "change", function () {
                      (n.useLocalStorage = !n.useLocalStorage), Ee(n, a);
                    }));
              }
              var d = document.getElementById("dg-new-constructor");
              O.bind(d, "keydown", function (e) {
                !e.metaKey || (67 !== e.which && 67 !== e.keyCode) || ae.hide();
              }),
                O.bind(t, "click", function () {
                  (d.innerHTML = JSON.stringify(n.getSaveObject(), void 0, 2)), ae.show(), d.focus(), d.select();
                }),
                O.bind(i, "click", function () {
                  n.save();
                }),
                O.bind(o, "click", function () {
                  var e = prompt("Enter a new preset name.");
                  e && n.saveAs(e);
                }),
                O.bind(r, "click", function () {
                  n.revert();
                });
            })(t),
            -1 === t.__rememberedObjects.indexOf(e) && t.__rememberedObjects.push(e);
        }),
          this.autoPlace && Ce(this, this.width);
      },
      getRoot: function () {
        for (var e = this; e.parent; ) e = e.parent;
        return e;
      },
      getSaveObject: function () {
        var n = this.load;
        return (
          (n.closed = this.closed),
          0 < this.__rememberedObjects.length &&
            ((n.preset = this.preset), n.remembered || (n.remembered = {}), (n.remembered[this.preset] = xe(this))),
          (n.folders = {}),
          m.each(this.__folders, function (e, t) {
            n.folders[t] = e.getSaveObject();
          }),
          n
        );
      },
      save: function () {
        this.load.remembered || (this.load.remembered = {}),
          (this.load.remembered[this.preset] = xe(this)),
          be(this, !1),
          this.saveToLocalStorageIfPossible();
      },
      saveAs: function (e) {
        this.load.remembered || ((this.load.remembered = {}), (this.load.remembered[de] = xe(this, !0))),
          (this.load.remembered[e] = xe(this)),
          (this.preset = e),
          we(this, e, !0),
          this.saveToLocalStorageIfPossible();
      },
      revert: function (t) {
        m.each(
          this.__controllers,
          function (e) {
            this.getRoot().load.remembered ? ge(t || this.getRoot(), e) : e.setValue(e.initialValue),
              e.__onFinishChange && e.__onFinishChange.call(e, e.getValue());
          },
          this
        ),
          m.each(this.__folders, function (e) {
            e.revert(e);
          }),
          t || be(this.getRoot(), !1);
      },
      listen: function (e) {
        var t = 0 === this.__listening.length;
        this.__listening.push(e),
          t &&
            (function e(t) {
              0 !== t.length &&
                oe.call(window, function () {
                  e(t);
                });
              m.each(t, function (e) {
                e.updateDisplay();
              });
            })(this.__listening);
      },
      updateDisplay: function () {
        m.each(this.__controllers, function (e) {
          e.updateDisplay();
        }),
          m.each(this.__folders, function (e) {
            e.updateDisplay();
          });
      },
    });
  var Se = { Color: p, math: u, interpret: f },
    ke = {
      Controller: v,
      BooleanController: T,
      OptionController: L,
      StringController: R,
      NumberController: H,
      NumberControllerBox: F,
      NumberControllerSlider: I,
      FunctionController: G,
      ColorController: K,
      CustomController: ee,
    },
    Ae = { dom: O },
    Oe = { GUI: fe },
    Te = { color: Se, controllers: ke, dom: Ae, gui: Oe, GUI: fe };
  (e.GUI = fe),
    (e.color = Se),
    (e.controllers = ke),
    (e.default = Te),
    (e.dom = Ae),
    (e.gui = Oe),
    Object.defineProperty(e, "__esModule", { value: !0 });
});
